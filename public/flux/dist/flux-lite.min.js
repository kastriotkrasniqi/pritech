(()=>{var it=class extends Event{oldState;newState;constructor(e,{oldState:t="",newState:i="",...s}={}){super(e,s),this.oldState=String(t||""),this.newState=String(i||"")}},Ai=new WeakMap;function Si(e,t,i){Ai.set(e,setTimeout(()=>{Ai.has(e)&&e.dispatchEvent(new it("toggle",{cancelable:!1,oldState:t,newState:i}))},0))}var Lt=globalThis.ShadowRoot||function(){},js=globalThis.HTMLDialogElement||function(){},st=new WeakMap,ue=new WeakMap,He=new WeakMap;function at(e){return He.get(e)||"hidden"}var rt=new WeakMap;function Xs(e){let t=e.popoverTargetElement;if(!(t instanceof HTMLElement))return;let i=at(t);e.popoverTargetAction==="show"&&i==="showing"||e.popoverTargetAction==="hide"&&i==="hidden"||(i==="showing"?Be(t,!0,!0):ye(t,!1)&&(rt.set(t,e),Ot(t)))}function ye(e,t){return!(e.popover!=="auto"&&e.popover!=="manual"||!e.isConnected||t&&at(e)!=="showing"||!t&&at(e)!=="hidden"||e instanceof js&&e.hasAttribute("open")||document.fullscreenElement===e)}function _i(e){return e?Array.from(ue.get(e.ownerDocument)||[]).indexOf(e)+1:0}function Ks(e){let t=ki(e),i=Js(e);return _i(t)>_i(i)?t:i}function nt(e){let t=ue.get(e);for(let i of t||[])if(!i.isConnected)t.delete(i);else return i;return null}function De(e){return typeof e.getRootNode=="function"?e.getRootNode():e.parentNode?De(e.parentNode):e}function ki(e){for(;e;){if(e instanceof HTMLElement&&e.popover==="auto"&&He.get(e)==="showing")return e;if(e=e instanceof Element&&e.assignedSlot||e.parentElement||De(e),e instanceof Lt&&(e=e.host),e instanceof Document)return}}function Js(e){for(;e;){let t=e.popoverTargetElement;if(t instanceof HTMLElement)return t;if(e=e.parentElement||De(e),e instanceof Lt&&(e=e.host),e instanceof Document)return}}function Zs(e){let t=new Map,i=0;for(let r of ue.get(e.ownerDocument)||[])t.set(r,i),i+=1;t.set(e,i),i+=1;let s=null;function a(r){let n=ki(r);if(n===null)return null;let l=t.get(n);(s===null||t.get(s)<l)&&(s=n)}return a(e.parentElement||De(e)),s}function Qs(e){return e.hidden||e instanceof Lt||(e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLFieldSetElement)&&e.disabled||e instanceof HTMLInputElement&&e.type==="hidden"||e instanceof HTMLAnchorElement&&e.href===""?!1:typeof e.tabIndex=="number"&&e.tabIndex!==-1}function ea(e){if(e.shadowRoot&&e.shadowRoot.delegatesFocus!==!0)return null;let t=e;t.shadowRoot&&(t=t.shadowRoot);let i=t.querySelector("[autofocus]");if(i)return i;{let r=t.querySelectorAll("slot");for(let n of r){let l=n.assignedElements({flatten:!0});for(let o of l){if(o.hasAttribute("autofocus"))return o;if(i=o.querySelector("[autofocus]"),i)return i}}}let s=e.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),a=s.currentNode;for(;a;){if(Qs(a))return a;a=s.nextNode()}}function ta(e){ea(e)?.focus()}var ot=new WeakMap;function Ot(e){if(!ye(e,!1))return;let t=e.ownerDocument;if(!e.dispatchEvent(new it("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!ye(e,!1))return;let i=!1;if(e.popover==="auto"){let a=e.getAttribute("popover"),r=Zs(e)||t;if(lt(r,!1,!0),a!==e.getAttribute("popover")||!ye(e,!1))return}nt(t)||(i=!0),ot.delete(e);let s=t.activeElement;e.classList.add(":popover-open"),He.set(e,"showing"),st.has(t)||st.set(t,new Set),st.get(t).add(e),ta(e),e.popover==="auto"&&(ue.has(t)||ue.set(t,new Set),ue.get(t).add(e),Di(rt.get(e),!0)),i&&s&&e.popover==="auto"&&ot.set(e,s),Si(e,"closed","open")}function Be(e,t=!1,i=!1){if(!ye(e,!0))return;let s=e.ownerDocument;if(e.popover==="auto"&&(lt(e,t,i),!ye(e,!0))||(Di(rt.get(e),!1),rt.delete(e),i&&(e.dispatchEvent(new it("beforetoggle",{oldState:"open",newState:"closed"})),!ye(e,!0))))return;st.get(s)?.delete(e),ue.get(s)?.delete(e),e.classList.remove(":popover-open"),He.set(e,"hidden"),i&&Si(e,"open","closed");let a=ot.get(e);a&&(ot.delete(e),t&&a.focus())}function Ei(e,t=!1,i=!1){let s=nt(e);for(;s;)Be(s,t,i),s=nt(e)}function lt(e,t,i){let s=e.ownerDocument||e;if(e instanceof Document)return Ei(s,t,i);let a=null,r=!1;for(let n of ue.get(s)||[])if(n===e)r=!0;else if(r){a=n;break}if(!r)return Ei(s,t,i);for(;a&&at(a)==="showing"&&ue.get(s)?.size;)Be(a,t,i)}var Nt=new WeakMap;function Ci(e){if(!e.isTrusted)return;let t=e.composedPath()[0];if(!t)return;let i=t.ownerDocument;if(!nt(i))return;let a=Ks(t);if(a&&e.type==="pointerdown")Nt.set(i,a);else if(e.type==="pointerup"){let r=Nt.get(i)===a;Nt.delete(i),r&&lt(a||i,!1,!0)}}var Ut=new WeakMap;function Di(e,t=!1){if(!e)return;Ut.has(e)||Ut.set(e,e.getAttribute("aria-expanded"));let i=e.popoverTargetElement;if(i instanceof HTMLElement&&i.popover==="auto")e.setAttribute("aria-expanded",String(t));else{let s=Ut.get(e);s?e.setAttribute("aria-expanded",s):e.removeAttribute("aria-expanded")}}var Ti=globalThis.ShadowRoot||function(){};function ia(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function we(e,t,i){let s=e[t];Object.defineProperty(e,t,{value(a){return s.call(this,i(a))}})}var sa=/(^|[^\\]):popover-open\b/g;function aa(){return typeof globalThis.CSSLayerBlockRule=="function"}function ra(){let e=aa();return`
${e?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${e?"}":""}
`}var Te=null;function Ft(e){let t=ra();if(Te===null)try{Te=new CSSStyleSheet,Te.replaceSync(t)}catch{Te=!1}if(Te===!1){let i=document.createElement("style");i.textContent=t,e instanceof Document?e.head.prepend(i):e.prepend(i)}else e.adoptedStyleSheets=[Te,...e.adoptedStyleSheets]}function na(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||it;function e(o){return o?.includes(":popover-open")&&(o=o.replace(sa,"$1.\\:popover-open")),o}we(Document.prototype,"querySelector",e),we(Document.prototype,"querySelectorAll",e),we(Element.prototype,"querySelector",e),we(Element.prototype,"querySelectorAll",e),we(Element.prototype,"matches",e),we(Element.prototype,"closest",e),we(DocumentFragment.prototype,"querySelectorAll",e),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let o=(this.getAttribute("popover")||"").toLowerCase();return o===""||o=="auto"?"auto":"manual"},set(o){o===null?this.removeAttribute("popover"):this.setAttribute("popover",o)}},showPopover:{enumerable:!0,configurable:!0,value(){Ot(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){Be(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(o){He.get(this)==="showing"&&o===void 0||o===!1?Be(this,!0,!0):(o===void 0||o===!0)&&Ot(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(o){let c=t.call(this,o);return Ft(c),c}}});let i=HTMLElement.prototype.attachInternals;i&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let o=i.call(this);return o.shadowRoot&&Ft(o.shadowRoot),o}}});let s=new WeakMap;function a(o){Object.defineProperties(o.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(c){if(c===null)this.removeAttribute("popovertarget"),s.delete(this);else if(c instanceof Element)this.setAttribute("popovertarget",""),s.set(this,c);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let c=s.get(this);if(c&&c.isConnected)return c;if(c&&!c.isConnected)return s.delete(this),null;let h=De(this),b=this.getAttribute("popovertarget");return(h instanceof Document||h instanceof Ti)&&b&&h.getElementById(b)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let c=(this.getAttribute("popovertargetaction")||"").toLowerCase();return c==="show"||c==="hide"?c:"toggle"},set(c){this.setAttribute("popovertargetaction",c)}}})}a(HTMLButtonElement),a(HTMLInputElement);let r=o=>{let c=o.composedPath(),h=c[0];if(!(h instanceof Element)||h?.shadowRoot)return;let b=De(h);if(!(b instanceof Ti||b instanceof Document))return;let w=c.find(d=>d.matches?.("[popovertargetaction],[popovertarget]"));if(w){Xs(w),o.preventDefault();return}},n=o=>{let c=o.key,h=o.target;!o.defaultPrevented&&h&&(c==="Escape"||c==="Esc")&&lt(h.ownerDocument,!0,!0)};(o=>{o.addEventListener("click",r),o.addEventListener("keydown",n),o.addEventListener("pointerdown",Ci),o.addEventListener("pointerup",Ci)})(document),Ft(document)}ia()||na();var ut=class extends Event{oldState;newState;constructor(e,{oldState:t="",newState:i="",...s}={}){super(e,s),this.oldState=String(t||""),this.newState=String(i||"")}},Mi=new WeakMap;function Ii(e,t,i){Mi.set(e,setTimeout(()=>{Mi.has(e)&&e.dispatchEvent(new ut("toggle",{cancelable:!1,oldState:t,newState:i}))},0))}var Rt=globalThis.ShadowRoot||function(){},oa=globalThis.HTMLDialogElement||function(){},ct=new WeakMap,ce=new WeakMap,Ye=new WeakMap;function ht(e){return Ye.get(e)||"hidden"}var dt=new WeakMap;function la(e){let t=e.popoverTargetElement;if(!(t instanceof HTMLElement))return;let i=ht(t);e.popoverTargetAction==="show"&&i==="showing"||e.popoverTargetAction==="hide"&&i==="hidden"||(i==="showing"?$e(t,!0,!0):xe(t,!1)&&(dt.set(t,e),qt(t)))}function xe(e,t){return!(e.popover!=="auto"&&e.popover!=="manual"||!e.isConnected||t&&ht(e)!=="showing"||!t&&ht(e)!=="hidden"||e instanceof oa&&e.hasAttribute("open")||document.fullscreenElement===e)}function Pi(e){return e?Array.from(ce.get(e.ownerDocument)||[]).indexOf(e)+1:0}function ua(e){let t=Li(e),i=ca(e);return Pi(t)>Pi(i)?t:i}function ft(e){let t=ce.get(e);for(let i of t||[])if(!i.isConnected)t.delete(i);else return i;return null}function Me(e){return typeof e.getRootNode=="function"?e.getRootNode():e.parentNode?Me(e.parentNode):e}function Li(e){for(;e;){if(e instanceof HTMLElement&&e.popover==="auto"&&Ye.get(e)==="showing")return e;if(e=e instanceof Element&&e.assignedSlot||e.parentElement||Me(e),e instanceof Rt&&(e=e.host),e instanceof Document)return}}function ca(e){for(;e;){let t=e.popoverTargetElement;if(t instanceof HTMLElement)return t;if(e=e.parentElement||Me(e),e instanceof Rt&&(e=e.host),e instanceof Document)return}}function ha(e){let t=new Map,i=0;for(let r of ce.get(e.ownerDocument)||[])t.set(r,i),i+=1;t.set(e,i),i+=1;let s=null;function a(r){let n=Li(r);if(n===null)return null;let l=t.get(n);(s===null||t.get(s)<l)&&(s=n)}return a(e.parentElement||Me(e)),s}function da(e){return e.hidden||e instanceof Rt||(e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLFieldSetElement)&&e.disabled||e instanceof HTMLInputElement&&e.type==="hidden"||e instanceof HTMLAnchorElement&&e.href===""?!1:typeof e.tabIndex=="number"&&e.tabIndex!==-1}function fa(e){if(e.shadowRoot&&e.shadowRoot.delegatesFocus!==!0)return null;let t=e;t.shadowRoot&&(t=t.shadowRoot);let i=t.querySelector("[autofocus]");if(i)return i;{let r=t.querySelectorAll("slot");for(let n of r){let l=n.assignedElements({flatten:!0});for(let o of l){if(o.hasAttribute("autofocus"))return o;if(i=o.querySelector("[autofocus]"),i)return i}}}let s=e.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),a=s.currentNode;for(;a;){if(da(a))return a;a=s.nextNode()}}function pa(e){fa(e)?.focus()}var pt=new WeakMap;function qt(e){if(!xe(e,!1))return;let t=e.ownerDocument;if(!e.dispatchEvent(new ut("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!xe(e,!1))return;let i=!1;if(e.popover==="auto"){let a=e.getAttribute("popover"),r=ha(e)||t;if(bt(r,!1,!0),a!==e.getAttribute("popover")||!xe(e,!1))return}ft(t)||(i=!0),pt.delete(e);let s=t.activeElement;e.classList.add(":popover-open"),Ye.set(e,"showing"),ct.has(t)||ct.set(t,new Set),ct.get(t).add(e),pa(e),e.popover==="auto"&&(ce.has(t)||ce.set(t,new Set),ce.get(t).add(e),Ui(dt.get(e),!0)),i&&s&&e.popover==="auto"&&pt.set(e,s),Ii(e,"closed","open")}function $e(e,t=!1,i=!1){if(!xe(e,!0))return;let s=e.ownerDocument;if(e.popover==="auto"&&(bt(e,t,i),!xe(e,!0))||(Ui(dt.get(e),!1),dt.delete(e),i&&(e.dispatchEvent(new ut("beforetoggle",{oldState:"open",newState:"closed"})),!xe(e,!0))))return;ct.get(s)?.delete(e),ce.get(s)?.delete(e),e.classList.remove(":popover-open"),Ye.set(e,"hidden"),i&&Ii(e,"open","closed");let a=pt.get(e);a&&(pt.delete(e),t&&a.focus())}function Oi(e,t=!1,i=!1){let s=ft(e);for(;s;)$e(s,t,i),s=ft(e)}function bt(e,t,i){let s=e.ownerDocument||e;if(e instanceof Document)return Oi(s,t,i);let a=null,r=!1;for(let n of ce.get(s)||[])if(n===e)r=!0;else if(r){a=n;break}if(!r)return Oi(s,t,i);for(;a&&ht(a)==="showing"&&ce.get(s)?.size;)$e(a,t,i)}var Vt=new WeakMap;function Ni(e){if(!e.isTrusted)return;let t=e.composedPath()[0];if(!t)return;let i=t.ownerDocument;if(!ft(i))return;let a=ua(t);if(a&&e.type==="pointerdown")Vt.set(i,a);else if(e.type==="pointerup"){let r=Vt.get(i)===a;Vt.delete(i),r&&bt(a||i,!1,!0)}}var Wt=new WeakMap;function Ui(e,t=!1){if(!e)return;Wt.has(e)||Wt.set(e,e.getAttribute("aria-expanded"));let i=e.popoverTargetElement;if(i instanceof HTMLElement&&i.popover==="auto")e.setAttribute("aria-expanded",String(t));else{let s=Wt.get(e);s?e.setAttribute("aria-expanded",s):e.removeAttribute("aria-expanded")}}var Fi=globalThis.ShadowRoot||function(){};function ba(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function ga(){return!!(document.body?.showPopover&&!/native code/i.test(document.body.showPopover.toString()))}function Ae(e,t,i){let s=e[t];Object.defineProperty(e,t,{value(a){return s.call(this,i(a))}})}var ma=/(^|[^\\]):popover-open\b/g;function va(){return typeof globalThis.CSSLayerBlockRule=="function"}function ya(){let e=va();return`
${e?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${e?"}":""}
`}var Ie=null;function Ht(e){let t=ya();if(Ie===null)try{Ie=new CSSStyleSheet,Ie.replaceSync(t)}catch{Ie=!1}if(Ie===!1){let i=document.createElement("style");i.textContent=t,e instanceof Document?e.head.prepend(i):e.prepend(i)}else e.adoptedStyleSheets=[Ie,...e.adoptedStyleSheets]}function wa(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||ut;function e(o){return o?.includes(":popover-open")&&(o=o.replace(ma,"$1.\\:popover-open")),o}Ae(Document.prototype,"querySelector",e),Ae(Document.prototype,"querySelectorAll",e),Ae(Element.prototype,"querySelector",e),Ae(Element.prototype,"querySelectorAll",e),Ae(Element.prototype,"matches",e),Ae(Element.prototype,"closest",e),Ae(DocumentFragment.prototype,"querySelectorAll",e),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let o=(this.getAttribute("popover")||"").toLowerCase();return o===""||o=="auto"?"auto":"manual"},set(o){o===null?this.removeAttribute("popover"):this.setAttribute("popover",o)}},showPopover:{enumerable:!0,configurable:!0,value(){qt(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){$e(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(o){Ye.get(this)==="showing"&&o===void 0||o===!1?$e(this,!0,!0):(o===void 0||o===!0)&&qt(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(o){let c=t.call(this,o);return Ht(c),c}}});let i=HTMLElement.prototype.attachInternals;i&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let o=i.call(this);return o.shadowRoot&&Ht(o.shadowRoot),o}}});let s=new WeakMap;function a(o){Object.defineProperties(o.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(c){if(c===null)this.removeAttribute("popovertarget"),s.delete(this);else if(c instanceof Element)this.setAttribute("popovertarget",""),s.set(this,c);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let c=s.get(this);if(c&&c.isConnected)return c;if(c&&!c.isConnected)return s.delete(this),null;let h=Me(this),b=this.getAttribute("popovertarget");return(h instanceof Document||h instanceof Fi)&&b&&h.getElementById(b)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let c=(this.getAttribute("popovertargetaction")||"").toLowerCase();return c==="show"||c==="hide"?c:"toggle"},set(c){this.setAttribute("popovertargetaction",c)}}})}a(HTMLButtonElement),a(HTMLInputElement);let r=o=>{let c=o.composedPath(),h=c[0];if(!(h instanceof Element)||h?.shadowRoot)return;let b=Me(h);if(!(b instanceof Fi||b instanceof Document))return;let w=c.find(d=>d.matches?.("[popovertargetaction],[popovertarget]"));if(w){la(w),o.preventDefault();return}},n=o=>{let c=o.key,h=o.target;!o.defaultPrevented&&h&&(c==="Escape"||c==="Esc")&&bt(h.ownerDocument,!0,!0)};(o=>{o.addEventListener("click",r),o.addEventListener("keydown",n),o.addEventListener("pointerdown",Ni),o.addEventListener("pointerup",Ni)})(document),Ht(document)}function P(e){let t=e({css:(s,...a)=>`@layer base { ${s.raw[0]+a.join("")} }`});if(document.adoptedStyleSheets===void 0){let s=document.createElement("style");s.textContent=t,document.head.appendChild(s);return}let i=new CSSStyleSheet;i.replaceSync(t),document.adoptedStyleSheets=[...document.adoptedStyleSheets,i]}function Ri(e,t){let i=e;for(;i;){if(t(i))return i;i=i.parentElement}}function se(e,t){let i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,t?{acceptNode:s=>{let a,r;return t(s,{skip:()=>a=!0,reject:()=>r=!0}),a?NodeFilter.FILTER_SKIP:r?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}:{});return new xa(i)}var xa=class{constructor(e){this.walker=e}from(e){return this.walker.currentNode=e,this}first(){return this.walker.firstChild()}last(){return this.walker.lastChild()}next(e){return this.walker.currentNode=e,this.walker.nextSibling()}nextOrFirst(e){let t=this.next(e);return t||(this.walker.currentNode=this.walker.root,this.first())}prev(e){return this.walker.currentNode=e,this.walker.previousSibling()}prevOrLast(e){let t=this.prev(e);return t||(this.walker.currentNode=this.walker.root,this.last())}closest(e,t){let i=this.from(e).walker;for(;i.currentNode;){if(t(i.currentNode))return i.currentNode;i.parentNode()}}contains(e){return this.find(t=>t===e)}find(e){return this.walk((t,i)=>{e(t)&&i(t)})}findOrFirst(e){return this.find(e)||(this.walker.currentNode=this.walker.root),this.first()}each(e){this.walk(t=>e(t))}some(e){return!!this.find(e)}every(e){let t=!0;return this.walk(i=>{e(i)||(t=!1)}),t}map(e){let t=[];return this.walk(i=>t.push(e(i))),t}filter(e){let t=[];return this.walk(i=>e(i)&&t.push(i)),t}walk(e){let t,i=this.walker,s;for(;i.nextNode()&&(t=i.currentNode,e(t,a=>s=a),s===void 0););return s}};function C(e,t){customElements.define(`ui-${e}`,t)}function _(e,t,i,s={}){return e.addEventListener(t,i,s),{off:()=>e.removeEventListener(t,i),pause:a=>{e.removeEventListener(t,i),a(),e.addEventListener(t,i)}}}function Aa(e){return["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","[contenteditable]"].some(i=>e.matches(i))&&e.tabIndex>=0}function qi(e,t){let i;return function(){let s=this,a=arguments;i||(e.apply(s,a),i=!0,setTimeout(()=>i=!1,t))}}function Vi(e,t){let i,s,a=t,r=!1,n={pause:()=>{r&&(clearTimeout(i),a-=Date.now()-s,r=!1)},resume:()=>{r||(s=Date.now(),i=setTimeout(e,a),r=!0)},cancel:()=>{clearTimeout(i),r=!1,a=t}};return n.resume(),n}var gt="pointer";document.addEventListener("keydown",()=>gt="keyboard",{capture:!0}),document.addEventListener("pointerdown",e=>{gt=e.pointerType==="mouse"?"mouse":"touch"},{capture:!0});function Bt(){return gt==="keyboard"}function Sa(){return gt==="touch"}function Wi(e,t){let i="",s=Ia(()=>{i=""},300);e.addEventListener("keydown",a=>{a.key.length===1&&/[a-zA-Z]/.test(a.key)&&(i+=a.key,t(i),a.stopPropagation()),s()})}function _a(e,t){return"lofi-"+(t?t+"-":"")+Math.random().toString(16).slice(2)}function $(e,t){let i=e.hasAttribute("id")?e.getAttribute("id"):_a(e,t);return f(e,"id",i),e._x_bindings||(e._x_bindings={}),e._x_bindings.id||(e._x_bindings.id=i),i}function F(){let e=!1;return t=>(...i)=>{e||(e=!0,t(...i),e=!1)}}function Yt(e,t,{gain:i,lose:s,focusable:a,useSafeArea:r}){let n=!1,l=y=>{Bt()&&(e.contains(y.target)||t.contains(y.target)?(n=!0,i()):(n=!1,s()))};a&&document.addEventListener("focusin",l);let o=()=>{document.removeEventListener("focusin",l)},c=()=>{},h=()=>{},b=()=>{n=!1,s(),c(),h()},w=()=>{n=!1,c(),h()},d=y=>{Sa()||n||(n=!0,i(),setTimeout(()=>{let{safeArea:p,redraw:m,remove:v}=r?ka(e,t,y.clientX,y.clientY):Ma();c=v;let A,S=qi(E=>{let M=t.getBoundingClientRect(),U=e.getBoundingClientRect(),L;switch(p.contains(E.target)&&Ea(U,M,E.clientX,E.clientY)?L="safeArea":t.contains(E.target)?L="panel":e.contains(E.target)?L="trigger":L="outside",A&&clearTimeout(A),L){case"outside":b();break;case"trigger":m(E.clientX,E.clientY);break;case"panel":c();break;case"safeArea":m(E.clientX,E.clientY),A=setTimeout(()=>{b()},300);break;default:break}},100);document.addEventListener("pointermove",S),h=()=>document.removeEventListener("pointermove",S)}))};e.addEventListener("pointerenter",d);let u=()=>{e.removeEventListener("pointerenter",d)};return{clear:w,remove:()=>{w(),u(),o()}}}function ka(e,t,i,s){let a=document.createElement("div"),r=t.getBoundingClientRect(),n=e.getBoundingClientRect();a.style.position="fixed",f(a,"data-safe-area","");let l=(o,c)=>{if(r.top===0&&r.bottom===0)return;let h;r.left<n.left&&(h="left"),r.right>n.right&&(h="right"),r.top<n.top&&r.bottom<c&&(h="up"),r.bottom>n.bottom&&r.top>c&&(h="down"),h===void 0&&(h="right");let b,w,d,u,x,y,p,m,v=10;switch(h){case"left":b=r.right,w=Math.max(r.right,o)+5,d=w-b,u=Math.min(n.top,r.top)-v,x=Math.max(n.bottom,r.bottom)+v,y=x-u,p=c-u,m=`polygon(0% 0%, 100% ${p}px, 0% 100%)`;break;case"right":b=Math.min(r.left,o)-5,w=r.left,d=w-b,u=Math.min(n.top,r.top)-v,x=Math.max(n.bottom,r.bottom)+v,y=x-u,p=c-u,m=`polygon(0% ${p}px, 100% 0%, 100% 100%)`;break;case"up":b=Math.min(o,r.left)-v,w=Math.max(o,r.right)+v,d=w-b,u=r.bottom,x=Math.max(r.bottom,c)+5,y=x-u,p=o-b,m=`polygon(0% 0%, 100% 0%, ${p}px 100%)`;break;case"down":b=Math.min(o,r.left)-v,w=Math.max(o,r.right)+v,d=w-b,u=Math.min(r.top,c)-5,x=r.top,y=x-u,p=o-b,m=`polygon(${p}px 0%, 100% 100%, 0% 100%)`;break}a.style.left=`${b}px`,a.style.top=`${u}px`,a.style.width=`${d}px`,a.style.height=`${y}px`,a.style.clipPath=m};return{safeArea:a,redraw:(o,c)=>{a.isConnected||e.appendChild(a),l(o,c)},remove:()=>{a.remove()}}}function Ea(e,t,i,s){return!Ca(e,i,s)&&!Da(t,i,s)}function Ca(e,t,i){return e.left<=t&&t<=e.right&&e.top<=i&&i<=e.bottom}function Da(e,t,i){return e.left<=t&&t<=e.right&&e.top<=i&&i<=e.bottom}function f(e,t,i){e._durableAttributeObserver===void 0&&(e._durableAttributeObserver=Hi(e,[t])),e._durableAttributeObserver.hasAttribute(t)||e._durableAttributeObserver.addAttribute(t),e._durableAttributeObserver.pause(()=>{e.setAttribute(t,i)})}function mt(e,t){k(e,t),Ta(e,t)}function k(e,t){e._durableAttributeObserver===void 0&&(e._durableAttributeObserver=Hi(e,[t])),e._durableAttributeObserver.hasAttribute(t)||e._durableAttributeObserver.addAttribute(t),e._durableAttributeObserver.pause(()=>{e.removeAttribute(t)})}function Ta(e,t){e?._durableAttributeObserver?.hasAttribute(t)&&e._durableAttributeObserver.releaseAttribute(t)}function Hi(e,t){let i=a=>{a.forEach(r=>{r.oldValue===null?e._durableAttributeObserver.pause(()=>k(e,r.attributeName)):e._durableAttributeObserver.pause(()=>f(e,r.attributeName,r.oldValue))})},s=new MutationObserver(a=>i(a));return s.observe(e,{attributeFilter:t,attributeOldValue:!0}),{attributes:t,hasAttribute(a){return this.attributes.includes(a)},addAttribute(a){this.attributes.includes(a)||this.attributes.push(a),s.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})},releaseAttribute(a){this.hasAttribute(a)&&s.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})},pause(a){i(s.takeRecords()),s.disconnect(),a(),s.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})}}}function Ma(){return{safeArea:{contains:()=>!1},redraw:()=>{},remove:()=>{}}}function Ia(e,t){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{e(...s)},t)}}var Pe=0,Le=!1;P(({css:e})=>e`[data-flux-allow-scroll] { pointer-events: auto; }`);function Oe(e=null,t=!1,i=[]){if(t)return{lock:()=>{},unlock:()=>{}};let s=(r=!1)=>{Bi(document.documentElement),Pa(document.documentElement,{paddingRight:`calc(${window.innerWidth-document.documentElement.clientWidth}px + ${window.getComputedStyle(document.documentElement).paddingRight})`,overflow:"hidden",...r?{pointerEvents:"none"}:{}}),r&&(f(e,"data-flux-allow-scroll",""),i.forEach(n=>{f(n,"data-flux-allow-scroll","")}),Le=!0)},a=(r=!1)=>{Bi(document.documentElement),r&&(mt(e,"data-flux-allow-scroll"),i.forEach(n=>{k(n,"data-flux-allow-scroll")}),Le=!1)};return{lock(){Pe++,!(Pe>1&&e!==null&&Le)&&s(e!==null&&!Le)},unlock(){Pe=Math.max(0,Pe-1),!(Pe>0&&e!==null&&!Le)&&(a(e!==null&&Le),Pe>0&&s(!1))}}}function Pa(e,t){let i=JSON.parse(e.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([s,a])=>{i[s]===void 0&&(i[s]=e.style[s],e.style[s]=a)}),e.setAttribute("data-flux-scroll-unlock",JSON.stringify(i))}function Bi(e){let t=JSON.parse(e.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([i,s])=>{e.style[i]=s}),e.removeAttribute("data-flux-scroll-unlock")}function vt(e,t,i){let s=(n,l)=>o=>{o.key===n&&!t()&&(l(),o.preventDefault(),o.stopPropagation())};f(e,"role","button");let a=()=>{e.hasAttribute("disabled")?(f(e,"aria-disabled","true"),f(e,"tabindex","-1")):(k(e,"aria-disabled"),f(e,"tabindex","0"))};new MutationObserver(()=>a()).observe(e,{attributes:!0,attributeFilter:["disabled"]}),a(),_(e,"click",()=>i()),_(e,"keydown",s("Enter",()=>i())),_(e,"keydown",s(" ",()=>{})),_(e,"keyup",s(" ",()=>i()))}function La(e,t,i=null){let s=()=>{let n=e.getAttribute(t),l={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};for(let[o,c]of Object.entries(l).reverse()){let h=e.getAttribute(`${o}:${t}`);if(h&&window.innerWidth>=c)return h}return n||i},a=s(),r=[];return new ResizeObserver(()=>{let n=s(),l=JSON.stringify(a);JSON.stringify(n)!==l&&(a=n,r.forEach(o=>o(n)))}).observe(window.document.documentElement),[a,n=>r.push(n)]}function fe(){return navigator?.language||document.documentElement.lang||"en-US"}function $t(e,t={slots:{},attrs:{}}){let{slots:i={},attrs:s={}}=t,a=e.content.cloneNode(!0).firstElementChild;return Object.entries(i).forEach(([r,n])=>{(r==="default"?a.querySelectorAll("slot:not([name])"):a.querySelectorAll(`slot[name="${r}"]`)).forEach(o=>o.replaceWith(typeof n=="string"?document.createTextNode(n):n))}),a.querySelectorAll("slot").forEach(r=>r.remove()),Object.entries(s).forEach(([r,n])=>{a.setAttribute(r,n)}),a.setAttribute("data-appended",""),a}function zt(){return document.documentElement.dir==="rtl"}function Oa(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!navigator.userAgent.includes("CriOS")&&!navigator.userAgent.includes("FxiOS")}function Na(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}var D=class extends HTMLElement{wasDisconnected=!1;constructor(){super(),this.boot?.()}connectedCallback(){if(this.wasDisconnected){this.wasDisconnected=!1;return}queueMicrotask(()=>{this.mount?.()})}disconnectedCallback(){this.wasDisconnected=!0,queueMicrotask(()=>{this.wasDisconnected&&this.unmount?.(),this.wasDisconnected=!1})}mixin(e,t={}){return new e(this,t)}appendMixin(e,t={}){return new e(this,t)}use(e){let t;return this.mixins.forEach(i=>{i instanceof e&&(t=i)}),t}uses(e){let t;return this.mixins.forEach(i=>{i instanceof e&&(t=!0)}),!!t}on(e,t){return _(this,e,t)}root(e,t={}){if(e===void 0)return this.__root;let i=document.createElement(e);for(let a in t)setAttribute(i,a,t[a]);let s=this.attachShadow({mode:"open"});return i.appendChild(document.createElement("slot")),s.appendChild(i),this.__root=i,this.__root}},ae=class extends D{},z=class{constructor(e,t={}){this.el=e,this.grouped=t.grouped===void 0,this.el.mixins=this.el.mixins?this.el.mixins:new Map,this.el.mixins.set(this.constructor.name,this),this.el[this.constructor.name]=!0,this.el.use||(this.el.use=D.prototype.use.bind(this.el)),this.opts=t,this.boot?.({options:i=>{let s=i;Object.entries(this.opts).forEach(([a,r])=>{r!==void 0&&(s[a]=r)}),this.opts=s}}),queueMicrotask(()=>{this.mount?.()})}options(){return this.opts}hasGroup(){return!!this.group()}group(){if(this.grouped!==!1)return Ri(this.el,e=>e[this.groupedByType.name])?.use(this.groupedByType)}on(e,t){return _(this.el,e,t)}},yt=class extends z{constructor(e,t={}){super(e,t)}walker(){return se(this.el,(e,{skip:t,reject:i})=>{if(e[this.constructor.name]&&e!==this.el)return i();if(!e[this.groupOfType.name]||!e.mixins.get(this.groupOfType.name).grouped)return t()})}},G=class extends z{boot({options:e}){e({bubbles:!1}),this.initialState=this.el.value,this.getterFunc=()=>{},this.setterFunc=t=>this.initialState=t,Object.defineProperty(this.el,"value",{get:()=>this.getterFunc(),set:t=>{this.setterFunc(t)}})}initial(e){e(this.initialState)}getter(e){this.getterFunc=e}setter(e){this.setterFunc=e}dispatch(){this.el.dispatchEvent(new Event("input",{bubbles:this.options().bubbles,cancelable:!0})),this.el.dispatchEvent(new Event("change",{bubbles:this.options().bubbles,cancelable:!0}))}},ze=null;document.addEventListener("mousedown",e=>ze=e);var Yi=class extends z{boot({options:e}){e({clickOutside:!0,triggers:[]}),this.onChanges=[],this.state=!1,this.stopDialogFromFocusingTheFirstElement();let t=this.options().triggers;new MutationObserver(s=>{s.forEach(a=>{a.attributeName==="open"&&(this.el.hasAttribute("open")?this.state=!0:this.state=!1)}),this.onChanges.forEach(a=>a())}).observe(this.el,{attributeFilter:["open"]}),this.options().clickOutside&&this.el.addEventListener("click",s=>{if(s.target!==this.el){ze=null;return}ze&&$i(this.el,ze)&&$i(this.el,s)&&(this.cancel(),s.preventDefault(),s.stopPropagation()),ze=null}),this.el.hasAttribute("open")&&(this.state=!0,this.hide(),this.show())}onChange(e){this.onChanges.push(e)}show(){this.el.isConnected&&this.el.showModal()}hide(){this.el.close()}toggle(){this.state?this.hide():this.show()}cancel(){let e=new Event("cancel",{bubbles:!1,cancelable:!0});this.el.dispatchEvent(e),e.defaultPrevented||this.hide()}getState(){return this.state}setState(e){e?this.show():this.hide()}stopDialogFromFocusingTheFirstElement(){let e=document.createElement("div");e.setAttribute("data-flux-focus-placeholder",""),e.setAttribute("data-appended",""),e.setAttribute("tabindex","0"),this.el.prepend(e),this.onChange(()=>{f(e,"style",this.state?"display: none":"display: block"),this.state&&Oa()&&!this.el.hasAttribute("autofocus")&&this.el.querySelectorAll("[autofocus]").length===0&&setTimeout(()=>{this.el.setAttribute("tabindex","-1"),this.el.focus(),this.el.blur()})})}};function $i(e,t){let i=e.getBoundingClientRect(),s=t.clientX,a=t.clientY;return!(s>=i.left&&s<=i.right&&a>=i.top&&a<=i.bottom)}var Gt=class extends z{boot(){this.onCloses=[]}onClose(e){this.onCloses.push(e)}close(){this.onCloses.forEach(e=>e())}},Ua=class extends D{boot(){this.querySelectorAll("[data-appended]").forEach(n=>n.remove()),this._controllable=new G(this,{disabled:this.hasAttribute("disabled")});let e=this.button(),t=this.dialog();if(!t)return;t._dialogable=new Yi(t,{clickOutside:!this.hasAttribute("disable-click-outside")}),t._closeable=new Gt(t),t._closeable.onClose(()=>t._dialogable.hide()),this._controllable.initial(n=>n&&t._dialogable.show()),this._controllable.getter(()=>t._dialogable.getState());let i=F();this._controllable.setter(i(n=>{t._dialogable.setState(n)})),t._dialogable.onChange(i(()=>{this._controllable.dispatch()}));let s=()=>{t._dialogable.getState()?(f(this,"data-open",""),e?.setAttribute("data-open",""),f(t,"data-open","")):(k(this,"data-open"),e?.removeAttribute("data-open"),k(t,"data-open"))};t._dialogable.onChange(()=>s()),s();let{lock:a,unlock:r}=Oe();t._dialogable.onChange(()=>{t._dialogable.getState()?a():r()}),e&&_(e,"click",n=>{t._dialogable.show()})}unmount(){let{unlock:e}=Oe();this.dialog()._dialogable.getState()&&e()}button(){let e=this.querySelector("button");if(!this.dialog()?.contains(e))return e}dialog(){return this.querySelector("dialog")}showModal(){let e=this.dialog();e&&e.showModal()}};P(({css:e})=>e`dialog, ::backdrop { margin: auto; }`),C("modal",Ua);var Fa=class extends z{boot({options:e}){this.onChanges=[],this.state=!1}onChange(e){this.onChanges.push(e)}getState(){return this.state}setState(e){let t=this.state;this.state=!!e,this.state!==t&&this.onChanges.forEach(i=>i())}},Ra=class extends D{boot(){let e=this.button(),t=this.details();if(e){if(!t)return console.warn("ui-disclosure: no panel element found",this)}else return console.warn("ui-disclosure: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new G(this,{disabled:this._disabled}),t._disclosable=new Fa(t),this._controllable.initial(a=>a&&t._disclosable.setState(!0)),this._controllable.getter(()=>t._disclosable.getState()),this._controllable.setter(a=>t._disclosable.setState(a)),t._disclosable.onChange(()=>{this.dispatchEvent(new CustomEvent("lofi-disclosable-change",{bubbles:!0})),this._controllable.dispatch()});let i=()=>{t._disclosable.getState()?(f(this,"data-open",""),f(e,"data-open",""),f(t,"data-open","")):(k(this,"data-open"),k(e,"data-open"),k(t,"data-open"))};t._disclosable.onChange(()=>i()),i(),this._disabled||_(e,"click",a=>{t._disclosable.setState(!t._disclosable.getState())});let s=$(t,"disclosure");f(e,"aria-controls",s),f(e,"aria-expanded","false"),t._disclosable.onChange(()=>{t._disclosable.getState()?f(e,"aria-expanded","true"):f(e,"aria-expanded","false")}),this.hasAttribute("open")&&t._disclosable.setState(!0)}button(){return this.querySelector("button")}details(){return this.lastElementChild}},qa=class Ns extends D{boot(){this.exclusive=this.hasAttribute("exclusive"),this.exclusive&&_(this,"lofi-disclosable-change",t=>{t.stopPropagation(),t.target.localName==="ui-disclosure"&&t.target.value&&this.disclosureWalker().each(i=>{i!==t.target&&(i.value=!1)})})}disclosureWalker(){return se(this,(t,{skip:i,reject:s})=>{if(t instanceof Ns&&t!==this||t.localName!=="ui-disclosure")return s()})}};P(({css:e})=>e`ui-disclosure { display: block; }`),C("disclosure",Ra),C("disclosure-group",qa);var Va=class extends D{boot(){}},Wa=class extends D{boot(){let e=this.hasAttribute("resize")?this.getAttribute("resize"):"both",t=this.hasAttribute("shrink"),i=this.closest("ui-resizable"),s,a,r=!1;if(!i)throw"Resizable container not found";this.addEventListener("pointerdown",n=>{r||(s=i.offsetWidth,a=i.offsetHeight,r=!0);let l=n.clientX,o=n.clientY,c=parseInt(getComputedStyle(i).width,10),h=parseInt(getComputedStyle(i).height,10),b=w=>{let d=c+(w.clientX-l),u=h+(w.clientY-o);(e==="width"||e==="both")&&(t?i.style.width=`${Math.min(d,s)}px`:i.style.width=`${d}px`),(e==="height"||e==="both")&&(t?i.style.height=`${Math.min(u,a)}px`:i.style.height=`${u}px`)};document.addEventListener("pointermove",b),document.addEventListener("pointerup",()=>{this.releasePointerCapture(n.pointerId),document.removeEventListener("pointermove",b)},{once:!0}),this.setPointerCapture(n.pointerId)})}};P(({css:e})=>e`ui-resizable { display: block; }`),C("resizable",Va),C("grip",Wa);var pe=class extends yt{groupOfType=I;boot({options:e}){e({multiple:!1}),this.state=this.options().multiple?new Set:null,this.onChanges=[]}onInitAndChange(e){e(),this.onChanges.push(e)}onChange(e){this.onChanges.push(e)}changed(e,t=!1){if(e.ungrouped)return;let i=e.value,s=e.isSelected(),a=this.options().multiple;s?a?this.state.add(i):this.state=i:a?this.state.delete(i):this.state=null,t||this.onChanges.forEach(r=>r())}getState(){return this.options().multiple?Array.from(this.state):this.state}hasValue(e){return this.options().multiple?this.state.has(e):this.state===e}setState(e){(e===null||e==="")&&(e=this.options().multiple?[]:""),this.options().multiple?(Array.isArray(e)||(e=[e]),e=e.map(i=>i+"")):e=e+"",this.state=this.options().multiple?new Set(e):e;let t=this.options().multiple?e:[e];this.walker().each(i=>{let s=i.use(I);if(s.ungrouped)return;let a=t.includes(s.value);a&&!s.isSelected()?s.surgicallySelect():!a&&s.isSelected()&&s.surgicallyDeselect()}),this.onChanges.forEach(i=>i())}selected(){return this.walker().find(e=>e.use(I).isSelected()).use(I)}selecteds(){return this.walker().filter(e=>e.use(I).isSelected()).map(e=>e.use(I))}selectFirst(){this.walker().first()?.use(I).select()}selectAll(){this.walker().filter(e=>!e.use(I).isSelected()).map(e=>e.use(I).select())}deselectAll(){this.walker().filter(e=>e.use(I).isSelected()).map(e=>e.use(I).deselect())}allAreSelected(){let e=this.walker().filter(t=>!0);return e.length>0&&this.walker().filter(t=>t.use(I).isSelected()).length===e.length}noneAreSelected(){return this.state===null||this.state?.size===0}selectableByValue(e){return this.walker().find(t=>t.use(I).value===e)?.use(I)}deselectOthers(e){this.walker().each(t=>{t!==e&&t.use(I).surgicallyDeselect()})}selectedTextValue(){return this.options().multiple?Array.from(this.state).map(e=>this.convertValueStringToElementText(e)).join(", "):this.convertValueStringToElementText(this.state)}convertValueStringToElementText(e){let t=this.findByValue(e);return t?t.label||t.value:e}findByValue(e){return this.selecteds().find(t=>t.value===e)}walker(){return se(this.el,(e,{skip:t,reject:i})=>{if(e[this.constructor.name]&&e!==this.el)return i();if(!e[this.groupOfType.name]||e.mixins.get(this.groupOfType.name).ungrouped)return t()})}},I=class extends z{boot({options:e}){this.groupedByType=pe,e({ungrouped:!1,togglable:!1,value:void 0,label:void 0,selectedInitially:!1,dataAttr:"data-selected",ariaAttr:"aria-selected"}),this.ungrouped=this.options().ungrouped,this.value=this.options().value===void 0?this.el.value:this.options().value,this.value=this.value+"",this.label=this.options().label;let t=this.options().selectedInitially;this.onSelects=[],this.onUnselects=[],this.onChanges=[];let i=()=>{this.group()&&this.group().hasValue(this.value)&&(t=!0),this.multiple=this.hasGroup()?this.group().options().multiple:!1,this.toggleable=this.options().toggleable||this.multiple,t?this.select(!0):(this.state=t,this.surgicallyDeselect(!0))};i(),!this.hasGroup()&&!this.el.isConnected&&queueMicrotask(()=>{this.hasGroup()&&i()})}mount(){this.el.hasAttribute(this.options().ariaAttr)||f(this.el,this.options().ariaAttr,"false")}onInitAndChange(e){e(),this.onChanges.push(e)}onChange(e){this.onChanges.push(e)}onSelect(e){this.onSelects.push(e)}onUnselect(e){this.onUnselects.push(e)}setState(e){e?this.select():this.deselect()}getState(){return this.state}press(){this.toggleable?this.toggle():this.select()}trigger(){this.toggleable?this.toggle():this.select()}toggle(){this.isSelected()?this.deselect():this.select()}isSelected(){return this.state}select(e=!1){let t=!this.isSelected();this.toggleable||this.group()?.deselectOthers(this.el),this.state=!0,f(this.el,this.options().ariaAttr,"true"),f(this.el,this.options().dataAttr,""),t&&(e||(this.onSelects.forEach(i=>i()),this.onChanges.forEach(i=>i())),this.group()?.changed(this,e))}surgicallySelect(){let e=!this.isSelected();this.state=!0,f(this.el,this.options().ariaAttr,"true"),f(this.el,this.options().dataAttr,""),e&&(this.onSelects.forEach(t=>t()),this.onChanges.forEach(t=>t()))}deselect(e=!0){let t=this.isSelected();this.state=!1,f(this.el,this.options().ariaAttr,"false"),k(this.el,this.options().dataAttr),t&&(this.onUnselects.forEach(i=>i()),this.onChanges.forEach(i=>i()),e&&this.group()?.changed(this))}surgicallyDeselect(e=!1){let t=this.isSelected();this.state=!1,f(this.el,this.options().ariaAttr,"false"),k(this.el,this.options().dataAttr),t&&!e&&(this.onUnselects.forEach(i=>i()),this.onChanges.forEach(i=>i()))}getValue(){return this.value}getLabel(){return this.label}},q=class extends z{boot({options:e}){e({disableWithParent:!0}),this.onChanges=[],Object.defineProperty(this.el,"disabled",{get:()=>this.el.hasAttribute("disabled"),set:i=>{i?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}}),this.el.hasAttribute("disabled")?this.el.disabled=!0:this.options().disableWithParent&&this.el.closest("[disabled]")&&(this.el.disabled=!0),new MutationObserver(i=>{this.onChanges.forEach(s=>s(this.el.disabled))}).observe(this.el,{attributeFilter:["disabled"]})}onChange(e){this.onChanges.push(e)}onInitAndChange(e){e(this.el.disabled),this.onChanges.push(e)}enabled(e){return(...t)=>{if(!this.el.disabled)return e(...t)}}disabled(e){return(...t)=>{if(this.el.disabled)return e(...t)}}isDisabled(){return this.el.disabled}},Se=class extends z{boot({options:e}){e({name:void 0,value:void 0,includeWhenEmpty:!0,shouldUpdateValue:!0}),this.name=this.options().name,this.value=this.options().value===void 0?this.el.value:this.options().value,this.state=!1,this.observer=new MutationObserver(()=>{this.renderHiddenInputs()}),this.observer.observe(this.el,{childList:!0})}mount(){this.renderHiddenInputs()}update(e){this.options().shouldUpdateValue?this.value=e:this.state=!!e,this.renderHiddenInputs()}valueIsEmpty(){return this.value===void 0||this.value===null||this.value===""}renderHiddenInputs(){if(this.observer.disconnect(),!this.name)return;let e=this.el.children,t=[];for(let s=0;s<e.length;s++){let a=e[s];a.hasAttribute("data-flux-hidden")&&t.push(a)}t.forEach(s=>s.remove());let i;this.options().shouldUpdateValue?i=!this.valueIsEmpty()||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[]:i=this.state||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[],i.forEach(s=>{this.el.append(s)}),this.observer.observe(this.el,{childList:!0})}generateInputs(e,t,i=[]){if(this.isObjectOrArray(t))for(let s in t)i=i.concat(this.generateInputs(`${e}[${s}]`,t[s]));else{let s=document.createElement("input");return s.setAttribute("type","hidden"),s.setAttribute("name",e),s.setAttribute("value",t===null?"":""+t),s.setAttribute("data-flux-hidden",""),s.setAttribute("data-appended",""),[s]}return i}isObjectOrArray(e){return typeof e=="object"&&e!==null}},Ha=class Us extends ae{boot(){this._disableable=new q(this);let t=[];this._disableable.onInitAndChange(i=>{i?this.walker().each(s=>{s.hasAttribute("disabled")||(s.setAttribute("disabled",""),t.push(()=>s.removeAttribute("disabled")))}):(t.forEach(s=>s()),t=[])}),this._selectable=new pe(this,{multiple:!0}),this._controllable=new G(this,{disabled:this._disabled,bubbles:!0}),this.walker().each(i=>{i.addEventListener("input",s=>s.stopPropagation()),i.addEventListener("change",s=>s.stopPropagation())}),this._submittable=new Se(this,{name:this.getAttribute("name"),value:this.getAttribute("value"),includeWhenEmpty:!1}),this._controllable.initial(i=>i&&this._selectable.setState(i)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=F(),this._controllable.setter(this._detangled(i=>{this._selectable.setState(i)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),f(this,"role","group"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}initCheckAll(t){let i=F();t._selectable.onChange(i(()=>{t.indeterminate?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):t.checked?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):(this._selectable.deselectAll(),t.checked=!1,t.indeterminate=!1)}));let s=()=>{this._selectable.allAreSelected()?(t.indeterminate=!1,t._selectable.select()):this._selectable.noneAreSelected()?(t.indeterminate=!1,t._selectable.deselect()):t.indeterminate=!0};this._selectable.onChange(i(()=>{s()})),s()}walker(){return se(this,(t,{skip:i,reject:s})=>{if(t instanceof Us)return s();if(t.localName!=="ui-checkbox")return i()})}},Ba=class extends ae{boot(){let e=this;this.isIndeterminate=!1,this._disableable=new q(this),this.hasAttribute("all")?(this._selectable=new I(e,{ungrouped:!0,toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),queueMicrotask(()=>{this.closest("ui-checkbox-group")?.initCheckAll(this)})):(this._selectable=new I(e,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new Se(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this._selectable.onChange(()=>{this.indeterminate&&(this.indeterminate=!1)}),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.isSelected())}),this.value=this._selectable.getValue(),queueMicrotask(()=>{this._submittable.update(this._selectable.isSelected())})),this._detangled=F(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))})),f(e,"role","checkbox"),this._disableable.onInitAndChange(t=>{t?k(e,"tabindex","0"):f(e,"tabindex","0")}),_(e,"click",this._disableable.disabled(t=>{t.preventDefault(),t.stopPropagation()}),{capture:!0}),_(e,"click",this._disableable.enabled(t=>{this._selectable.press()})),_(e,"keydown",this._disableable.enabled(t=>{t.key==="Enter"&&(this._selectable.press(),t.preventDefault(),t.stopPropagation())})),_(e,"keydown",this._disableable.enabled(t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())})),_(e,"keyup",this._disableable.enabled(t=>{t.key===" "&&(this._selectable.press(),t.preventDefault(),t.stopPropagation())})),Ya(e)}get checked(){return this._selectable.isSelected()}set checked(e){let t=this.closest("ui-checkbox-group")?._detangled||(i=>i);this._detangled(t(()=>{e?this._selectable.select():this._selectable.deselect()}))()}get indeterminate(){return this.isIndeterminate}set indeterminate(e){this.isIndeterminate=!!e,this.isIndeterminate?f(this,"data-indeterminate",""):k(this,"data-indeterminate")}};C("checkbox-group",Ha),C("checkbox",Ba),P(({css:e})=>e`ui-checkbox-group { display: block; }`),P(({css:e})=>e`ui-checkbox { display: inline-block; user-select: none; }`);function Ya(e){e.closest("label")?.addEventListener("click",t=>{e.contains(t.target)||e._selectable.press()})}var he=new Map,_e=class extends z{boot({options:e}){e({triggers:[],scope:null});let t=this.options().scope||"global";f(this.el,"popover","manual"),this.triggers=this.options().triggers,this.onChanges=[],this.state=!1,_(this.el,"beforetoggle",i=>{let s=this.state;if(this.state=i.newState==="open",this.state){$a(this.el,t);let a=new AbortController,r=document.activeElement,n=[...this.triggers,r];setTimeout(()=>{za(this.el,n,a),Ga(this.el,n,a),ja(this.el,n,a)}),this.el.addEventListener("beforetoggle",l=>{l.newState==="closed"&&(a.abort(),r?.focus())},{signal:a.signal})}s!==this.state&&this.onChanges.forEach(a=>a(this.state,s))}),_(this.el,"toggle",i=>{if(i.newState==="open")he.has(t)||he.set(t,new Set),he.get(t).add(this.el);else if(i.newState==="closed"){if(!he.has(t))return;he.get(t).delete(this.el),he.get(t).size===0&&he.delete(t)}})}onChange(e){this.onChanges.push(e)}setState(e){e?this.show():this.hide()}getState(){return this.state}toggle(){this.el.togglePopover()}show(){this.el.showPopover()}hide(){this.el.hidePopover()}};function $a(e,t){he.has(t)&&he.get(t).forEach(i=>{e.contains(i)||i.contains(e)||i.hidePopover()})}function za(e,t,i){document.addEventListener("click",s=>{e.contains(s.target)||t.includes(s.target)||e.hidePopover()},{signal:i.signal})}function Ga(e,t,i){document.addEventListener("focusin",s=>{e.contains(s.target)||t.includes(s.target)||(i.abort(),e.hidePopover())},{capture:!0,signal:i.signal})}function ja(e,t,i){document.addEventListener("keydown",s=>{s.key==="Escape"&&e.hidePopover()},{signal:i.signal})}var Ne=Math.min,j=Math.max,wt=Math.round,xt=Math.floor,re=e=>({x:e,y:e}),Xa={left:"right",right:"left",bottom:"top",top:"bottom"},Ka={start:"end",end:"start"};function zi(e,t,i){return j(e,Ne(t,i))}function Ge(e,t){return typeof e=="function"?e(t):e}function be(e){return e.split("-")[0]}function je(e){return e.split("-")[1]}function Gi(e){return e==="x"?"y":"x"}function ji(e){return e==="y"?"height":"width"}function ke(e){return["top","bottom"].includes(be(e))?"y":"x"}function Xi(e){return Gi(ke(e))}function Ja(e,t,i){i===void 0&&(i=!1);let s=je(e),a=Xi(e),r=ji(a),n=a==="x"?s===(i?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(n=At(n)),[n,At(n)]}function Za(e){let t=At(e);return[jt(e),t,jt(t)]}function jt(e){return e.replace(/start|end/g,t=>Ka[t])}function Qa(e,t,i){let s=["left","right"],a=["right","left"],r=["top","bottom"],n=["bottom","top"];switch(e){case"top":case"bottom":return i?t?a:s:t?s:a;case"left":case"right":return t?r:n;default:return[]}}function er(e,t,i,s){let a=je(e),r=Qa(be(e),i==="start",s);return a&&(r=r.map(n=>n+"-"+a),t&&(r=r.concat(r.map(jt)))),r}function At(e){return e.replace(/left|right|bottom|top/g,t=>Xa[t])}function tr(e){return{top:0,right:0,bottom:0,left:0,...e}}function ir(e){return typeof e!="number"?tr(e):{top:e,right:e,bottom:e,left:e}}function St(e){let{x:t,y:i,width:s,height:a}=e;return{width:s,height:a,top:i,left:t,right:t+s,bottom:i+a,x:t,y:i}}function Ki(e,t,i){let{reference:s,floating:a}=e,r=ke(t),n=Xi(t),l=ji(n),o=be(t),c=r==="y",h=s.x+s.width/2-a.width/2,b=s.y+s.height/2-a.height/2,w=s[l]/2-a[l]/2,d;switch(o){case"top":d={x:h,y:s.y-a.height};break;case"bottom":d={x:h,y:s.y+s.height};break;case"right":d={x:s.x+s.width,y:b};break;case"left":d={x:s.x-a.width,y:b};break;default:d={x:s.x,y:s.y}}switch(je(t)){case"start":d[n]-=w*(i&&c?-1:1);break;case"end":d[n]+=w*(i&&c?-1:1);break}return d}var sr=async(e,t,i)=>{let{placement:s="bottom",strategy:a="absolute",middleware:r=[],platform:n}=i,l=r.filter(Boolean),o=await(n.isRTL==null?void 0:n.isRTL(t)),c=await n.getElementRects({reference:e,floating:t,strategy:a}),{x:h,y:b}=Ki(c,s,o),w=s,d={},u=0;for(let x=0;x<l.length;x++){let{name:y,fn:p}=l[x],{x:m,y:v,data:A,reset:S}=await p({x:h,y:b,initialPlacement:s,placement:w,strategy:a,middlewareData:d,rects:c,platform:n,elements:{reference:e,floating:t}});h=m??h,b=v??b,d={...d,[y]:{...d[y],...A}},S&&u<=50&&(u++,typeof S=="object"&&(S.placement&&(w=S.placement),S.rects&&(c=S.rects===!0?await n.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:h,y:b}=Ki(c,w,o)),x=-1)}return{x:h,y:b,placement:w,strategy:a,middlewareData:d}};async function Xt(e,t){var i;t===void 0&&(t={});let{x:s,y:a,platform:r,rects:n,elements:l,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:b="floating",altBoundary:w=!1,padding:d=0}=Ge(t,e),u=ir(d),y=l[w?b==="floating"?"reference":"floating":b],p=St(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(y)))==null||i?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:c,rootBoundary:h,strategy:o})),m=b==="floating"?{x:s,y:a,width:n.floating.width,height:n.floating.height}:n.reference,v=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),A=await(r.isElement==null?void 0:r.isElement(v))?await(r.getScale==null?void 0:r.getScale(v))||{x:1,y:1}:{x:1,y:1},S=St(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:m,offsetParent:v,strategy:o}):m);return{top:(p.top-S.top+u.top)/A.y,bottom:(S.bottom-p.bottom+u.bottom)/A.y,left:(p.left-S.left+u.left)/A.x,right:(S.right-p.right+u.right)/A.x}}var ar=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,s;let{placement:a,middlewareData:r,rects:n,initialPlacement:l,platform:o,elements:c}=t,{mainAxis:h=!0,crossAxis:b=!0,fallbackPlacements:w,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:u="none",flipAlignment:x=!0,...y}=Ge(e,t);if((i=r.arrow)!=null&&i.alignmentOffset)return{};let p=be(a),m=ke(l),v=be(l)===l,A=await(o.isRTL==null?void 0:o.isRTL(c.floating)),S=w||(v||!x?[At(l)]:Za(l)),E=u!=="none";!w&&E&&S.push(...er(l,x,u,A));let M=[l,...S],U=await Xt(t,y),L=[],W=((s=r.flip)==null?void 0:s.overflows)||[];if(h&&L.push(U[p]),b){let N=Ja(a,n,A);L.push(U[N[0]],U[N[1]])}if(W=[...W,{placement:a,overflows:L}],!L.every(N=>N<=0)){var Q,O;let N=(((Q=r.flip)==null?void 0:Q.index)||0)+1,B=M[N];if(B)return{data:{index:N,overflows:W},reset:{placement:B}};let ve=(O=W.filter(de=>de.overflows[0]<=0).sort((de,H)=>de.overflows[1]-H.overflows[1])[0])==null?void 0:O.placement;if(!ve)switch(d){case"bestFit":{var ee;let de=(ee=W.filter(H=>{if(E){let Y=ke(H.placement);return Y===m||Y==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(Y=>Y>0).reduce((Y,so)=>Y+so,0)]).sort((H,Y)=>H[1]-Y[1])[0])==null?void 0:ee[0];de&&(ve=de);break}case"initialPlacement":ve=l;break}if(a!==ve)return{reset:{placement:ve}}}return{}}}};async function rr(e,t){let{placement:i,platform:s,elements:a}=e,r=await(s.isRTL==null?void 0:s.isRTL(a.floating)),n=be(i),l=je(i),o=ke(i)==="y",c=["left","top"].includes(n)?-1:1,h=r&&o?-1:1,b=Ge(t,e),{mainAxis:w,crossAxis:d,alignmentAxis:u}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return l&&typeof u=="number"&&(d=l==="end"?u*-1:u),o?{x:d*h,y:w*c}:{x:w*c,y:d*h}}var nr=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,s;let{x:a,y:r,placement:n,middlewareData:l}=t,o=await rr(t,e);return n===((i=l.offset)==null?void 0:i.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+o.x,y:r+o.y,data:{...o,placement:n}}}}},or=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:i,y:s,placement:a}=t,{mainAxis:r=!0,crossAxis:n=!1,limiter:l={fn:y=>{let{x:p,y:m}=y;return{x:p,y:m}}},...o}=Ge(e,t),c={x:i,y:s},h=await Xt(t,o),b=ke(be(a)),w=Gi(b),d=c[w],u=c[b];if(r){let y=w==="y"?"top":"left",p=w==="y"?"bottom":"right",m=d+h[y],v=d-h[p];d=zi(m,d,v)}if(n){let y=b==="y"?"top":"left",p=b==="y"?"bottom":"right",m=u+h[y],v=u-h[p];u=zi(m,u,v)}let x=l.fn({...t,[w]:d,[b]:u});return{...x,data:{x:x.x-i,y:x.y-s,enabled:{[w]:r,[b]:n}}}}}},lr=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var i,s;let{placement:a,rects:r,platform:n,elements:l}=t,{apply:o=()=>{},...c}=Ge(e,t),h=await Xt(t,c),b=be(a),w=je(a),d=ke(a)==="y",{width:u,height:x}=r.floating,y,p;b==="top"||b==="bottom"?(y=b,p=w===(await(n.isRTL==null?void 0:n.isRTL(l.floating))?"start":"end")?"left":"right"):(p=b,y=w==="end"?"top":"bottom");let m=x-h.top-h.bottom,v=u-h.left-h.right,A=Ne(x-h[y],m),S=Ne(u-h[p],v),E=!t.middlewareData.shift,M=A,U=S;if((i=t.middlewareData.shift)!=null&&i.enabled.x&&(U=v),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(M=m),E&&!w){let W=j(h.left,0),Q=j(h.right,0),O=j(h.top,0),ee=j(h.bottom,0);d?U=u-2*(W!==0||Q!==0?W+Q:j(h.left,h.right)):M=x-2*(O!==0||ee!==0?O+ee:j(h.top,h.bottom))}await o({...t,availableWidth:U,availableHeight:M});let L=await n.getDimensions(l.floating);return u!==L.width||x!==L.height?{reset:{rects:!0}}:{}}}};function _t(){return typeof window<"u"}function Ue(e){return Ji(e)?(e.nodeName||"").toLowerCase():"#document"}function X(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ne(e){var t;return(t=(Ji(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ji(e){return _t()?e instanceof Node||e instanceof X(e).Node:!1}function te(e){return _t()?e instanceof Element||e instanceof X(e).Element:!1}function oe(e){return _t()?e instanceof HTMLElement||e instanceof X(e).HTMLElement:!1}function Zi(e){return!_t()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof X(e).ShadowRoot}function Xe(e){let{overflow:t,overflowX:i,overflowY:s,display:a}=ie(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+i)&&!["inline","contents"].includes(a)}function ur(e){return["table","td","th"].includes(Ue(e))}function kt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Kt(e){let t=Jt(),i=te(e)?ie(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>i[s]?i[s]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(i.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(i.contain||"").includes(s))}function cr(e){let t=ge(e);for(;oe(t)&&!Fe(t);){if(Kt(t))return t;if(kt(t))return null;t=ge(t)}return null}function Jt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fe(e){return["html","body","#document"].includes(Ue(e))}function ie(e){return X(e).getComputedStyle(e)}function Et(e){return te(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ge(e){if(Ue(e)==="html")return e;let t=e.assignedSlot||e.parentNode||Zi(e)&&e.host||ne(e);return Zi(t)?t.host:t}function Qi(e){let t=ge(e);return Fe(t)?e.ownerDocument?e.ownerDocument.body:e.body:oe(t)&&Xe(t)?t:Qi(t)}function Ke(e,t,i){var s;t===void 0&&(t=[]),i===void 0&&(i=!0);let a=Qi(e),r=a===((s=e.ownerDocument)==null?void 0:s.body),n=X(a);if(r){let l=Zt(n);return t.concat(n,n.visualViewport||[],Xe(a)?a:[],l&&i?Ke(l):[])}return t.concat(a,Ke(a,[],i))}function Zt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function es(e){let t=ie(e),i=parseFloat(t.width)||0,s=parseFloat(t.height)||0,a=oe(e),r=a?e.offsetWidth:i,n=a?e.offsetHeight:s,l=wt(i)!==r||wt(s)!==n;return l&&(i=r,s=n),{width:i,height:s,$:l}}function Qt(e){return te(e)?e:e.contextElement}function Re(e){let t=Qt(e);if(!oe(t))return re(1);let i=t.getBoundingClientRect(),{width:s,height:a,$:r}=es(t),n=(r?wt(i.width):i.width)/s,l=(r?wt(i.height):i.height)/a;return(!n||!Number.isFinite(n))&&(n=1),(!l||!Number.isFinite(l))&&(l=1),{x:n,y:l}}var hr=re(0);function ts(e){let t=X(e);return!Jt()||!t.visualViewport?hr:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dr(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==X(e)?!1:t}function Ee(e,t,i,s){t===void 0&&(t=!1),i===void 0&&(i=!1);let a=e.getBoundingClientRect(),r=Qt(e),n=re(1);t&&(s?te(s)&&(n=Re(s)):n=Re(e));let l=dr(r,i,s)?ts(r):re(0),o=(a.left+l.x)/n.x,c=(a.top+l.y)/n.y,h=a.width/n.x,b=a.height/n.y;if(r){let w=X(r),d=s&&te(s)?X(s):s,u=w,x=Zt(u);for(;x&&s&&d!==u;){let y=Re(x),p=x.getBoundingClientRect(),m=ie(x),v=p.left+(x.clientLeft+parseFloat(m.paddingLeft))*y.x,A=p.top+(x.clientTop+parseFloat(m.paddingTop))*y.y;o*=y.x,c*=y.y,h*=y.x,b*=y.y,o+=v,c+=A,u=X(x),x=Zt(u)}}return St({width:h,height:b,x:o,y:c})}function ei(e,t){let i=Et(e).scrollLeft;return t?t.left+i:Ee(ne(e)).left+i}function is(e,t,i){i===void 0&&(i=!1);let s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(i?0:ei(e,s)),r=s.top+t.scrollTop;return{x:a,y:r}}function fr(e){let{elements:t,rect:i,offsetParent:s,strategy:a}=e,r=a==="fixed",n=ne(s),l=t?kt(t.floating):!1;if(s===n||l&&r)return i;let o={scrollLeft:0,scrollTop:0},c=re(1),h=re(0),b=oe(s);if((b||!b&&!r)&&((Ue(s)!=="body"||Xe(n))&&(o=Et(s)),oe(s))){let d=Ee(s);c=Re(s),h.x=d.x+s.clientLeft,h.y=d.y+s.clientTop}let w=n&&!b&&!r?is(n,o,!0):re(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-o.scrollLeft*c.x+h.x+w.x,y:i.y*c.y-o.scrollTop*c.y+h.y+w.y}}function pr(e){return Array.from(e.getClientRects())}function br(e){let t=ne(e),i=Et(e),s=e.ownerDocument.body,a=j(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=j(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),n=-i.scrollLeft+ei(e),l=-i.scrollTop;return ie(s).direction==="rtl"&&(n+=j(t.clientWidth,s.clientWidth)-a),{width:a,height:r,x:n,y:l}}function gr(e,t){let i=X(e),s=ne(e),a=i.visualViewport,r=s.clientWidth,n=s.clientHeight,l=0,o=0;if(a){r=a.width,n=a.height;let c=Jt();(!c||c&&t==="fixed")&&(l=a.offsetLeft,o=a.offsetTop)}return{width:r,height:n,x:l,y:o}}function mr(e,t){let i=Ee(e,!0,t==="fixed"),s=i.top+e.clientTop,a=i.left+e.clientLeft,r=oe(e)?Re(e):re(1),n=e.clientWidth*r.x,l=e.clientHeight*r.y,o=a*r.x,c=s*r.y;return{width:n,height:l,x:o,y:c}}function ss(e,t,i){let s;if(t==="viewport")s=gr(e,i);else if(t==="document")s=br(ne(e));else if(te(t))s=mr(t,i);else{let a=ts(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return St(s)}function as(e,t){let i=ge(e);return i===t||!te(i)||Fe(i)?!1:ie(i).position==="fixed"||as(i,t)}function vr(e,t){let i=t.get(e);if(i)return i;let s=Ke(e,[],!1).filter(l=>te(l)&&Ue(l)!=="body"),a=null,r=ie(e).position==="fixed",n=r?ge(e):e;for(;te(n)&&!Fe(n);){let l=ie(n),o=Kt(n);!o&&l.position==="fixed"&&(a=null),(r?!o&&!a:!o&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Xe(n)&&!o&&as(e,n))?s=s.filter(h=>h!==n):a=l,n=ge(n)}return t.set(e,s),s}function yr(e){let{element:t,boundary:i,rootBoundary:s,strategy:a}=e,n=[...i==="clippingAncestors"?kt(t)?[]:vr(t,this._c):[].concat(i),s],l=n[0],o=n.reduce((c,h)=>{let b=ss(t,h,a);return c.top=j(b.top,c.top),c.right=Ne(b.right,c.right),c.bottom=Ne(b.bottom,c.bottom),c.left=j(b.left,c.left),c},ss(t,l,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function wr(e){let{width:t,height:i}=es(e);return{width:t,height:i}}function xr(e,t,i){let s=oe(t),a=ne(t),r=i==="fixed",n=Ee(e,!0,r,t),l={scrollLeft:0,scrollTop:0},o=re(0);if(s||!s&&!r)if((Ue(t)!=="body"||Xe(a))&&(l=Et(t)),s){let w=Ee(t,!0,r,t);o.x=w.x+t.clientLeft,o.y=w.y+t.clientTop}else a&&(o.x=ei(a));let c=a&&!s&&!r?is(a,l):re(0),h=n.left+l.scrollLeft-o.x-c.x,b=n.top+l.scrollTop-o.y-c.y;return{x:h,y:b,width:n.width,height:n.height}}function ti(e){return ie(e).position==="static"}function rs(e,t){if(!oe(e)||ie(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return ne(e)===i&&(i=i.ownerDocument.body),i}function ns(e,t){let i=X(e);if(kt(e))return i;if(!oe(e)){let a=ge(e);for(;a&&!Fe(a);){if(te(a)&&!ti(a))return a;a=ge(a)}return i}let s=rs(e,t);for(;s&&ur(s)&&ti(s);)s=rs(s,t);return s&&Fe(s)&&ti(s)&&!Kt(s)?i:s||cr(e)||i}var Ar=async function(e){let t=this.getOffsetParent||ns,i=this.getDimensions,s=await i(e.floating);return{reference:xr(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Sr(e){return ie(e).direction==="rtl"}var _r={convertOffsetParentRelativeRectToViewportRelativeRect:fr,getDocumentElement:ne,getClippingRect:yr,getOffsetParent:ns,getElementRects:Ar,getClientRects:pr,getDimensions:wr,getScale:Re,isElement:te,isRTL:Sr};function os(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function kr(e,t){let i=null,s,a=ne(e);function r(){var l;clearTimeout(s),(l=i)==null||l.disconnect(),i=null}function n(l,o){l===void 0&&(l=!1),o===void 0&&(o=1),r();let c=e.getBoundingClientRect(),{left:h,top:b,width:w,height:d}=c;if(l||t(),!w||!d)return;let u=xt(b),x=xt(a.clientWidth-(h+w)),y=xt(a.clientHeight-(b+d)),p=xt(h),v={rootMargin:-u+"px "+-x+"px "+-y+"px "+-p+"px",threshold:j(0,Ne(1,o))||1},A=!0;function S(E){let M=E[0].intersectionRatio;if(M!==o){if(!A)return n();M?n(!1,M):s=setTimeout(()=>{n(!1,1e-7)},1e3)}M===1&&!os(c,e.getBoundingClientRect())&&n(),A=!1}try{i=new IntersectionObserver(S,{...v,root:a.ownerDocument})}catch{i=new IntersectionObserver(S,v)}i.observe(e)}return n(!0),r}function Er(e,t,i,s){s===void 0&&(s={});let{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:n=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:o=!1}=s,c=Qt(e),h=a||r?[...c?Ke(c):[],...Ke(t)]:[];h.forEach(p=>{a&&p.addEventListener("scroll",i,{passive:!0}),r&&p.addEventListener("resize",i)});let b=c&&l?kr(c,i):null,w=-1,d=null;n&&(d=new ResizeObserver(p=>{let[m]=p;m&&m.target===c&&d&&(d.unobserve(t),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var v;(v=d)==null||v.observe(t)})),i()}),c&&!o&&d.observe(c),d.observe(t));let u,x=o?Ee(e):null;o&&y();function y(){let p=Ee(e);x&&!os(x,p)&&i(),x=p,u=requestAnimationFrame(y)}return i(),()=>{var p;h.forEach(m=>{a&&m.removeEventListener("scroll",i),r&&m.removeEventListener("resize",i)}),b?.(),(p=d)==null||p.disconnect(),d=null,o&&cancelAnimationFrame(u)}}var Cr=nr,Dr=or,Tr=ar,Mr=lr,Ir=(e,t,i)=>{let s=new Map,a={platform:_r,...i},r={...a.platform,_c:s};return sr(e,t,{...a,platform:r})},me=class extends z{boot({options:e}){if(e({reference:null,auto:!0,position:"bottom start",gap:"5",offset:"0",matchWidth:!1,crossAxis:!1,scrollY:!0}),this.options().reference===null||this.options().position===null)return;let[t,i]=Or(this.el,{scrollY:this.options().scrollY}),s=Pr(this.el,this.options().reference,t,{position:this.options().position,gap:this.options().gap,offset:this.options().offset,matchWidth:this.options().matchWidth,crossAxis:this.options().crossAxis,scrollY:this.options().scrollY}),a=()=>{};this.reposition=(...r)=>{this.options().auto?a=Er(this.options().reference,this.el,s):s(null,...r)},this.cleanup=()=>{a(),i()}}};function Pr(e,t,i,{position:s,offset:a,gap:r,matchWidth:n,crossAxis:l,scrollY:o}){let c=window.getComputedStyle(e).maxHeight;return c=c==="none"?null:parseFloat(c),(h,b,w)=>{Ir(t,e,{placement:Lr(s),middleware:[Cr({mainAxis:Number(r),alignmentAxis:Number(a)}),Tr(),Dr({padding:5,crossAxis:l}),Mr({padding:5,apply({rects:d,elements:u,availableHeight:x}){n&&Object.assign(u.floating.style,{width:`${d.reference.width}px`});let y=c;y===null&&(y=o?u.floating.scrollHeight:u.floating.offsetHeight),u.floating.style.maxHeight=x>y?"":`${x}px`}})]}).then(({x:d,y:u})=>{i(b||d,w||u)})}}function Lr(e){let t=e.split(" ");switch(t[0]){case"start":t[0]=zt()?"right":"left";break;case"end":t[0]=zt()?"left":"right";break}return t.join("-")}function Or(e,{scrollY:t=!0}){let i=(n,l)=>{Object.assign(e.style,{position:"absolute",overflowY:t?"auto":"hidden",left:`${n}px`,top:`${l}px`,right:"auto",bottom:"auto"})},s,a,r=new MutationObserver(()=>i(s,a));return[(n,l)=>{s=n,a=l,r.disconnect(),i(s,a),r.observe(e,{attributeFilter:["style"]})},()=>{r.disconnect()}]}var Nr=class extends D{boot(){let e=this.trigger(),t=this.overlay();if(e){if(!t)return console.warn("ui-dropdown: no [popover] overlay found",this)}else return console.warn("ui-dropdown: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new G(this),t._popoverable=new _e(t),t._anchorable=new me(t,{reference:e,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),t._popoverable.onChange(()=>{t._popoverable.getState()?t._anchorable.reposition():t._anchorable.cleanup()});let{lock:i,unlock:s}=Oe(t._popoverable.el);t._popoverable.onChange(()=>{t._popoverable.getState()?i():s()}),this._controllable.initial(n=>t._popoverable.setState(n)),this._controllable.getter(()=>t._popoverable.getState());let a=F();this._controllable.setter(n=>t._popoverable.setState(n)),t._popoverable.onChange(a(()=>this._controllable.dispatch())),this.hasAttribute("hover")&&Yt(e,t,{gain(){t._popoverable.setState(!0)},lose(){t._popoverable.setState(!1)},focusable:!1}),_(e,"click",()=>t._popoverable.toggle()),t._popoverable.getState()?(f(this,"data-open",""),f(e,"data-open",""),f(t,"data-open","")):(k(this,"data-open"),k(e,"data-open"),k(t,"data-open")),t._popoverable.onChange(()=>{t._popoverable.getState()?(f(this,"data-open",""),f(e,"data-open",""),f(t,"data-open","")):(k(this,"data-open"),k(e,"data-open"),k(t,"data-open"))});let r=$(t,"dropdown");f(e,"aria-haspopup","true"),f(e,"aria-controls",r),f(e,"aria-expanded",t._popoverable.getState()?"true":"false"),t._popoverable.onChange(()=>{f(e,"aria-expanded",t._popoverable.getState()?"true":"false")}),t._popoverable.onChange(()=>{setTimeout(()=>t._popoverable.getState()?t.onPopoverShow?.():t.onPopoverHide?.())})}trigger(){return this.querySelector("button")}overlay(){return this.lastElementChild?.matches("[popover]")&&this.lastElementChild}};C("dropdown",Nr);var g=class le{constructor(t,i,s=1){this._date=new Date(Date.UTC(t,i-1,s))}isBetween(t,i){return!t&&!i?!0:t?i?this._date>=t._date&&this._date<=i._date:this._date>=t._date:this._date<=i._date}isSameDay(t){return t?this._date.getUTCDate()===t._date.getUTCDate()&&this._date.getUTCMonth()===t._date.getUTCMonth()&&this._date.getUTCFullYear()===t._date.getUTCFullYear():!1}isBefore(t){return t?this._date<t._date:!1}isAfter(t){return t?this._date>t._date:!1}incrementDays(t){let i=this.getCopy();return i._date.setUTCDate(i._date.getUTCDate()+t),i}addMonths(t){let i=this.getCopy();return i._date.setUTCMonth(i._date.getUTCMonth()+t),i}addDays(t){let i=this.getCopy();return i._date.setUTCDate(i._date.getUTCDate()+t),i}getYear(){return this._date.getUTCFullYear()}getMonth(){return this._date.getUTCMonth()+1}getPaddedMonth(){return String(this.getMonth()).padStart(2,"0")}getDay(){return this._date.getUTCDate()}getPaddedDay(){return String(this.getDay()).padStart(2,"0")}getDate(){return this._date}getCopy(){return new le(this.getYear(),this.getMonth(),this.getDay())}getDayOfWeek(){return this._date.getUTCDay()}getDaysInMonth(){return new le(this.getYear(),this.getMonth()+1,0).getDay()}getFirstDayOfMonth(){return new le(this.getYear(),this.getMonth(),1).getDayOfWeek()}getWeekNumber(){let t=new Date(Date.UTC(this._date.getUTCFullYear(),0,1)),i=new Date(t);i.setUTCDate(1+(11-t.getUTCDay())%7);let s=new Date(this._date);return s.setUTCDate(this._date.getUTCDate()+(11-this._date.getUTCDay())%7),Math.floor((s.getTime()-i.getTime())/(7*24*60*60*1e3))+1}setDay(t){this._date.setUTCDate(t)}setMonth(t){this._date.setUTCMonth(t-1)}setYear(t){this._date.setUTCFullYear(t)}static fromIsoDateString(t){if(!t)return null;let[i,s,a]=t.split("T")[0]?.split("-")?.map(Number);return new le(i,s,a)}static fromLocalDate(t){return t?new le(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()):null}static fromDate(t){return t?new le(t.getFullYear(),t.getMonth()+1,t.getDate()):null}static fromParts(t,i,s){return new le(t,i,s)}static today(){return le.fromDate(new Date)}static firstDayOfMonth(t){return new le(t.getYear(),t.getMonth(),1)}toIsoDateString(){return[this.getYear(),this.getPaddedMonth(),this.getPaddedDay()].join("-")}toParts(){return[this.getYear(),this.getMonth(),this.getDay()]}toDate(){return new Date(this.getYear(),this.getMonth()-1,this.getDay())}toFormattedString(t,i){return this.toDate().toLocaleDateString(t,i)}};function Ur(e,t,i,s){let a=e.querySelector('template[name="heading"]'),r=e.querySelector('template[name="weekday"]'),n=e.querySelector('template[name="week"]');a&&Fr(a,t,i),r&&Rr(r,t),n&&qr(n,t,i,s)}function Fr(e,t,i){K(e,s=>s({slots:{default:new Intl.DateTimeFormat(t.locale,{month:e.hasAttribute("display")?e.getAttribute("display"):"long",year:"numeric",timeZone:"UTC"}).format(new g(i.year,i.month).getDate())}}))}function Rr(e,t){let i=a=>e.hasAttribute("display")?new Intl.DateTimeFormat(t.locale,{weekday:e.getAttribute("display")}).format(a):["en","es","de","fr","it","pt"].includes(t.locale.split("-")[0])?new Intl.DateTimeFormat(t.locale,{weekday:"short"}).format(a).slice(0,2):new Intl.DateTimeFormat(t.locale,{weekday:"narrow"}).format(a),s=Array.from({length:7},(a,r)=>{let n=(r+t.startDay)%7,l=new Date(2024,0,n+7);return i(l)});K(e,a=>s.map(r=>a({slots:{default:r}})))}function qr(e,t,i,s){let a=i.month,r=i.year,n=(new g(r,a).getFirstDayOfMonth()-t.startDay+7)%7,l=new g(r,a).getDaysInMonth(),[o,c]=new g(r,a).addMonths(-1).toParts(),h=new g(o,c).getDaysInMonth(),[b,w]=[[],[]];for(let A=0;A<n;A++){b.push(0);let S=h-n+A+1;w.push(new g(o,c,S).toIsoDateString())}for(let A=1;A<=l;A++)b.push(A),w.push(new g(r,a,A).toIsoDateString());let u=(7-(n+l)%7)%7,[x,y]=new g(r,a).addMonths(1).toParts();for(let A=1;A<=u;A++)b.push(0),w.push(new g(x,y,A).toIsoDateString());if(t.fixedWeeks){let A=Math.ceil(b.length/7),S=t.fixedWeeks,E=S-A;if(E>0)for(let M=0;M<E*7;M++)b.push(0),w.push(g.fromIsoDateString(w[w.length-1]).addDays(1).toIsoDateString());else E<0&&(b.length=S*7,w.length=S*7)}let p=A=>Array.from({length:Math.ceil(A.length/7)},(S,E)=>A.slice(E*7,(E+1)*7)),m=p(b),v=p(w);K(e,A=>m.map((S,E)=>{let M=A(),U=v[E],L=M.querySelector('template[name="number"]');if(L){let W=(4-t.startDay+7)%7,Q=g.fromIsoDateString(U[W]).getWeekNumber();K(L,O=>O({slots:{default:Q}}))}return K(M.querySelector('template[name="day"]'),W=>S.map((Q,O)=>{if(Q===0){let Y=g.fromIsoDateString(U[O]).getDay();return W({slots:{default:Y},attrs:{"data-date":U[O],"data-outside":""}})}let ee=g.fromIsoDateString(U[O]),N=W({slots:{default:Q},attrs:{"data-date":U[O]}}),B=s.subtext(ee),ve=s.details(ee),de=s.variant(ee);if([!1,null,void 0].includes(de)||(N.dataset.dateVariant=de),![!1,null,void 0].includes(B)){let H=N.querySelector('template[name="subtext"]');H&&K(H,Y=>Y({slots:{default:B}}))}if(![!1,null,void 0].includes(ve)){let H=N.querySelector('template[name="details"]');H&&K(H,Y=>Y({slots:{default:ve}}))}return N})),M}))}function Vr(e,t,i,s,a,r){let l=((o,c)=>a.lowerBound(()=>g.today().getMonth()===o&&g.today().getYear()===c?g.today():new g(c,o)))(s.month,s.year);e.querySelectorAll("[data-date]").forEach(o=>{f(o,"role","gridcell");let c=o.querySelector("button"),h=Wr(o);h&&(c?f(c,"aria-label",h.toFormattedString(i.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})):f(o,"aria-label",h.toFormattedString(i.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})),r.isValid(h)?t?(f(o,"disabled",""),f(o,"aria-disabled","true"),c&&f(c,"disabled","")):(k(o,"disabled"),k(o,"data-unavailable"),k(o,"aria-disabled"),c&&k(c,"disabled")):(f(o,"disabled",""),f(o,"aria-disabled","true"),c&&f(c,"disabled",""),r.isUnavailable(h)&&f(o,"data-unavailable","")),g.today().isSameDay(h)?f(o,"data-today",""):k(o,"data-today",""),a.attributes(o,h),h.isSameDay(l)?c&&f(c,"tabindex","0"):c&&f(c,"tabindex","-1"))})}function K(e,t){if(!e)return;let i=()=>{let a=e.nextElementSibling;for(;a&&a.hasAttribute("data-appended");){let r=a;a=a.nextElementSibling,r.remove()}};i();let s=t(({slots:a={},attrs:r={}}={})=>{let n=e.content.cloneNode(!0).firstElementChild;return Object.entries(a).forEach(([l,o])=>{(l==="default"?n.querySelectorAll("slot:not([name])"):n.querySelectorAll(`slot[name="${l}"]`)).forEach(h=>h.replaceWith(typeof o=="string"?document.createTextNode(o):o))}),n.querySelectorAll("slot").forEach(l=>l.remove()),Object.entries(r).forEach(([l,o])=>{n.setAttribute(l,o)}),n});return s=Array.isArray(s)?s:[s],s.reverse().forEach(a=>{f(a,"data-appended",""),e.after(a)}),{cleanup:i}}function Wr(e){return!e||!e.hasAttribute("data-date")?null:g.fromIsoDateString(e.getAttribute("data-date"))}var T=class{static SELECTION=1;static ACTIVATION=2;static VIEW_CHANGE=3},ls=class{constructor(){this.subscribers=[],this.subscriberTypes=new WeakMap}subscribe(e,t){let i=Array.isArray(e)?e:[e];this.subscribers.push(t),this.subscriberTypes.has(t)||this.subscriberTypes.set(t,[]),this.subscriberTypes.get(t).push(...i)}notify(e){let t=Array.isArray(e)?e:[e];this.subscribers.forEach(i=>{t.length&&!this.subscriberTypes.get(i)?.some(s=>t.includes(s))||i()})}},J=class{static SINGLE="single";static MULTIPLE="multiple";static RANGE="range"},Hr=class wi{constructor(t,i,s){this.config=i,this.observable=s,this.selection=t,this.active=null,this.displayResolver=a=>a}setDisplayResolver(t){this.displayResolver=t}select(t){let i=this.selection;this.selection=this.selection.select(t,this.config),this.selection.shouldNotify(i)?this.observable.notify(T.SELECTION):this.observable.notify(T.ACTIVATION)}activate(t){let i=this.active;t?this.active=t:this.active=null,this.selection.activate(t),i!==this.active&&this.observable.notify(T.ACTIVATION)}setValue(t){let i=this.selection;this.selection=this.createSelectionFromValue(t,this.config),this.selection.shouldNotify(i)?this.observable.notify(T.SELECTION):this.observable.notify(T.ACTIVATION)}getValue(){return this.selection.value()}isSelectable(t){return this.selection.selectable(t,this.config)}contains(...t){return this.selection.contains(...t)}hasSelection(){return this.selection.hasSelection()}lowerBound(...t){return this.selection.lowerBound(...t)}upperBound(...t){return this.selection.upperBound(...t)}display(...t){return this.displayResolver(this.selection.display(...t))}attributes(...t){return this.selection.attributes(...t)}createSelectionFromValue(t,i){if(i.mode===J.MULTIPLE){let s=t?t.map(a=>g.fromIsoDateString(a)):[];return new us(s)}else if(i.mode===J.RANGE){let{start:s,end:a,preset:r}=t||{};return r&&Ct[r]&&r!=="custom"?new cs(r,i):!s&&!a?new ai:a?new ri(g.fromIsoDateString(s),g.fromIsoDateString(a)):new qe(g.fromIsoDateString(s))}else return t?new si(g.fromIsoDateString(t)):new ii}static createFromValueStringAttribute(t,i,s){let a=wi.createSelectionFromValueStringAttribute(t,i);return new wi(a,i,s)}static createSelectionFromValueStringAttribute(t,i){if(i.mode===J.MULTIPLE){let s=t?t.split(",").map(a=>a.trim()).map(a=>g.fromIsoDateString(a)):[];return new us(s)}else if(i.mode===J.RANGE){if(!t)return new ai;let[s,a]=t.split("/").map(r=>r.trim());return!a&&s&&Ct[s]&&s!=="custom"?new cs(s,i):(s=g.fromIsoDateString(s),a?(a=g.fromIsoDateString(a),new ri(s,a)):new qe(s))}else return t?new si(g.fromIsoDateString(t)):new ii}},Br=class{constructor(e,t){this.selectable=e,this.observable=t,this._selection=this.selectable.selection,this.selectable.observable.subscribe(T.SELECTION,()=>{this._blockSync()||this.sync()}),this._blockSync=()=>{}}blockSyncIf(e){this._blockSync=e}sync(){this._selection=this.selectable.selection,this.observable.notify(T.SELECTION)}setValue(e){return this.selectable.setValue(e)}getValue(){return this._selection.value()}isSelectable(e){return this._selection.selectable(e,this.config)}hasSelection(){return this._selection.hasSelection()}display(...e){return this.selectable.displayResolver(this._selection.display(...e))}},Ce=class{contains(){}shouldNotify(e){return!0}hasSelection(){return!1}lowerBound(e){return Je(e)}upperBound(e){return this.lowerBound(e)}selectable(e,t){return!0}display(){}value(){}activate(){}attributes(e,t){this.contains(t)?(f(e,"data-selected",""),f(e,"aria-selected","true")):(k(e,"data-selected"),f(e,"aria-selected","false"))}},ii=class Fs extends Ce{shouldNotify(t){return!(t instanceof Fs)}hasSelection(){return!1}contains(){return!1}select(t){return new si(t)}lowerBound(t){return Je(t)}display(t){return""}value(){return null}},si=class xi extends Ce{constructor(t){super(),this._date=t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof xi&&this._date.isSameDay(t._date))}select(t){return this._date.isSameDay(t)?new ii:new xi(t)}contains(t){return this._date.isSameDay(t)}lowerBound(){return this._date}display(t){return this._date.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})}value(){return this._date.toIsoDateString()}},us=class Pt extends Ce{constructor(t){super(),this._dates=t}hasSelection(){return this._dates.length>0}shouldNotify(t){return!(t instanceof Pt&&this._dates.every(i=>t._dates.includes(i))&&t._dates.every(i=>this._dates.includes(i)))}select(t){return this._dates.some(s=>s.isSameDay(t))?new Pt(this._dates.filter(s=>!s.isSameDay(t))):new Pt([...this._dates,t])}contains(t){return this._dates.some(i=>i.isSameDay(t))}lowerBound(t){return this._dates.sort((s,a)=>s.isBefore(a)?-1:1)[0]||Je(t)}upperBound(t){let i=this._dates.sort((s,a)=>s.isBefore(a)?-1:1);return i[i.length-1]||Je(t)}display(t){return this._dates.map(i=>i.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})).join(", ")}value(){return this._dates.map(t=>t.toIsoDateString())}},ai=class Rs extends Ce{constructor(){super()}hasSelection(){return!1}shouldNotify(t){return!(t instanceof Rs||t instanceof qe)}select(t){return new qe(t)}contains(){return!1}lowerBound(t){return Je(t)}display(t){return""}value(){return null}},qe=class qs extends Ce{constructor(t){super(),this._start=t,this._endPreview=null}hasSelection(){return!1}shouldNotify(t){return!1}select(t,i){return t.isBefore(this._start)?new qs(t):t.isSameDay(this._start)&&i.minRange>1?new ai:new ri(this._start,t)}activate(t){this._endPreview=t}selectable(t,i){if(i.maxRange&&(t.isBefore(this._start)||this._start.addDays(i.maxRange-1).isBefore(t)))return!1;if(i.minRange){if(this._start.isSameDay(t))return!0;if(t.isBefore(this._start)||this._start.addDays(i.minRange-1).isAfter(t))return!1}let s=i.unavailable.filter(r=>r.isAfter(this._start)).sort((r,n)=>r.toDate()-n.toDate())[0],a=i.unavailable.filter(r=>r.isBefore(this._start)).sort((r,n)=>n.toDate()-r.toDate())[0];return t.isAfter(this._start)?!s||t.isBefore(s):t.isBefore(this._start)?!a||t.isAfter(a):!0}contains(t){return t.isSameDay(this._start)}lowerBound(){return this._start}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).format(this._start.getDate())+" -"}value(){return null}attributes(t,i){this._endPreview&&i.isBetween(this._start,this._endPreview)?(f(t,"data-in-range",""),f(t,"aria-selected","true")):(k(t,"data-in-range"),k(t,"aria-selected")),i.isSameDay(this._start)?f(t,"data-selected",""):k(t,"data-selected"),i.isSameDay(this._start)?f(t,"aria-selected","true"):k(t,"aria-selected"),i.isSameDay(this._start)?f(t,"data-start",""):k(t,"data-start"),i.isSameDay(this._endPreview)?f(t,"data-end-preview",""):k(t,"data-end-preview")}},ri=class Vs extends Ce{constructor(t,i){super(),this._start=t,this._end=i}hasSelection(){return!0}shouldNotify(t){return!(t instanceof Vs&&this._start.isSameDay(t._start)&&this._end.isSameDay(t._end))}select(t){return new qe(t)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._start}upperBound(){return this._end}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString()}}attributes(t,i){i.isSameDay(this._start)||i.isSameDay(this._end)?f(t,"data-selected",""):k(t,"data-selected"),i.isSameDay(this._start)?f(t,"data-start",""):k(t,"data-start"),i.isSameDay(this._end)?f(t,"data-end",""):k(t,"data-end"),this.contains(i)?(f(t,"data-in-range",""),f(t,"aria-selected","true")):(k(t,"data-in-range"),k(t,"aria-selected"))}},cs=class Ws extends Ce{constructor(t,i){super(),this._preset=t,this._config=i}get _start(){let[t]=Ct[this._preset](this._config);return this._config.min&&t.isBefore(this._config.min)?this._config.min:t}get _end(){let[,t]=Ct[this._preset](this._config);return this._config.max&&t.isAfter(this._config.max)?this._config.max:t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof Ws&&this._preset===t._preset)}select(t){return new qe(t,this._config)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._preset==="allTime"?g.today():this._start}upperBound(){return this._preset==="allTime",g.today()}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString(),preset:this._preset}}attributes(t,i){i.isSameDay(this._start)||i.isSameDay(this._end)?f(t,"data-selected",""):k(t,"data-selected"),i.isSameDay(this._start)?f(t,"data-start",""):k(t,"data-start"),i.isSameDay(this._end)?f(t,"data-end",""):k(t,"data-end"),this.contains(i)?(f(t,"data-in-range",""),f(t,"aria-selected","true")):(k(t,"data-in-range"),k(t,"aria-selected"))}};function Je(e=null){return typeof e=="function"?e():e}var Ct={today:()=>[g.today(),g.today()],yesterday:()=>{let e=g.today().incrementDays(-1);return[e,e]},thisWeek:e=>{let t=g.today().getCopy().incrementDays(e.startDay-g.today().getDayOfWeek()),i=t.incrementDays(6);return[t,i]},lastWeek:e=>{let t=g.today().incrementDays(e.startDay-(g.today().getDayOfWeek()+7)),i=t.incrementDays(6);return[t,i]},last7Days:()=>{let e=g.today();return[g.today().incrementDays(-6),e]},thisMonth:()=>{let e=g.fromParts(g.today().getYear(),g.today().getMonth(),1),t=g.fromParts(g.today().getYear(),g.today().getMonth(),g.today().getDaysInMonth());return[e,t]},lastMonth:()=>{let e=g.today().getMonth()-1,t=g.today().getYear();e<1&&(e+=12,t--);let i=g.fromParts(t,e,1),s=g.fromParts(t,e,i.getDaysInMonth());return[i,s]},thisQuarter:()=>{let t=Math.floor((g.today().getMonth()-1)/3)*3+1,i=t+2,s=g.fromParts(g.today().getYear(),t,1),a=g.fromParts(g.today().getYear(),i,1),r=g.fromParts(g.today().getYear(),i,a.getDaysInMonth());return[s,r]},lastQuarter:()=>{let t=Math.floor((g.today().getMonth()-4)/3)*3+1,i=t+2,s=g.today().getYear();t<1&&(t+=12,i+=12,s--);let a=g.fromParts(s,t,1),r=g.fromParts(s,i,1),n=g.fromParts(s,i,r.getDaysInMonth());return[a,n]},thisYear:()=>{let e=g.fromParts(g.today().getYear(),1,1),t=g.fromParts(g.today().getYear(),12,31);return[e,t]},lastYear:()=>{let e=g.today().getYear()-1,t=g.fromParts(e,1,1),i=g.fromParts(e,12,31);return[t,i]},last14Days:()=>{let e=g.today();return[g.today().incrementDays(-13),e]},last30Days:()=>{let e=g.today();return[g.today().incrementDays(-29),e]},last3Months:()=>{let e=g.today(),t=g.today().getDay()+1,i=g.today().getMonth()-3,s=g.today().getYear();return i<1&&(i+=12,s--),[g.fromParts(s,i,t),e]},last6Months:()=>{let e=g.today(),t=g.today().getDay()+1,i=g.today().getMonth()-6,s=g.today().getYear();return i<1&&(i+=12,s--),[g.fromParts(s,i,t),e]},yearToDate:()=>{let e=g.fromParts(g.today().getYear(),1,1),t=g.today();return[e,t]},allTime:e=>{if(!e.min)throw new Error("Min date is required for allTime preset");let t=e.min,i=g.today();return[t,i]}},Yr=class{constructor(e,t,i,s){this.month=e,this.year=t,this.config=i,this.observable=s}generateOffsetState(e){return new $r(this,e)}canNavigatePrevious(){let[e,t]=new g(this.year,this.month).addMonths(-1).toParts();return!(this.config.min&&g.fromParts(e,t).isBefore(g.firstDayOfMonth(this.config.min)))}canNavigateNext(){let[e,t]=new g(this.year,this.month).addMonths(this.config.months).toParts();return!(this.config.max&&g.fromParts(e,t).isAfter(this.config.max))}nextMonth(){this.canNavigateNext()&&this.adjustMonth(1)}previousMonth(){this.adjustMonth(-1)}setMonth(e){e&&(this.isWithinMinAndMax(e,this.year)&&(this.month=e),this.observable.notify(T.VIEW_CHANGE))}setYear(e){e&&(this.isWithinMinAndMax(this.month,e)&&(this.year=e),this.observable.notify(T.VIEW_CHANGE))}setDate(e){e&&(this.isWithinMinAndMax(e.getMonth(),e.getYear())&&(this.month=e.getMonth(),this.year=e.getYear()),this.observable.notify(T.VIEW_CHANGE))}isWithinMinAndMax(e,t){return!(this.config.min&&g.fromParts(t,e).isBefore(g.firstDayOfMonth(this.config.min))||this.config.max&&g.fromParts(t,e).isAfter(this.config.max))}adjustMonth(e){let[t,i]=new g(this.year,this.month).addMonths(e).toParts();this.config.min&&g.fromParts(t,i).isBefore(g.firstDayOfMonth(this.config.min))||this.config.max&&g.fromParts(t,i).isAfter(this.config.max)||([this.month,this.year]=[i,t],this.observable.notify(T.VIEW_CHANGE))}},$r=class{constructor(e,t=0){this.offset=t,this.viewState=e}get month(){let[,e]=new g(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return e}get year(){let[e]=new g(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return e}},zr=class{constructor(e,t,i){this.min=i.min,this.max=i.max,this.unavailable=i.unavailable,this.selectable=e,this.metadata=t}isBetweenMinMax(e){return e.isBetween(this.min,this.max)}isUnavailable(e){return this.unavailable.some(t=>t.isSameDay(e))||this.metadata.unavailable(e)}isBlocked(e){return!this.selectable.isSelectable(e)}isValid(e){return this.isBetweenMinMax(e)&&!this.isUnavailable(e)&&!this.isBlocked(e)}},Gr=class{constructor(e){this.metadata={},this.observable=e}resetFromJSON(e){this.reset(JSON.parse(e))}appendFromJSON(e){this.append(JSON.parse(e))}append(e){this.metadata={...this.metadata,...e},this.observable.notify(T.VIEW_CHANGE)}reset(e){this.metadata=e,this.observable.notify(T.VIEW_CHANGE)}get(e){return this.metadata[e.toIsoDateString()]}has(e){return this.metadata[e.toIsoDateString()]!==void 0}subtext(e){return this.metadata[e.toIsoDateString()]?.subtext}details(e){return this.metadata[e.toIsoDateString()]?.details}variant(e){return this.metadata[e.toIsoDateString()]?.variant}unavailable(e){return!!this.metadata[e.toIsoDateString()]?.unavailable}},jr=class extends D{boot(){let e=this.closest("ui-date-picker")||this;this.querySelectorAll("[data-appended]").forEach(l=>l.remove());let[t,i]=La(e,"months",1);this.observable=new ls;let s=e.hasAttribute("locale")?e.getAttribute("locale"):fe();this.config={mode:e.getAttribute("mode")==="range"?J.RANGE:e.hasAttribute("multiple")?J.MULTIPLE:J.SINGLE,months:parseInt(t),min:e.hasAttribute("min")?e.getAttribute("min")==="today"?g.today():g.fromIsoDateString(e.getAttribute("min")):null,max:e.hasAttribute("max")?e.getAttribute("max")==="today"?g.today():g.fromIsoDateString(e.getAttribute("max")):null,maxRange:e.hasAttribute("max-range")?parseInt(e.getAttribute("max-range")):null,minRange:e.hasAttribute("min-range")?parseInt(e.getAttribute("min-range")):null,startDay:e.hasAttribute("start-day")?parseInt(e.getAttribute("start-day")):(new Intl.Locale(s).weekInfo?.firstDay||7)%7,unavailable:this.getUnavailableDates(e),locale:s,fixedWeeks:e.hasAttribute("fixed-weeks")?6:null},i(l=>{this.config.months=parseInt(l),this.observable.notify(T.VIEW_CHANGE)}),this.selectable=Hr.createFromValueStringAttribute(e.getAttribute("value"),this.config,this.observable),this.metadata=new Gr(this.observable),this.validator=new zr(this.selectable,this.metadata,this.config);let a=this.selectable.lowerBound()===null&&e.hasAttribute("open-to")?this.getOpenTo(e):this.selectable.lowerBound(()=>g.today());if(this.viewState=new Yr(a.getMonth(),a.getYear(),this.config,this.observable),this._disableable=new q(this,{disableWithParent:!1}),!this.hasAttribute("static")){let{enable:l,disable:o}=an(this,this.selectable,this.viewState,this.validator);this._disableable.onInitAndChange(c=>{c?o():l()})}this._controllable=new G(this,{bubbles:!0}),this._submittable=new Se(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let r=F();this._controllable.initial(l=>l&&this.selectable.setValue(l)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(r(l=>{this.selectable.setValue(l)})),this.observable.subscribe(T.SELECTION,r(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(T.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(T.SELECTION,()=>{this.anchorSelection()}),this.observable.subscribe(T.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))}),queueMicrotask(()=>{this.closest("ui-date-picker")?.bootWithCalendar(this)}),new MutationObserver(l=>{l.forEach(o=>{o.attributeName==="unavailable"&&(this.config.unavailable=this.getUnavailableDates(e),this.validator.unavailable=this.config.unavailable,this.observable.notify(T.VIEW_CHANGE))})}).observe(e,{attributes:!0})}getOpenTo(e){if(!e.hasAttribute("open-to"))return;let t=e.getAttribute("open-to");return t=t==="today"?g.today():g.fromIsoDateString(t),this.validator.isBetweenMinMax(t)?t:this.config.min}navigateNext(){this.viewState.nextMonth()}navigatePrevious(){this.viewState.previousMonth()}anchorSelection(){let e=document.activeElement;this.contains(e)&&e.closest("[data-date]")!==null||this.viewState.setDate(this.selectable.lowerBound(g.today()))}appendMetadata(e){this.metadata.append(e)}resetMetadata(e={}){this.metadata.reset(e)}visibleDateRange(){return[g.fromParts(this.viewState.year,this.viewState.month,1).toIsoDateString(),g.fromParts(this.viewState.year,this.viewState.month+1,0).toIsoDateString()]}getUnavailableDates(e){return e.hasAttribute("unavailable")?e.getAttribute("unavailable").split(",").map(t=>g.fromIsoDateString(t.trim())):[]}},Xr=class extends D{boot(){let e=this.closest("ui-calendar");this._disableable=e._disableable,vt(this,()=>this._disableable.isDisabled(),()=>e.navigatePrevious());let t=()=>{e.viewState.canNavigatePrevious()&&!this._disableable.isDisabled()?k(this,"disabled"):f(this,"disabled","")};e.observable.subscribe(T.VIEW_CHANGE,t),this._disableable.onInitAndChange(()=>{t()})}},Kr=class extends D{boot(){let e=this.closest("ui-calendar");this._disableable=e._disableable,vt(this,()=>this._disableable.isDisabled(),()=>e.navigateNext());let t=()=>{e.viewState.canNavigateNext()&&!this._disableable.isDisabled()?k(this,"disabled"):f(this,"disabled","")};e.observable.subscribe(T.VIEW_CHANGE,t),this._disableable.onInitAndChange(()=>{t()})}},Jr=class extends D{boot(){let e=this.closest("ui-calendar");this._disableable=e._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=e.config,this.viewState=e.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.validator=e.validator;let t=this.querySelector("select"),i=this.hasAttribute("display")?this.getAttribute("display"):"long";if(t)this.renderSelectOptions(t,i),t.value=this.viewState.month,t.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setMonth(parseInt(t.value))})),e.observable.subscribe(T.VIEW_CHANGE,()=>{this.renderSelectOptions(t,i),t.value=this.viewState.month}),this._disableable.onInitAndChange(s=>{s?f(t,"disabled",""):k(t,"disabled")});else{let s=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{month:this.hasAttribute("display")?this.getAttribute("display"):"long",timeZone:"UTC"}).format(new g(this.offsetState.year,this.offsetState.month).getDate());s(),this.viewState.observable.subscribe(T.VIEW_CHANGE,()=>s())}}renderSelectOptions(e,t){let s=Array.from({length:12},(a,r)=>r+1).map(a=>{let r=new g(this.viewState.year,a),n=new g(this.viewState.year,a+1,0);return!this.validator.isBetweenMinMax(r)&&!this.validator.isBetweenMinMax(n)?null:{month:a,label:new Intl.DateTimeFormat(this.config.locale,{month:t,timeZone:"UTC"}).format(new g(2024,a).getDate())}}).filter(Boolean);K(e.querySelector("template"),a=>{if(s.length===0){let r=this.viewState.month,n=new Intl.DateTimeFormat(this.config.locale,{month:t,timeZone:"UTC"}).format(new g(2024,r).getDate()),l=a({slots:{default:n}});return l.setAttribute("value",r),l}return s.map(r=>{let n=a({slots:{default:r.label}});return n.setAttribute("value",r.month),n})})}},Zr=class extends D{boot(){let e=this.closest("ui-calendar");this._disableable=e._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=e.config,this.viewState=e.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.numberOfPastYears=100,this.numberOfFutureYears=10,this.validator=e.validator;let t=this.querySelector("select");if(t)this.renderSelectOptions(t),t.value=this.viewState.year,t.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setYear(parseInt(t.value))})),e.observable.subscribe(T.VIEW_CHANGE,()=>{this.yearIsLessThanMinimum(this.viewState.year)&&(this.numberOfPastYears+=100,this.renderSelectOptions(t)),this.yearIsGreaterThanMaximum(this.viewState.year)&&(this.numberOfFutureYears+=10,this.renderSelectOptions(t)),t.value=this.viewState.year}),this._disableable.onInitAndChange(i=>{i?f(t,"disabled",""):k(t,"disabled")});else{let i=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{year:this.hasAttribute("display")?this.getAttribute("display"):"numeric",timeZone:"UTC"}).format(new g(this.offsetState.year,this.offsetState.month).getDate());i(),this.viewState.observable.subscribe(T.VIEW_CHANGE,()=>i())}}yearIsLessThanMinimum(e){return e<this.minimumYear()}yearIsGreaterThanMaximum(e){return e>this.maximumYear()}minimumYear(){return new Date().getFullYear()-this.numberOfPastYears}maximumYear(){return new Date().getFullYear()+this.numberOfFutureYears}renderSelectOptions(e){let t=new Date().getFullYear(),s=Array.from({length:this.numberOfPastYears+this.numberOfFutureYears+1},(a,r)=>t-this.numberOfPastYears+r).map(a=>{let r=new g(a,1),n=new g(a,12,31);return!this.validator.isBetweenMinMax(r)&&!this.validator.isBetweenMinMax(n)?null:a}).filter(Boolean);K(e.querySelector("template"),a=>{if(s.length===0){let r=this.viewState.year;return a({slots:{default:r}})}return s.map(r=>a({slots:{default:r}}))})}},Qr=class extends D{boot(){let e=this.closest("ui-calendar");this._disableable=e._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=e.config,this.selectable=e.selectable,this.observable=e.observable,this.metadata=e.metadata,this.validator=e.validator,this.viewState=e.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.monthEls=[],this.renderMonths();let t=()=>this.monthEls.forEach(a=>Ur(a,this.config,a.offsetState,this.metadata)),i=()=>this.monthEls.forEach(a=>Vr(a,this._disableable.isDisabled(),this.config,a.offsetState,this.selectable,this.validator));t(),i();let s=this.config.months;this.viewState.observable.subscribe(T.VIEW_CHANGE,()=>{s!==this.config.months&&(s=this.config.months,this.renderMonths()),t(),i()}),this.observable.subscribe([T.SELECTION,T.ACTIVATION],()=>{i()}),this._disableable.onChange(()=>i())}renderMonths(){let e=this.querySelector('template:not([name]), template[name="month"]');K(e,t=>{let i=Array.from({length:this.config.months}).map((s,a)=>a);return this.monthEls=i.map(s=>{let a=this.viewState.generateOffsetState(s),r=t({attrs:{"data-month":""}});r.offsetState=a;let n=r.querySelector("thead")?.set;return f(r,"role","grid"),n&&f(n,"aria-hidden","true"),r}),this.monthEls})}},en=class extends D{boot(){let e=this.closest("ui-calendar, ui-date-picker");this._disableable=e._disableable,this.behavior=this.hasAttribute("behavior")?this.getAttribute("behavior"):"auto",e.hasAttribute("static")&&(this.behavior="none"),vt(this,()=>this._disableable.isDisabled(),()=>this.navigateAndSelectToday()),this._disableable.onInitAndChange(i=>{i?f(this,"disabled",""):k(this,"disabled")});let t=this.querySelector("template");t&&K(t,i=>i({slots:{default:g.today().getDay()}}))}navigateAndSelectToday(){let e=this.closest("ui-calendar, ui-date-picker"),t=()=>{let s=e.viewState,a=g.today();return s.year===a.getYear()&&s.month===a.getMonth()};(this.behavior==="select"||this.behavior==="auto"&&t())&&(e.config.mode===J.RANGE?e.selectable.setValue({start:g.today().toIsoDateString(),end:g.today().toIsoDateString()}):e.config.mode===J.MULTIPLE?e.selectable.setValue([g.today().toIsoDateString()]):e.selectable.setValue(g.today().toIsoDateString())),e.viewState.setMonth(g.today().getMonth()),e.viewState.setYear(g.today().getYear())}},tn=class extends D{boot(){let e=this.closest("ui-calendar");if(this._disableable=e._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=e.selectable,this.observable=e.observable,this.config=e.config,this.viewState=e.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.config.mode!==J.RANGE)throw"Presets can only be used with range calendars";let t=this.firstElementChild;if(t){let i=s=>{if(t._selectable instanceof pe){let a=t._selectable.findByValue(s);return a?a?.el?.textContent:null}else if(t instanceof HTMLSelectElement)return t.querySelector(`option[value="${s}"]`)?.textContent;return null};this.selectable.setDisplayResolver(s=>{let a=this.selectable.getValue()?.preset||"";if(a){let r=i(a);if(r)return r}return s}),t.value=this.selectable.getValue()?.preset||"custom",t.addEventListener("change",this._disableable.enabled(()=>{if(["","custom"].includes(t.value)){let{start:s,end:a}=this.selectable.getValue()||{};s&&a&&this.selectable.setValue({start:s,end:a})}else this.selectable.setValue({preset:t.value})})),this.observable.subscribe(T.SELECTION,()=>{let s=this.selectable.getValue();t.value=s?.preset||"custom"}),this._disableable.onInitAndChange(s=>{s?f(t,"disabled",""):k(t,"disabled")})}}},sn=class extends D{boot(){let e=this.closest("ui-calendar");this._disableable=e._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=e.selectable,this.observable=e.observable,this.config=e.config,this.viewState=e.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset);let[t,i]=this.querySelectorAll("input");this.config.mode===J.RANGE?ds(t,i,e):hs(t,e)}};P(({css:e})=>e`
    ui-calendar-preset,
    ui-calendar-previous,
    ui-calendar-next {
        display: block;
        user-select: none;
    }
`),C("calendar",jr),C("calendar-today",en),C("calendar-presets",tn),C("calendar-previous",Xr),C("calendar-inputs",sn),C("calendar-next",Kr),C("calendar-months",Qr),C("calendar-month",Jr),C("calendar-year",Zr);function an(e,t,i,s){let a=!1,r=e.hasAttribute("readonly");return _(e,"click",n=>{if(a||r)return;let l=n.target.closest("[data-date]");if(!l)return;let o=Ve(l);s.isValid(o)&&t.select(o)}),_(e,"mouseover",n=>{if(a||r)return;let l=n.target.closest("[data-date]");if(!l)return;let o=Ve(l);s.isValid(o)&&t.activate(o)}),_(e,"mouseout",()=>{a||r||t.activate(null)}),_(e,"focusin",n=>{if(a||r)return;let l=n.target.closest("[data-date]");if(!l)return;let o=Ve(l);s.isValid(o)&&t.activate(o)}),_(e,"keydown",n=>{if(a)return;let l=n.target.closest("[data-date]");if(!l)return;let o=!0,c,h=Ve(l),b=w=>{let d=h.getCopy(),u=Math.sign(w),x=366;for(d.setDay(d.getDay()+w);!s.isValid(d)&&x>0;)d.setDay(d.getDay()+u),x--;h=d};switch(n.key){case"ArrowRight":c="forward",b(1);break;case"ArrowLeft":c="backward",b(-1);break;case"ArrowUp":c="backward",b(-7);break;case"ArrowDown":c="forward",b(7);break;case"Home":i.previousMonth();break;case"End":i.nextMonth();break;case"PageUp":n.shiftKey,i.previousMonth();break;case"PageDown":n.shiftKey,i.nextMonth();break;default:o=!1}if(o){n.preventDefault(),n.stopPropagation();let w=Array.from(e.querySelectorAll("[data-date]")).find(d=>Ve(d).isSameDay(h));!w&&c&&(c==="forward"?i.nextMonth():i.previousMonth(),w=Array.from(e.querySelectorAll("[data-date]")).find(d=>Ve(d).isSameDay(h))),w?.querySelector("button")?.focus()}}),{enable(){a=!1},disable(){a=!0}}}function Ve(e){return!e||!e.hasAttribute("data-date")?null:g.fromIsoDateString(e.getAttribute("data-date"))}function hs(e,t){ni(e);let i=F(),s=i(()=>{let a=t.selectable.getValue();e.value=a||""});t.observable.subscribe(T.SELECTION,s),s(),e.addEventListener("change",i(()=>{let a=e.valueAsDate;a?(t.selectable.setValue(g.fromLocalDate(a).toIsoDateString()),t.viewState.setDate(g.fromLocalDate(a))):t.selectable.setValue("")}))}function ds(e,t,i){ni(e),ni(t);let s=F(),a=s(()=>{let{start:n,end:l}=i.selectable.getValue()||{};e.value=n||"",t.value=l||""}),r=s(()=>{let n=e.valueAsDate,l=t.valueAsDate;n&&l?i.selectable.setValue({start:g.fromLocalDate(n).toIsoDateString(),end:g.fromLocalDate(l).toIsoDateString()}):n?i.selectable.setValue({start:g.fromLocalDate(n).toIsoDateString(),end:null}):i.selectable.setValue({start:null,end:null})});i.observable.subscribe(T.SELECTION,a),a(),e.addEventListener("change",r),t.addEventListener("change",r)}function ni(e){_(e,"change",t=>t.stopPropagation()),_(e,"input",t=>t.stopPropagation())}var rn=class extends ae{bootWithCalendar(e){let t=e.config.mode===J.RANGE;this.calendar=e,this._disableable=new q(this),this.observable=new ls,this.selectable=new Br(this.calendar.selectable,this.observable),this.viewState=this.calendar.viewState,this.querySelector("ui-selected-date")?.bootWithCalendar(),this.querySelector("ui-date-picker-select")?.bootWithCalendar();let i=this.querySelector("dialog");if(!i)return;let s=this.querySelector("input");s=i?.contains(s)?null:s;let a=Array.from(this.querySelectorAll("input")).find(o=>o!==s);a=i?.contains(a)?null:a,s&&s.addEventListener("click",o=>o.preventDefault()),a&&a.addEventListener("click",o=>o.preventDefault());let r=this.querySelector("button");r=i?.contains(r)?null:r;let n=$(this.calendar,"calendar");if(this.triggerEl=s||r,!this.triggerEl)return;if(f(this.triggerEl,"role","combobox"),f(this.triggerEl,"aria-controls",n),this._disableable.onInitAndChange(o=>{o?f(this.triggerEl,"disabled",""):k(this.triggerEl,"disabled")}),this._dialogable=new Yi(i,{clickOutside:!this.hasAttribute("disable-click-outside"),triggers:[r,s,a].filter(Boolean)}),this._anchorable=new me(i,{reference:this.triggerEl,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),Na()&&(s&&this.showIOSOverlay(s),a&&this.showIOSOverlay(a)),this.querySelectorAll("button").forEach(o=>{o!==this.triggerEl&&(i.contains(o)||(f(o,"aria-controls",n),f(o,"aria-haspopup","combobox"),fs(o,this._dialogable),_(o,"click",()=>this._dialogable.toggle())))}),ln(this,this.triggerEl,i,this._dialogable,this._anchorable),fs(this.triggerEl,this._dialogable),hn(this,this._dialogable),un(this.triggerEl,this._dialogable),dn(this,this.calendar.config.mode,this.observable,this.selectable,this._dialogable),t&&i&&s&&a)oi(s),oi(a),ds(s,a,this);else if(i&&s){let o=s;oi(o),hs(o,this)}else i&&cn(r,this._dialogable);this._controllable=new G(this,{bubbles:!0}),this.calendar.addEventListener("change",o=>o.stopPropagation()),this.calendar.addEventListener("input",o=>o.stopPropagation()),this._submittable=new Se(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let l=F();this._controllable.initial(o=>o&&this.selectable.setValue(o)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(l(o=>this.selectable.setValue(o))),this.observable.subscribe(T.SELECTION,l(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(T.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(T.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))})}showIOSOverlay(e){let t=document.createElement("button");t.setAttribute("data-flux-ios-overlay",""),t.setAttribute("data-appended",""),t.classList.add("absolute","inset-0"),e.after(t)}input(){return this.querySelector("input")}clear(){this.selectable.setValue(null)}open(){this._dialogable.setState(!0)}close(){this._dialogable.setState(!1)}trigger(){return this.triggerEl}},nn=class extends D{bootWithCalendar(){if(this.picker=this.closest("ui-date-picker"),this.querySelectorAll("[data-appended]").forEach(e=>e.remove()),!this.querySelector('template[name="date"]')){let e=document.createElement("template");e.setAttribute("name","date"),e.innerHTML="<div><slot></slot></div>",this.appendChild(e)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),date:this.querySelector('template[name="date"]')},this.picker.observable.subscribe(T.SELECTION,()=>{this.render(this.picker)}),this.render(this.picker)}render(e){if(this.templates.placeholder?.clearPlaceholder?.(),this.templates.date?.clearDate?.(),e.selectable.hasSelection()){let{cleanup:t}=K(this.templates.date,i=>i({slots:{default:e.selectable.display(this.picker.calendar.config.locale)}}));this.templates.date.clearDate=t}else{if(!this.templates.placeholder)return;let{cleanup:t}=K(this.templates.placeholder,i=>i({slots:{}}));this.templates.placeholder.clearPlaceholder=t}}},on=class extends D{bootWithCalendar(){this.picker=this.closest("ui-date-picker"),this.picker.selectable.blockSyncIf(()=>this.getBoundingClientRect().width>0),vt(this,()=>this.picker._disableable.isDisabled(),()=>{this.picker.selectable.sync(),this.picker._dialogable.setState(!1)})}};C("date-picker",rn),C("date-picker-select",on),C("selected-date",nn),P(({css:e})=>e`ui-date-picker { display: block; }`),P(({css:e})=>e`
/* For Chrome, Safari, Edge */
ui-date-picker input[type="date"]::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
}
`);function fs(e,t){f(e,"aria-haspopup","listbox");let i=()=>{f(e,"aria-expanded",t.getState()?"true":"false"),t.getState()?f(e,"data-open",""):k(e,"data-open","")};t.onChange(()=>{i()}),i()}function ln(e,t,i,s,a){let r=()=>{Array.from([e,i]).forEach(n=>{s.getState()?f(n,"data-open",""):k(n,"data-open","")}),s.getState()&&a.reposition()};s.onChange(()=>r()),r(),s.onChange(()=>{s.getState()?e.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):e.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function un(e,t){_(e,"keydown",i=>{["ArrowDown","ArrowUp","Escape"].includes(i.key)&&(i.key==="ArrowDown"||i.key==="ArrowUp"?t.getState()||(t.setState(!0),i.preventDefault(),i.stopImmediatePropagation()):i.key==="Escape"&&t.getState()&&t.setState(!1))})}function cn(e,t){_(e,"click",()=>{t.setState(!t.getState())})}function oi(e){_(e,"focus",()=>e.select())}function hn(e,t){let{lock:i,unlock:s}=Oe(t.el);t.onChange(()=>{t.getState()?i():s()})}function dn(e,t,i,s,a){let r=t!==J.MULTIPLE;if(e.hasAttribute("close")){let n=e.getAttribute("close");r=n.split(" ").includes("auto"),n==="manual"&&(r=!1)}r&&i.subscribe(T.SELECTION,()=>{s.hasSelection()&&a.setState(!1)})}var fn=class extends D{boot(){let e=this.trigger(),t=this.overlay();this._disabled=this.hasAttribute("disabled"),this._popoverable=new _e(t),this._anchorable=new me(t,{reference:e,auto:!1,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0});let{lock:i,unlock:s}=Oe(this._popoverable.el);this._popoverable.onChange(()=>{this._popoverable.getState()?i():s()}),_(e,"contextmenu",a=>{a.preventDefault(),this._anchorable.reposition(a.pageX,a.pageY),this._popoverable.setState(!0),this.hasAttribute("detail")&&f(t,"data-detail",this.getAttribute("detail"))}),this.hasAttribute("detail")&&f(t,"data-detail","")}trigger(){return this.firstElementChild}overlay(){if(this.hasAttribute("target")){let e=this.getAttribute("target");return document.getElementById(e)}else return this.lastElementChild.matches("[popover]")&&this.lastElementChild}};C("context",fn);var ps=class extends yt{groupOfType=R;boot({options:e}){e({wrap:!1,filter:!1}),this.onChanges=[]}onChange(e){this.onChanges.push(e)}activated(e){this.onChanges.forEach(t=>t())}activateFirst(){this.filterAwareWalker().first()?.use(R).activate()}activateBySearch(e){this.filterAwareWalker().find(i=>i.textContent.toLowerCase().trim().startsWith(e.toLowerCase()))?.use(R).activate()}activateSelectedOrFirst(e){if(!e||(i=>i.matches("ui-option")?getComputedStyle(i).display==="none":!1)(e)){this.filterAwareWalker().first()?.use(R).activate();return}e?.use(R).activate()}activateActiveOrFirst(){let e=this.getActive();if(!e){this.filterAwareWalker().first()?.use(R).activate();return}e?.use(R).activate()}activateActiveOrLast(){let e=this.getActive();if(!e){this.filterAwareWalker().last()?.use(R).activate();return}e?.use(R).activate()}activatePrev(){let e=this.getActive();if(!e){this.filterAwareWalker().last()?.use(R).activate();return}let t;this.options.wrap?t=this.filterAwareWalker().prevOrLast(e):t=this.filterAwareWalker().prev(e),t?.use(R).activate()}activateNext(){let e=this.getActive();if(!e){this.filterAwareWalker().first()?.use(R).activate();return}let t;this.options.wrap?t=this.filterAwareWalker().nextOrFirst(e):t=this.filterAwareWalker().next(e),t?.use(R).activate()}getActive(){return this.walker().find(e=>e.use(R).isActive())}clearActive(){this.getActive()?.use(R).deactivate()}filterAwareWalker(){let e=t=>t.matches("ui-option")?getComputedStyle(t).display==="none":!1;return se(this.el,(t,{skip:i,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name])return i();if(t.hasAttribute("disabled")||e(t))return s()})}},R=class Hs extends z{groupedByType=ps;mount(){this.el.addEventListener("mouseenter",()=>{this.activate()}),this.el.addEventListener("mouseleave",()=>{this.deactivate()})}activate(){this.group()&&this.group().walker().each(t=>t.use(Hs).deactivate(!1)),!this.el.hasAttribute("disabled")&&(f(this.el,"data-active",""),this.el.scrollIntoView({block:"nearest"}),this.group()&&this.group().activated(this.el))}deactivate(t=!0){k(this.el,"data-active"),t&&this.group()&&this.group().activated(this.el)}isActive(){return this.el.hasAttribute("data-active")}},bs=class extends yt{groupOfType=We;boot({options:e}){e({}),this.onChanges=[],this.lastSearch=""}onChange(e){this.onChanges.push(e)}filter(e){e===""?this.walker().each(t=>{t.use(We).unfilter()}):this.walker().each(t=>{this.matches(t,e)?t.use(We).unfilter():t.use(We).filter()}),this.lastSearch!==e&&this.onChanges.forEach(t=>t()),this.lastSearch=e}matches(e,t){return e.textContent.toLowerCase().trim().includes(t.toLowerCase().trim())}hasResults(){return this.walker().some(e=>!e.use(We).isFiltered())}},We=class extends z{groupedByType=bs;boot({options:e}){e({mirror:null,keep:!1}),this.onChanges=[]}filter(){this.options().keep||(f(this.el,"data-hidden",""),this.options().mirror&&f(this.options().mirror,"data-hidden",""))}unfilter(){k(this.el,"data-hidden"),this.options().mirror&&k(this.options().mirror,"data-hidden","")}isFiltered(){return this.el.hasAttribute("data-hidden")}},Ze=class extends yt{groupOfType=V;boot({options:e}){e({wrap:!1,ensureTabbable:!0})}mount(){this.options().ensureTabbable&&this.ensureTabbable()}focusFirst(){let e;e=e||this.walker().find(t=>t.hasAttribute("autofocus")),e=e||this.walker().find(t=>t.getAttribute("tabindex")==="0"),e=e||this.walker().find(t=>t.getAttribute("tabindex")==="-1"),e=e||this.walker().find(t=>Aa(t)),e?.focus()}focusPrev(){this.moveFocus(e=>this.options().wrap?this.walker().prevOrLast(e):this.walker().prev(e))}focusNext(){this.moveFocus(e=>this.options().wrap?this.walker().nextOrFirst(e):this.walker().next(e))}focusBySearch(e){let t=this.walker().find(i=>i.textContent.toLowerCase().trim().startsWith(e.toLowerCase()));t?.use(V).tabbable(),t?.use(V).focus()}moveFocus(e){let t=this.walker().find(s=>s.use(V).isTabbable());e(t)?.use(V).focus()}ensureTabbable(){this.walker().findOrFirst(e=>{e.use(V).isTabbable()})?.use(V).tabbable()}wipeTabbables(){this.walker().each(e=>{e.use(V).untabbable()})}untabbleOthers(e){this.walker().each(t=>{t!==e&&t.use(V).untabbable()})}walker(){return se(this.el,(e,{skip:t,reject:i})=>{if(e[this.constructor.name]&&e!==this.el)return i();if(!e[this.groupOfType.name])return t();if(e.hasAttribute("disabled"))return i()})}},V=class extends z{groupedByType=Ze;boot({options:e}){e({hover:!1,disableable:null,tabbable:!1,tabbableAttr:null})}mount(){let e=this.options().disableable;if(!e)throw"Focusable requires a Disableable instance...";this.el.hasAttribute("tabindex")||(this.options().tabbable?this.tabbable():this.untabbable()),this.pauseFocusListener=this.on("focus",e.enabled(()=>{this.focus(!1)})).pause,this.on("focus",e.enabled(()=>{Bt()&&f(this.el,"data-focus","")})),this.on("blur",e.enabled(()=>{k(this.el,"data-focus")})),this.options().hover&&this.on("pointerenter",e.enabled(()=>{this.group()?.untabbleOthers(this.el),this.tabbable()})),this.options().hover&&this.on("pointerleave",e.enabled(t=>{this.untabbable()}))}focus(e=!0){this.group()?.untabbleOthers(this.el),this.tabbable(),e&&this.pauseFocusListener(()=>{this.el.focus({focusVisible:!1})})}tabbable(){f(this.el,"tabindex","0"),this.options().tabbableAttr&&f(this.el,this.options().tabbableAttr,"")}untabbable(){f(this.el,"tabindex","-1"),this.options().tabbableAttr&&k(this.el,this.options().tabbableAttr)}isTabbable(){return this.el.getAttribute("tabindex")==="0"}},gs=class extends D{boot(){f(this,"tabindex","-1"),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hidePopover()}),f(this,"role","listbox")}},pn=class extends D{mount(){let e=this;this._disableable=new q(e,{disableWithParent:!1}),this._disableable.onInitAndChange(s=>{s?f(e,"aria-disabled","true"):k(e,"aria-disabled")});let t=$(e,"option");f(e,"role","option"),this._filterable=new We(e,{mirror:this,keep:!!this.closest("ui-empty")||this.getAttribute("filter")==="manual"}),this._activatable=new R(e),this.hasAttribute("action")||(this._selectable=new I(e,{value:this.getValue(),label:this.getLabel(),selectedInitially:this.hasAttribute("selected")})),new MutationObserver(s=>{s.forEach(a=>{a.attributeName==="selected"&&(this.hasAttribute("selected")?this._selectable.setState(!0):this._selectable.setState(!1))})}).observe(this,{attributeFilter:["selected"]})}get selected(){return this?._selectable?this._selectable.isSelected():!1}set selected(e){if(!this?._selectable)return!1;this._selectable.setState(e)}getLabel(){return this.hasAttribute("label")?this.getAttribute("label"):this.textContent.trim()}getValue(){return this.hasAttribute("value")?this.getAttribute("value"):this.textContent.trim()}};P(({css:e})=>e`ui-options:not([popover]), ui-option { display: block; cursor: default; }`),C("options",gs),C("option",pn);var bn=class extends D{boot(){if(this.querySelectorAll("[data-appended]").forEach(e=>e.remove()),!this.querySelector("template")){let e=document.createElement("template");e.setAttribute("name","placeholder"),e.innerHTML="<span>"+this.innerHTML+"</span>",this.innerHTML="",this.appendChild(e)}if(!this.querySelector('template[name="options"]')){let e=document.createElement("template");e.setAttribute("name","options"),e.innerHTML="<div><slot></slot></div>",this.appendChild(e)}if(!this.querySelector('template[name="option"]')){let e=document.createElement("template");e.setAttribute("name","option"),e.innerHTML="<div><slot></slot></div>",this.appendChild(e)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),overflow:this.querySelector('template[name="overflow"]'),options:this.querySelector('template[name="options"]'),option:this.querySelector('template[name="option"]')},this.templates.options.elsByValue=new Map,this.max=this.templates.overflow?.getAttribute("max")?this.templates.overflow.getAttribute("max"):1/0,this.selecteds=new Map,this.picker=this.closest("ui-select"),this.multiple=this.picker.hasAttribute("multiple")}mount(){queueMicrotask(()=>{this.picker._selectable.onInitAndChange(()=>{this.render(!0)});let e=this.picker.list();e&&new MutationObserver(t=>{queueMicrotask(()=>this.render())}).observe(e,{childList:!0})})}render(e){if(this.multiple){let t=this.picker.value,i=Array.from(this.selecteds.keys()).filter(r=>!t.includes(r)),s=t.filter(r=>!this.selecteds.has(r));i.forEach(r=>this.selecteds.delete(r));let a=new Map;for(let r of s){let n=this.picker._selectable.findByValue(r);if(!n){if(e)return setTimeout(()=>this.render());throw`Could not find option for value "${r}"`}a.set(r,n)}a.forEach((r,n)=>this.selecteds.set(n,r)),this.templates.placeholder?.clearPlaceholder?.(),this.templates.overflow?.clearOverflow?.(),this.templates.options?.clearOptions?.(),this.selecteds.size>0?this.renderOptions({hasOverflowed:r=>{if(this.max==="auto"){let n=!1;if(this.renderOverflow(this.selecteds.size,this.selecteds.size-r),this.clientWidth<this.scrollWidth&&(n=!0),this.templates.overflow?.clearOverflow?.(),n)return!0}return r>parseInt(this.max)},renderOverflow:r=>{this.templates?.overflow?.getAttribute("mode")!=="append"&&this.templates.options?.clearOptions?.(),this.renderOverflow(this.selecteds.size,r)}}):this.renderPlaceholder()}else{let t=this.picker.value;if(Array.from(this.selecteds.keys()).includes(t))return;this.selecteds.clear();let i=this.picker._selectable.findByValue(t);if(i)this.selecteds.set(t,i);else if(!["",null,void 0].includes(t)){if(e)return setTimeout(()=>{console.log("retrying..."),this.render()});throw`Could not find option for value "${t}"`}this.templates.placeholder?.clearPlaceholder?.(),this.templates.option?.clearOption?.(),this.selecteds.size>0?this.renderOption():this.renderPlaceholder()}}renderOptions({hasOverflowed:e,renderOverflow:t}){let i=document.createElement("div");i.style.display="contents";let s=Qe(this.templates.options,{default:i});this.templates.options.after(s),this.templates.options.clearOptions=()=>{s.remove(),this.templates.options.clearOptions=()=>{}};let a=0,r=!1;for(let[l,o]of this.selecteds){let c=new DocumentFragment;c.append(...o.el.cloneNode(!0).childNodes);let h=Qe(this.templates.option,{text:o.el.textContent.trim(),default:c,value:l});if(h.setAttribute("data-value",l),h.setAttribute("data-appended",""),h.deselect=()=>o.deselect(),i.appendChild(h),a++,e(a)){r=!0,i.removeChild(h),a--;break}}let n=new DocumentFragment;n.append(...i.childNodes),i.replaceWith(n),r&&t(this.selecteds.size-a)}renderOption(){for(let[e,t]of this.selecteds){let i=new DocumentFragment;i.append(...t.el.cloneNode(!0).childNodes);let s=Qe(this.templates.option,{text:t.el.textContent.trim(),default:i,value:e});s.setAttribute("data-value",e),s.setAttribute("data-appended",e),s.deselect=()=>t.deselect(),this.templates.option.after(s),this.templates.option.clearOption=()=>{s.remove(),this.templates.option.clearOption=()=>{}}}}renderPlaceholder(){if(!this.templates.placeholder)return;let e=Qe(this.templates.placeholder);e.setAttribute("data-appended",""),this.templates.placeholder.after(e),this.templates.placeholder.clearPlaceholder=()=>{e.remove(),this.templates.placeholder.clearPlaceholder=()=>{}}}renderOverflow(e,t){if(!this.templates.overflow)return;let i=Qe(this.templates.overflow,{remainder:t,count:this.selecteds.size});i.setAttribute("data-appended",""),this.templates.overflow.after(i),this.templates.overflow.clearOverflow=()=>{i.remove(),this.templates.placeholder.clearOverflow=()=>{}}}};function Qe(e,t={}){let i=e.content.cloneNode(!0);return Object.entries(t).forEach(([s,a])=>{(s==="default"?i.querySelectorAll("slot:not([name])"):i.querySelectorAll(`slot[name="${s}"]`)).forEach(n=>n.replaceWith(typeof a=="string"?document.createTextNode(a):a))}),i.firstElementChild}var ms=class extends ae{boot(){let e=this.list();this._controllable=new G(this,{bubbles:!0}),this._selectable=new pe(e,{multiple:this.hasAttribute("multiple")}),this._submittable=new Se(this,{name:this.getAttribute("name"),value:this._selectable.getState()}),this._controllable.initial(i=>i&&this._selectable.setState(i)),this._controllable.getter(()=>this._selectable.getState());let t=F();this._controllable.setter(t(i=>{this._selectable.setState(i)})),this._selectable.onChange(t(()=>{this._controllable.dispatch(),this.dispatchEvent(new CustomEvent("select",{bubbles:!1}))})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}mount(){this._disableable=new q(this);let e=this.input(),t=this.button(),i=this.list(),s=this.hasAttribute("multiple"),a=this.hasAttribute("autocomplete"),r=this.hasAttribute("autocomplete")&&this.getAttribute("autocomplete").trim().split(" ").includes("strict"),n=this.querySelector("ui-options")||this,l=mn(n,"options");this._activatable=new ps(n,{filter:"data-hidden"}),!e&&!t&&this._disableable.onInitAndChange(d=>{d?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new bs(i),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&this._filterable.filter("")}));let o=this.querySelector("[popover]:not(ui-tooltip > [popover])"),c=o?.querySelector('input:not([type="hidden"])'),h=this.querySelector('input:not([type="hidden"])');h=o?.contains(h)?null:h;let b=this.querySelector("button");if(b=o?.contains(b)?null:b,!(o||h))et(this,this._activatable),tt(this,this,this._activatable),ys(this,this._activatable,this._selectable);else if(!o&&h){let d=h;this._disableable.onInitAndChange(u=>{u?d&&f(d,"disabled",""):d&&k(d,"disabled")}),bi(this,d,this._selectable,this._popoverable),ys(d,this._activatable,this._selectable),xs(a,r,this,d,this._selectable,this._popoverable),pi(d),fi(d),this._filterable&&di(d,this._filterable),mi(d,this._activatable),et(d,this._activatable),tt(this,d,this._activatable),Dt(this,this._activatable)}else if(o&&h){let d=h;f(d,"role","combobox"),f(d,"aria-controls",l);let u=o;this._popoverable=new _e(u),this._anchorable=new me(u,{reference:d,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),xs(a,r,this,d,this._selectable,this._popoverable),this._disableable.onInitAndChange(x=>{x?d&&f(d,"disabled",""):d&&k(d,"disabled")}),this.querySelectorAll("button").forEach(x=>{u.contains(x)||(f(x,"tabindex","-1"),f(x,"aria-controls",l),f(x,"aria-haspopup","listbox"),Tt(x,this._popoverable),_(x,"click",()=>{this._popoverable.toggle(),d.focus()}))}),bi(this,d,this._selectable,this._popoverable),li(this,d,u,this._popoverable,this._anchorable),vi(this,this._popoverable,[d]),Tt(d,this._popoverable),pi(d),fi(d),this._filterable&&di(d,this._filterable),mi(d,this._activatable),wn(d,this._popoverable),hi(d,this._popoverable,this._activatable,this._selectable),vn(d,this._popoverable),ci(this,this._popoverable),et(d,this._activatable),tt(this,d,this._activatable),Dt(this,this._activatable),ui(this._popoverable,this._activatable,this._selectable),gi(this,this._selectable,this._popoverable,s)}else if(o&&c){let d=b,u=c,x=o;f(d,"role","combobox"),f(u,"role","combobox"),f(d,"aria-controls",l),this._disableable.onInitAndChange(y=>{y?(d&&f(d,"disabled",""),u&&f(u,"disabled","")):(d&&k(d,"disabled"),u&&k(u,"disabled"))}),this._popoverable=new _e(x),this._anchorable=new me(x,{reference:d,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0,scrollY:!1}),pi(u),fi(u),this._filterable&&di(u,this._filterable),yn(u,this._popoverable),li(this,d,x,this._popoverable,this._anchorable),vi(this,this._popoverable,[u]),Tt(d,this._popoverable),bi(this,u,this._selectable,this._popoverable),hi(d,this._popoverable,this._activatable,this._selectable),ws(d,this._popoverable),ci(this,this._popoverable),et(u,this._activatable),vs(d,this._activatable,this._popoverable),tt(this,u,this._activatable),Dt(this,this._activatable),ui(this._popoverable,this._activatable,this._selectable),gi(this,this._selectable,this._popoverable,s)}else if(o){let d=b,u=o;f(d,"role","combobox"),f(d,"aria-controls",l),this._disableable.onInitAndChange(x=>{x?(d&&f(d,"disabled",""),e&&f(e,"disabled","")):(d&&k(d,"disabled"),e&&k(e,"disabled"))}),this._popoverable=new _e(u),this._anchorable=new me(u,{reference:d,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),li(this,d,u,this._popoverable,this._anchorable),vi(this,this._popoverable),Tt(d,this._popoverable),hi(d,this._popoverable,this._activatable,this._selectable),ws(d,this._popoverable),mi(d,this._activatable),ci(this,this._popoverable),et(d,this._activatable),vs(d,this._activatable,this._popoverable),tt(this,d,this._activatable),Dt(this,this._activatable),ui(this._popoverable,this._activatable,this._selectable),gi(this,this._selectable,this._popoverable,s)}new MutationObserver(()=>{setTimeout(()=>{if(!this._popoverable||this._popoverable.getState()){let d=this._selectable.selecteds().find(u=>!u.el._disableable.isDisabled())?.el;setTimeout(()=>{this._activatable.activateSelectedOrFirst(d)})}else this._activatable.clearActive()})}).observe(i,{childList:!0})}trigger(){return this.button()||this.input()}button(){return Array.from(this.querySelectorAll("button")).find(e=>e.nextElementSibling?.matches("[popover]"))||null}input(){return this.querySelector('input:not([type="hidden"])')}list(){return this.querySelector("ui-options")||this}clear(){this.input()&&(this.input().value="",this.input().dispatchEvent(new Event("input",{bubbles:!1})))}open(){this._popoverable.setState(!0)}close(){this._popoverable.setState(!1)}deselectLast(){!this.hasAttribute("multiple")&&this.value!==null&&(this.value=null,this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1}))),this.hasAttribute("multiple")&&this.value.length!==0&&(this.value=this.value.slice(0,-1),this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1})))}},gn=class extends D{boot(){f(this,"data-hidden","")}mount(){queueMicrotask(()=>{let e=this.closest("ui-autocomplete, ui-combobox, ui-select"),t=this.closest("ui-options");if(!t)return;let i=n=>n.hasAttribute("data-hidden"),s=()=>{let n;CSS.supports("selector(&)")?n=Array.from(t.querySelectorAll("& > ui-option")).filter(l=>!i(l)).length===0:n=Array.from(t.querySelectorAll(":scope > ui-option")).filter(l=>!i(l)).length===0,n?k(this,"data-hidden"):f(this,"data-hidden","")};s();let a=e._filterable;a&&a.onChange(s),new MutationObserver(n=>{setTimeout(()=>s())}).observe(t,{childList:!0})})}};C("selected",bn),C("select",ms),C("empty",gn),P(({css:e})=>e`ui-select { display: block; }`),P(({css:e})=>e`ui-selected-option { display: contents; }`),P(({css:e})=>e`ui-empty { display: block; cursor: default; }`);function et(e,t){_(e,"keydown",i=>{["ArrowDown","ArrowUp"].includes(i.key)&&(i.key==="ArrowDown"?(t.activateNext(),i.preventDefault(),i.stopPropagation()):i.key==="ArrowUp"&&(t.activatePrev(),i.preventDefault(),i.stopPropagation()))})}function vs(e,t,i){Wi(e,s=>{t.activateBySearch(s),i.getState()||t.getActive()?.click()})}function tt(e,t,i){_(t,"keydown",s=>{if(s.key==="Enter"){let a=i.getActive();if(s.preventDefault(),s.stopPropagation(),!a)return;a.click(),e.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1}))}})}function Dt(e,t,i=!1){_(e,i?"pointerdown":"click",s=>{if(s.target.closest("ui-option")){let a=s.target.closest("ui-option");if(a._disableable.isDisabled())return;a._selectable?.trigger(),e.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1})),s.preventDefault(),s.stopPropagation()}})}function ys(e,t,i){_(e,"focus",()=>{let s=i.selecteds().find(a=>!a.el._disableable.isDisabled())?.el;t.activateSelectedOrFirst(s)}),_(e,"blur",()=>{t.clearActive()})}function mn(e){let t=$(e,"options");return f(e,"role","listbox"),t}function Tt(e,t){f(e,"aria-haspopup","listbox");let i=()=>{f(e,"aria-expanded",t.getState()?"true":"false"),t.getState()?f(e,"data-open",""):k(e,"data-open","")};t.onChange(()=>{i()}),i()}function li(e,t,i,s,a){let r=()=>{Array.from([e,i]).forEach(n=>{s.getState()?f(n,"data-open",""):k(n,"data-open","")}),s.getState()?a.reposition():a.cleanup()};s.onChange(()=>r()),r(),s.onChange(()=>{s.getState()?e.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):e.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function ui(e,t,i){e.onChange(()=>{if(e.getState()){let s=i.selecteds().find(a=>!a.el._disableable.isDisabled())?.el;setTimeout(()=>{t.activateSelectedOrFirst(s)})}else t.clearActive()})}function ci(e,t){_(e,"keydown",i=>{i.key==="Escape"&&t.getState()&&(t.setState(!1),i.preventDefault(),i.stopImmediatePropagation())})}function hi(e,t){_(e,"keydown",i=>{["ArrowDown","ArrowUp"].includes(i.key)&&(i.key==="ArrowDown"||i.key==="ArrowUp")&&(t.getState()||(t.setState(!0),i.preventDefault(),i.stopImmediatePropagation()))})}function vn(e,t){_(e,"click",()=>{t.getState()||(t.setState(!0),e.focus())})}function ws(e,t){_(e,"click",()=>{t.setState(!t.getState()),e.focus()})}function yn(e,t){t.onChange(()=>{t.getState()&&setTimeout(()=>e.focus())})}function di(e,t){t&&_(e,"input",i=>{t.filter(i.target.value)})}function fi(e){_(e,"focus",()=>e.select())}function pi(e){_(e,"change",t=>t.stopPropagation()),_(e,"input",t=>t.stopPropagation())}function wn(e,t){_(e,"keydown",i=>{(/^[a-zA-Z0-9]$/.test(i.key)||i.key==="Backspace")&&(t.getState()||t.setState(!0))})}function bi(e,t,i,s){if(!e.hasAttribute("clear"))return;let r=b=>{t.value=b,t.dispatchEvent(new Event("input",{bubbles:!1}))},n=e.getAttribute("clear"),l=n===""||n.split(" ").includes("action"),o=n===""||n.split(" ").includes("select"),c=n===""||n.split(" ").includes("close"),h=n===""||n.split(" ").includes("esc");n==="none"&&(l=o=c=h=!1),l?e.addEventListener("action",b=>{r("")}):o&&i.onChange(()=>{queueMicrotask(()=>r(""))}),c&&s.onChange(()=>{s.getState()||r("")}),h&&_(t,"keydown",b=>{b.key==="Escape"&&r("")})}function gi(e,t,i,s){let a=!s,r=!s;if(e.hasAttribute("close")){let n=e.getAttribute("close");a=n===""||n.split(" ").includes("action"),r=n.split(" ").includes("select"),n==="none"&&(a=r=!1)}a?e.addEventListener("action",n=>{i.setState(!1)}):r&&t.onChange(()=>{i.setState(!1)})}function mi(e,t){t.onChange(()=>{let i=t.getActive();i?f(e,"aria-activedescendant",i.id):k(e,"aria-activedescendant")})}function xs(e,t,i,s,a,r){if(!e){f(s,"autocomplete","off"),f(s,"aria-autocomplete","none");return}let n=l=>{s.value=l,s.dispatchEvent(new Event("input",{bubbles:!1}))};f(s,"autocomplete","off"),f(s,"aria-autocomplete","list"),a.setState(s.value),queueMicrotask(()=>{a.onInitAndChange(()=>{s.value=a.selectedTextValue()})}),i.addEventListener("action",l=>{n(a.selectedTextValue())}),t&&r.onChange(()=>{r.getState()||n(a.selectedTextValue())})}function vi(e,t,i=[]){let{lock:s,unlock:a}=Oe(t.el,!1,i);t.onChange(()=>{t.getState()?s():a()})}var As=class Bs extends D{boot(){if(this._focusable=new Ze(this,{wrap:!1,ensureTabbable:!1}),_(this,"keydown",t=>{["ArrowDown"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),Wi(this,t=>this._focusable.focusBySearch(t)),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hasAttribute("keep-open")||setTimeout(()=>this.hidePopover(),50)}),this.parentElement.localName==="ui-dropdown"){let t=this.parentElement;_(t.trigger(),"keydown",i=>{i.key==="ArrowDown"&&(this.fromArrowDown=!0,this.showPopover(),i.preventDefault(),i.stopPropagation())})}f(this,"role","menu"),f(this,"tabindex","-1")}mount(){this.initializeMenuItems(),new MutationObserver(i=>{this.initializeMenuItems()}).observe(this,{childList:!0,subtree:!0})}onPopoverShow(){queueMicrotask(()=>{this.fromArrowDown?(this._focusable.focusFirst(),this.fromArrowDown=!1):this.focus()})}onPopoverHide(){this._focusable.wipeTabbables()}initializeMenuItems(){this.walker().each(t=>{t._disableable||En(t)})}walker(){return se(this,(t,{skip:i,reject:s})=>{if(t instanceof Bs||t instanceof ms)return s();if(!["a","button"].includes(t.localName))return i()})}},xn=class extends D{boot(){}},An=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new q(this);let e=this;if(this._disabled&&(f(e,"disabled",""),f(e,"aria-disabled","true")),$(e,"menu-checkbox"),f(e,"role","menuitemcheckbox"),this._disabled)return;e._focusable=new V(e,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),e._selectable=new I(e,{toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):e.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):e.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),this._controllable=new G(this),this._controllable.initial(i=>i&&e._selectable.setState(i)),this._controllable.getter(()=>e._selectable.getState());let t=F();this._controllable.setter(t(i=>{this._selectable.setState(i)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()})),_(e,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),e._selectable.press()}),yi(e)}},Sn=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new q(this);let e=this;this._disabled&&(f(e,"disabled",""),f(e,"aria-disabled","true")),$(e,"menu-radio"),f(e,"role","menuitemradio"),!this._disabled&&(e._focusable=new V(e,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),e._selectable=new I(e,{toggleable:!1,value:this.hasAttribute("value")?this.getAttribute("value"):e.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):e.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),_(e,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),e._selectable.press()}),yi(e))}},_n=class extends D{boot(){this._selectable=new pe(this),this._controllable=new G(this),f(this,"role","group"),this._controllable.initial(t=>t&&this._selectable.setState(t)),this._controllable.getter(()=>this._selectable.getState());let e=F();this._controllable.setter(e(t=>{this._selectable.setState(t)})),this._selectable.onChange(e(()=>{this._controllable.dispatch()})),_(this,"lofi-close-popovers",t=>{this.hasAttribute("keep-open")&&(t.preventDefault(),t.stopPropagation())})}},kn=class extends D{boot(){this._selectable=new pe(this,{multiple:!0}),this._controllable=new G(this),f(this,"role","group"),this._controllable.initial(t=>t&&this._selectable.setState(t)),this._controllable.getter(()=>this._selectable.getState());let e=F();this._controllable.setter(e(t=>{this._selectable.setState(t)})),this._selectable.onChange(e(()=>{this._controllable.dispatch()}))}};P(({css:e})=>e`ui-menu[popover]:popover-open { display: block; }`),P(({css:e})=>e`ui-menu[popover].\:popover-open { display: block; }`),P(({css:e})=>e`ui-menu-checkbox, ui-menu-radio { cursor: default; display: contents; }`),C("menu",As),C("submenu",xn),C("menu-checkbox",An),C("menu-radio",Sn),C("menu-radio-group",_n),C("menu-checkbox-group",kn);function yi(e){_(e,"keydown",t=>{t.key==="Enter"&&(e.click(),t.preventDefault(),t.stopPropagation())}),_(e,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())}),_(e,"keyup",t=>{t.key===" "&&(e.click(),t.preventDefault(),t.stopPropagation())})}function En(e){e._disableable=new q(e),e._disabled=e.hasAttribute("disabled");let t=e.querySelector("a"),i=e,s=e.parentElement.matches("ui-submenu")&&e.parentElement.querySelector("ui-menu[popover]"),a=t||i;if(e._disabled&&(f(a,"disabled",""),f(a,"aria-disabled","true")),$(a,"menu-item"),f(a,"role","menuitem"),!e._disabled)if(a._focusable=new V(a,{disableable:e._disableable,hover:!0,tabbableAttr:"data-active"}),!s)e.hasAttribute("disabled")||_(e,"click",()=>{e.hasAttribute("keep-open")||e.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),yi(i);else{s._popoverable=new _e(s,{triggers:[i]}),s._anchorable=new me(s,{reference:i,position:s.hasAttribute("position")?s.getAttribute("position"):zt()?"left start":"right start",gap:s.hasAttribute("gap")?s.getAttribute("gap"):"-5",crossAxis:!0}),i.addEventListener("click",n=>{s._popoverable.setState(!0)});let{clear:r}=Yt(i,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!1,useSafeArea:!0});s._popoverable.onChange(()=>{s._popoverable.getState()||(r(),s._focusable.wipeTabbables()),s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),_(i,"keydown",n=>{n.key==="Enter"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),_(i,"keydown",n=>{n.key==="ArrowRight"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),_(s,"keydown",n=>{n.key==="ArrowLeft"&&(s._popoverable.setState(!1),i.focus(),n.stopPropagation())})}}var Cn=class Ys extends D{mount(){this._focusable=new Ze(this,{wrap:!0}),this._disableable=new q(this);let t=[];this._disableable.onInitAndChange(i=>{i?(f(this,"aria-disabled","true"),this.walker().each(s=>{s.hasAttribute("disabled")||(f(s,"disabled","true"),f(s,"aria-disabled","true"),t.push(()=>{mt(s,"disabled"),mt(s,"aria-disabled")}))})):(mt(this,"aria-disabled"),t.forEach(s=>s()),t=[])}),_(this,"keydown",i=>{["ArrowRight"].includes(i.key)?(i.target===this?this._focusable.focusFirst():this._focusable.focusNext(),i.preventDefault(),i.stopPropagation()):["ArrowLeft"].includes(i.key)&&(i.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),i.preventDefault(),i.stopPropagation())}),f(this,"role","toolbar"),this.initializeToolbarItems()}initializeToolbarItems(){this.walker().each(t=>{t._disableable||Dn(t)})}walker(){return se(this,(t,{skip:i,reject:s})=>{if(t instanceof Ys||t.hasAttribute("popover")||t instanceof As||t instanceof gs)return s();if(!["a","button"].includes(t.localName))return i()})}};C("toolbar",Cn);function Dn(e){e._disableable=new q(e),e._disabled=e.hasAttribute("disabled");let s=e.querySelector("a")||e;e._disabled&&(f(s,"disabled",""),f(s,"aria-disabled","true")),!e._disabled&&(s._focusable=new V(s,{disableable:e._disableable}))}var Tn=class extends D{boot(){let e=this.hasAttribute("label")?"label":"description",t=this.button(),i=this.overlay();if(t){if(!i)return}else return console.warn("ui-tooltip: no trigger element found",this);i._popoverable=new _e(i,{scope:"tooltip"}),i._anchorable=new me(i,{reference:t,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),i._popoverable.onChange(()=>{i._popoverable.getState()?i._anchorable.reposition():i._anchorable.cleanup()}),this._disableable=new q(this);let s;this._disableable.onInitAndChange(l=>{s&&(s(),s=null),l||(s=Yt(t,i,{gain(){i._popoverable.setState(!0)},lose(){i._popoverable.setState(!1)},focusable:!0,useSafeArea:!1}).remove)});let a=$(i,"tooltip"),r=this.hasAttribute("interactive"),n=this.hasAttribute("label")||t.textContent.trim()==="";r?(f(t,"aria-controls",a),f(t,"aria-expanded","false"),i._popoverable.onChange(()=>{i._popoverable.getState()?f(t,"aria-expanded","true"):f(t,"aria-expanded","false")})):(n?f(t,"aria-labelledby",a):f(t,"aria-describedby",a),f(i,"aria-hidden","true")),f(i,"role","tooltip")}button(){return this.firstElementChild}overlay(){return this.lastElementChild!==this.button()&&this.lastElementChild.tagName!=="TEMPLATE"&&this.lastElementChild}};C("tooltip",Tn);var Mn=class extends ae{boot(){let e=this;this._disableable=new q(this),this._selectable=new I(e,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):null,label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new Se(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this.value=this._selectable.getValue(),this._detangled=F(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))})),f(e,"role","switch"),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),this._disableable.onInitAndChange(t=>{t?k(e,"tabindex","0"):f(e,"tabindex","0")}),_(e,"click",this._disableable.disabled(t=>{t.preventDefault(),t.stopPropagation()}),{capture:!0}),_(e,"click",this._disableable.enabled(t=>{this._selectable.press()})),_(e,"keydown",this._disableable.enabled(t=>{t.key==="Enter"&&(this._selectable.press(),t.preventDefault(),t.stopPropagation())})),_(e,"keydown",this._disableable.enabled(t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())})),_(e,"keyup",this._disableable.enabled(t=>{t.key===" "&&(this._selectable.press(),t.preventDefault(),t.stopPropagation())})),In(e)}get checked(){return this._selectable.isSelected()}set checked(e){this._detangled(()=>{e?this._selectable.select():this._selectable.deselect()})()}};function In(e){e.closest("label")?.addEventListener("click",t=>{e.contains(t.target)||e.click()})}P(({css:e})=>e`ui-switch { display: inline-block; user-select: none; }`),C("switch",Mn);var Pn=class $s extends D{mount(){this.control=this.fieldWalker().find(t=>this.isControl(t)),this.control}associateLabelWithControl(t){t&&this.label&&(this.control=t,!this.control.hasAttribute("aria-labelledby")&&(f(this.elOrButton(this.control),"aria-labelledby",this.label.id),this.control&&!(this.control instanceof ae)&&this.hasAttribute("disabled")&&this.control.setAttribute("disabled","")))}associateDescriptionWithControl(t){t&&this.description&&(this.control=t,!this.control.hasAttribute("aria-describedby")&&f(this.elOrButton(this.control),"aria-describedby",this.description.id))}associateLabel(t){this.label=t,_(t,"click",i=>{["a","button"].includes(i.target.localName)||this.focusOrTogggle(this.control)}),this.control&&this.associateLabelWithControl(this.control)}associateDescription(t){this.description=t,this.control&&this.associateDescriptionWithControl(this.control)}fieldWalker(){return se(this,(t,{skip:i,reject:s})=>{if(t instanceof $s&&t!==this||t.parentElement.localName==="ui-editor"&&t!==this)return s()})}isControl(t){return!!(t instanceof ae||t.matches("input, textarea, select"))}focusOrTogggle(t){if(!t||t.disabled||t.hasAttribute("disabled"))return;t.localName==="input"&&["checkbox","radio"].includes(t.type)||["ui-switch","ui-radio","ui-checkbox"].includes(t.localName)?(t.click(),t.focus()):t.localName==="input"&&["file"].includes(t.type)?t.click():["ui-select","ui-date-picker"].includes(t.localName)?t.trigger()?.focus():(["ui-editor"].includes(t.localName),t.focus())}elOrButton(t){return t instanceof D&&t.firstElementChild instanceof HTMLButtonElement?t.firstElementChild:t}},Ln=class extends D{mount(){$(this,"label"),f(this,"aria-hidden","true"),this.closest("ui-field")?.associateLabel(this)}},On=class extends D{mount(){$(this,"description"),f(this,"aria-hidden","true"),this.closest("ui-field")?.associateDescription(this)}};P(({css:e})=>e`
    ui-label { display: inline-block; cursor: default; }
    ui-description { display: block; }
`),C("field",Pn),C("label",Ln),C("description",On);var Nn=class{constructor(){this.subscribers=[]}subscribe(e,t){this.subscribers.push({reason:e,callback:t})}notify(e,t){this.subscribers.forEach(({reason:i,callback:s})=>{e===i&&s(t)})}};function Un(e){let t={time:Hn,linear:Rn,categorical:Fn},i=Date.now(),s=Date.now(),a={},r=(l,o,c)=>{let h=`${l}-${o}`;for(let b in a)b.startsWith(`${l}-`)&&!b.endsWith(String(o))&&delete a[b];return a[h]||(a[h]=c()),a[h]},n={data:[],width:e.width,height:e.height,inset:e.inset,axes:{x:{axis:"x",key:e.axes.x.key,format:e.axes.x.format,inset:{start:0,end:0},position:e.axes.x.position||"bottom",tickStart:e.axes.x.tickStart,tickEnd:e.axes.x.tickEnd,tickCount:e.axes.x.tickCount,tickStep:e.axes.x.tickStep,tickValues:e.axes.x.tickValues,tickSuffix:e.axes.x.tickSuffix,tickPrefix:e.axes.x.tickPrefix,get rawValues(){return r("x.rawValues",i,()=>n.data.map(l=>l[this.key]))},get type(){return r("x.type",i,()=>e.axes.x.scale||(this.rawValues.every(l=>Vn(l))?"time":"categorical"))},get interval(){return r("x.interval",i,()=>e.axes.x.interval||"auto")},get values(){return r("x.values",i,()=>this.rawValues.map(l=>this.type==="time"?It(l):this.type==="linear"?Number(l):l))},get ticks(){return r("x.ticks",i,()=>{let l=Ss(n.data,this,Mt(this.type,this.values)),o=_s(l,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval);return l.map((c,h)=>({value:c,label:o[h]}))})},get domain(){return r("x.domain",i,()=>Mt(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return r("x.range",s,()=>[n.inset.left+this.inset.start,n.width-n.inset.right-this.inset.end])},get scale(){return r("x.scale",s+i,()=>t[this.type](this.domain,this.range,this.values))}},y:{axis:"y",keys:e.axes.y.keys,format:e.axes.y.format,inset:{start:0,end:0},position:e.axes.y.position||"left",tickStart:e.axes.y.tickStart,tickEnd:e.axes.y.tickEnd,tickCount:e.axes.y.tickCount,tickStep:e.axes.y.tickStep,tickValues:e.axes.y.tickValues,tickSuffix:e.axes.y.tickSuffix,tickPrefix:e.axes.y.tickPrefix,get values(){return r("y.values",i,()=>n.data.flatMap(l=>this.keys.reduce((o,c)=>(l[c]===void 0||o.push(l[c]),o),[])))},get type(){return r("y.type",i,()=>e.axes.y.scale||"linear")},get interval(){return r("y.interval",i,()=>e.axes.y.interval||"auto")},get ticks(){return r("y.ticks",i,()=>{let l=Ss(n.data,this,Mt(this.type,this.values)),o=_s(l,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval);return l.map((c,h)=>({value:c,label:o[h]}))})},get domain(){return r("y.domain",i,()=>Mt(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return r("y.range",s,()=>[n.height-n.inset.bottom-this.inset.end,n.inset.top+this.inset.start])},get scale(){return r("y.scale",s+i,()=>t[this.type](this.domain,this.range,this.values))}}},get series(){return r("series",i+s,()=>this.axes.y.keys.reduce((l,o)=>{if(!n.data[0].hasOwnProperty(o))return console.warn(`ui-chart: series field "${o}" does not exist`),l;let c=n.data.map(b=>({x:n.axes.x.scale(b[n.axes.x.key]),y:n.axes.y.scale(b[o]),datum:b})),h={field:o,values:n.data.map(b=>b[o]),linePath(b="smooth"){let w=this.points.map(d=>[d.x,d.y]);return{smooth:ks,none:Es}[b](w)},areaPath(b="smooth"){return`${{smooth:ks,none:Es}[b](this.points.map(u=>[u.x,u.y]))} L${n.axes.x.scale(n.axes.x.domain[1])},${n.axes.y.scale(n.axes.y.domain[0])} L${n.axes.x.scale(n.axes.x.domain[0])},${n.axes.y.scale(n.axes.y.domain[0])} Z`},points:c};return l[o]=h,l},{}))},closestXPoint(l){return this.closestXPoints(l)[0]},closestXPoints(l){return r("closestXPoints",i+s+l,()=>{let o=[],c=1/0;return Object.values(this.series).forEach(h=>{let b=null;h.points.forEach(w=>{let d=Math.abs(w.x-l);d<c&&(c=d,b=w)}),b&&o.push(b)}),o})},updateDimensions(l,o){this.width=l.width,this.height=l.height,this.inset=o,s=Date.now()},updateData(l){let o=JSON.parse(JSON.stringify(l));o[0]!==void 0&&typeof o[0]!="object"&&(o=o.map((c,h)=>({value:c}))),o.every(c=>c.index)||o.forEach((c,h)=>{c.index=h}),this.data=o,i=Date.now()}};return n.updateData(e.data),n}function Mt(e,t){let i=[...new Set(t)];return e==="time"?Wn(i):e==="linear"?(i.sort((s,a)=>Number(s)-Number(a)),i.length===1?i[0]===0?[Number(i[0]),1]:i[0]>0?[0,Number(i[0])]:[Number(i[0]),0]:[Number(i[0]),Number(i[i.length-1])]):[i[0],i[i.length-1]]}function Ss(e,t,i){let s=[];if(t.type==="linear"){if(t.tickValues)return t.tickValues;let[a,r]=i,n=t.tickCount?Number(t.tickCount):5,l=t.tickStart===0||t.tickStart==="0"?0:t.tickStart||"auto",o=t.tickEnd===0||t.tickEnd==="0"?0:t.tickEnd||"auto";l==="auto"&&a>0&&r>0&&(a=0),o!=="auto"&&o!=="max"&&!isNaN(Number(o))&&(r=Number(o));let c=Number(t.interval),h;if(t.interval==="auto"||Number.isNaN(c)){let u=(r-a)/(n-1),x=Math.pow(10,Math.floor(Math.log10(u))),y=u/x;y<1.5?h=1:y<3?h=2:y<7?h=5:h=10,h*=x}else h=c;let b;l==="auto"?b=Math.floor(a/h)*h:l==="min"?b=a:b=Number(l);let w=b;for(;w<=r+h*.1;)w>=a-h*.1&&s.push(w),w+=h;if(o==="max")Math.abs(s[s.length-1]-i[1])>h*.1&&s.push(i[1]);else if(o!=="auto"&&!isNaN(Number(o))){let d=Number(o),u=s.length;s=Array.from({length:u},(x,y)=>b+(d-b)*(y/(u-1)))}if(s.length>n*2){let d=Math.ceil(s.length/n);s=s.filter((u,x)=>x%d===0)}}else if(t.type==="time"){let[a,r]=Cs(i[0],i[1],t.tickCount,t.interval);return r}else if(t.type==="categorical"&&(e.forEach(a=>{let r=a[t.key];s.push(r)}),t.tickCount&&s.length>t.tickCount)){let a=Math.ceil(s.length/t.tickCount);s=s.filter((r,n)=>n%a===0)}return s}function _s(e,t,i,s,a,r){let n=[];return t==="time"?(i||([i]=Cs(e[0],e[e.length-1],null,r)),i={...i,timeZone:"UTC"},n=e.map(l=>new Date(l).toLocaleString(fe(),i))):t==="linear"?i?n=e.map(l=>l.toLocaleString(fe(),i)):n=e.map(l=>l.toLocaleString(fe())):n=e.map(l=>l+""),a&&(n=n.map(l=>a+l)),s&&(n=n.map(l=>l+s)),n}function Fn(e,t,i){let s=[...new Set(i)],a=(t[1]-t[0])/(s.length-1),r=new Map(s.map((n,l)=>[n,t[0]+l*a]));return function(n){if(n!=null)return r.get(n)}}function Rn(e,t){let i=e[1]-e[0],s=t[1]-t[0];return function(a){return t[0]+(a-e[0])*(s/i)}}function ks(e){if(e.length<2)return"";let t=o=>o<0?-1:1,i=(o,c,h,b,w,d)=>{let u=h-o,x=w-h,y=(b-c)/(u||x<0&&-0),p=(d-b)/(x||u<0&&-0),m=(y*x+p*u)/(u+x);return(t(y)+t(p))*Math.min(Math.abs(y),Math.abs(p),.5*Math.abs(m))||0},s=(o,c,h,b,w)=>{let d=h-o;return d?(3*(b-c)/d-w)/2:w},a=`M${e[0][0]},${e[0][1]}`;if(e.length===2)return a+`L${e[1][0]},${e[1][1]}`;for(let o=0;o<e.length-2;o++){let c=e[o],h=e[o+1];if(c[0]===h[0]&&c[1]===h[1])continue;let b=e[o+2],w=i(c[0],c[1],h[0],h[1],b[0],b[1]),d=(h[0]-c[0])/3,u=c[0]+d,x=c[1]+d*(o===0?s(c[0],c[1],h[0],h[1],w):e[o-1]?i(e[o-1][0],e[o-1][1],c[0],c[1],h[0],h[1]):w),y=h[0]-d,p=h[1]-d*w;a+=`C${u},${x} ${y},${p} ${h[0]},${h[1]}`}let r=e.length,n=e[r-1],l=e[r-2];if(!(n[0]===l[0]&&n[1]===l[1])){let o=i(e[r-3][0],e[r-3][1],l[0],l[1],n[0],n[1]),c=(n[0]-l[0])/3,h=l[0]+c,b=l[1]+c*o,w=n[0]-c,d=n[1]-c*s(l[0],l[1],n[0],n[1],o);a+=`C${h},${b} ${w},${d} ${n[0]},${n[1]}`}return a}function qn(e,t=.05){if(!e||e.length<2)return"";let i=`M ${e[0][0]} ${e[0][1]}`;for(let s=1;s<e.length;s++){let a=e[s],r=e[s-1],n=e[s-2]||r,l=e[s+1]||a,o=r[0]+(l[0]-n[0])*t,c=r[1]+(l[1]-n[1])*t,h=a[0]-(l[0]-n[0])*t,b=a[1]-(l[1]-n[1])*t;i+=` C ${o} ${c}, ${h} ${b}, ${a[0]} ${a[1]}`}return i}function Es(e){return qn(e,0)}function Vn(e){return e instanceof Date||typeof e=="string"&&e.includes("-")&&!isNaN(Date.parse(e))}function Wn(e){return e.sort((t,i)=>typeof t=="string"?t.localeCompare(i):t-i),[It(e[0]),It(e[e.length-1])]}function Hn(e,t){let i=new Date(e[0]).getTime(),a=new Date(e[1]).getTime()-i,r=t[1]-t[0];return function(n){if(!n)return;let l=It(n);if(isNaN(l.getTime()))return;let o=(l.getTime()-i)/a;return t[0]+o*r}}function Cs(e,t,i,s){let a=e,r=t,o=(r-a)/1e3/60,c=o/60,h=c/24,b=h/30,w=h/365,d,u,x;switch(s){case"second":d={hour:"numeric",minute:"numeric",second:"numeric"},u=m=>new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds()+1)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()));break;case"minute":d={hour:"numeric",minute:"numeric"},u=m=>new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes()+1)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes()));break;case"hour":d={hour:"numeric",minute:"numeric"},u=m=>new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours()+1)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours()));break;case"day":d={day:"numeric"},u=m=>new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()+1)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));break;case"week":d={day:"numeric",month:"short"},u=m=>new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()+7)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));break;case"month":d={month:"short",day:"numeric"},u=m=>new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth()+1,1)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),1));break;case"year":d={year:"numeric"},u=m=>new Date(Date.UTC(m.getUTCFullYear()+1,0,1)),x=new Date(Date.UTC(a.getUTCFullYear(),0,1));break;default:}if(!u)if(c<1){d={hour:"numeric",minute:"numeric"};let m=i?Math.max(1,Math.floor(o/(i-1))):1;u=v=>new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes()+m)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours()))}else if(h<1){d={hour:"numeric"};let m=i?Math.max(1,Math.floor(c/(i-1))):1;u=v=>new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours()+m)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0))}else if(h<=7){d={weekday:"short",hour:"numeric"};let m=i?Math.max(1,Math.floor(c/(i-1))):6;u=v=>new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours()+m)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0))}else if(h<=30){d={month:"short",day:"numeric"};let m=i?Math.max(1,Math.floor(h/(i-1))):1;u=v=>new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()+m)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))}else if(b<=6){d={month:"short",day:"numeric"};let m=i?Math.max(1,Math.floor(h/(i-1))):7;u=v=>new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()+m)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))}else if(w<2){d={month:"short"};let m=i?Math.max(1,Math.floor(b/(i-1))):1;u=v=>new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth()+m,1)),x=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth()))}else{d={year:"numeric"};let m=i?Math.max(1,Math.floor(w/(i-1))):1;u=v=>new Date(Date.UTC(v.getUTCFullYear()+m,0,1)),x=new Date(Date.UTC(a.getUTCFullYear(),0,1))}let y=[a],p=a;for(;p<=r;)p=u(p),p<=r&&y.push(new Date(p.getTime()));return[d,y]}function It(e){if(e instanceof Date)return e;let{year:t,month:i,day:s,hour:a,minute:r,second:n,millisecond:l}=Bn(e);return new Date(Date.UTC(t,i-1,s,a,r,n,l))}function Bn(e){let t=e.match(/^(\d{4})(?:-(\d{2}))?(?:-(\d{2}))?(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z)?)?$/);if(!t)throw new Error("Invalid date format");return{year:t[1]?parseInt(t[1],10):null,month:t[2]?parseInt(t[2],10):null,day:t[3]?parseInt(t[3],10):null,hour:t[4]?parseInt(t[4],10):null,minute:t[5]?parseInt(t[5],10):null,second:t[6]?parseInt(t[6],10):null,millisecond:t[7]?parseInt(t[7].padEnd(3,"0"),10):null,utc:!!t[8]}}var Yn=class extends HTMLElement{constructor(){super(),this.querySelectorAll("[data-appended]").forEach(i=>i.remove());let e=this.querySelector('template[name="svg"]'),t=$t(e);e.after(t),this.init(e,t)}init(e,t){this._data=this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[],this._observable=new Nn,this._selectable={getState:()=>this._data,setState:y=>{this._data=y,this._observable.notify("data",this._data)}},this._controllable=new G(this),this._controllable.initial(y=>y&&this._selectable.setState(y)),this._controllable.getter(()=>this._selectable.getState()),this._controllable.setter(y=>{this._selectable.setState(y)});let i={svg:e,lines:{},areas:{},points:{},cursor:e.content.querySelector('template[name="cursor"]'),zeroLine:e.content.querySelector('template[name="zero-line"]'),axes:{x:{template:e.content.querySelector('template[name="axis"][axis="x"]'),axisLine:e.content.querySelector('template[name="axis"][axis="x"] template[name="axis-line"]'),gridLine:e.content.querySelector('template[name="axis"][axis="x"] template[name="grid-line"]'),tickMark:e.content.querySelector('template[name="axis"][axis="x"] template[name="tick-mark"]'),tickLabel:e.content.querySelector('template[name="axis"][axis="x"] template[name="tick-label"]')},y:{template:e.content.querySelector('template[name="axis"][axis="y"]'),axisLine:e.content.querySelector('template[name="axis"][axis="y"] template[name="axis-line"]'),gridLine:e.content.querySelector('template[name="axis"][axis="y"] template[name="grid-line"]'),tickMark:e.content.querySelector('template[name="axis"][axis="y"] template[name="tick-mark"]'),tickLabel:e.content.querySelector('template[name="axis"][axis="y"] template[name="tick-label"]')}},tooltip:this.querySelector('template[name="tooltip"]'),summary:this.querySelector('template[name="summary"]')};e.content.querySelectorAll('template[name="line"]').forEach(y=>{i.lines[y.getAttribute("field")]=y}),e.content.querySelectorAll('template[name="area"]').forEach(y=>{i.areas[y.getAttribute("field")]=y}),e.content.querySelectorAll('template[name="point"]').forEach(y=>{i.points[y.getAttribute("field")]=y});let s=()=>{},a=()=>{},r=()=>{},n=()=>{},l=null,o=null,c=null,h=null;o=document.createElementNS("http://www.w3.org/2000/svg","rect"),o.setAttribute("data-overlay",""),o.setAttribute("fill","none"),o.setAttribute("pointer-events","all"),o.addEventListener("mousemove",qi(function(y){s(y),a(y),r(y),n(y)},1)),o.addEventListener("mouseleave",()=>{s(null),a(null),r(null),n(null)}),t.appendChild(o),i.cursor&&(l=Z(i.cursor),l.setAttribute("data-cursor",""),t.appendChild(l)),i.tooltip&&(c=$t(i.tooltip),i.tooltip.after(c)),i.summary&&(h=$t(i.summary),i.summary.after(h));let b={left:8,right:8,top:8,bottom:8};if(i.svg?.hasAttribute("gutter")){let y=i.svg?.getAttribute("gutter").split(" ").map(p=>p.replace("px","")).map(Number);y.length===1?(b.top=y[0],b.right=y[0],b.bottom=y[0],b.left=y[0]):y.length===2?(b.top=y[0],b.right=y[1],b.bottom=y[0],b.left=y[1]):y.length===3?(b.top=y[0],b.right=y[1],b.bottom=y[2],b.left=y[1]):y.length===4&&(b.top=y[0],b.right=y[1],b.bottom=y[2],b.left=y[3])}let[w,d]=$n(t),u=Un({data:this._data,width:t.parentElement.getBoundingClientRect().width,height:t.parentElement.getBoundingClientRect().height,inset:{left:0,right:0,top:0,bottom:0},axes:{x:{key:w,format:i.axes.x.template?.hasAttribute("format")?JSON.parse(i.axes.x.template?.getAttribute("format")):null,scale:i.axes.x.template?.getAttribute("scale"),interval:i.axes.x.template?.getAttribute("interval"),position:i.axes.x.template?.getAttribute("position"),tickCount:i.axes.x.template?.getAttribute("tick-count")||i.axes.x.tickLabel?.getAttribute("target-tick-count"),tickStart:i.axes.x.template?.getAttribute("tick-start"),tickEnd:i.axes.x.template?.getAttribute("tick-end"),tickStep:i.axes.x.template?.getAttribute("tick-step")?Number(i.axes.x.template?.getAttribute("tick-step")):null,tickSuffix:i.axes.x.template?.getAttribute("tick-suffix"),tickPrefix:i.axes.x.template?.getAttribute("tick-prefix"),tickValues:i.axes.x.template?.hasAttribute("tick-values")?JSON.parse(i.axes.x.template?.getAttribute("tick-values")):null},y:{keys:d,format:i.axes.y.template?.hasAttribute("format")?JSON.parse(i.axes.y.template?.getAttribute("format")):null,scale:i.axes.y.template?.getAttribute("scale"),interval:i.axes.y.template?.getAttribute("interval"),position:i.axes.y.template?.getAttribute("position"),tickCount:i.axes.y.template?.getAttribute("tick-count")||i.axes.y.tickLabel?.getAttribute("target-tick-count"),tickStart:i.axes.y.template?.getAttribute("tick-start"),tickEnd:i.axes.y.template?.getAttribute("tick-end"),tickStep:i.axes.y.template?.getAttribute("tick-step")?Number(i.axes.y.template?.getAttribute("tick-step")):null,tickSuffix:i.axes.y.template?.getAttribute("tick-suffix"),tickPrefix:i.axes.y.template?.getAttribute("tick-prefix"),tickValues:i.axes.y.template?.hasAttribute("tick-values")?JSON.parse(i.axes.y.template?.getAttribute("tick-values")):null}}}),x=(y=!0)=>{if(f(t,"viewBox",`0 0 ${u.width} ${u.height}`),u.data.length!==0){if(u.data.length===1){console.warn("ui-chart: chart only has one data point so it cannot be rendered.");return}if(u.data[0][u.axes.x.key]===void 0){console.warn(`ui-chart: axis field "${u.axes.x.key}" does not exist`);return}if(Object.entries(u.series).forEach(([p,m])=>{let v=t.querySelector(`[data-line][data-series="${p}"]`),A=i.lines[p];if(A){let S=A.getAttribute("curve")||"smooth";if(v)v.setAttribute("d",m.linePath(S));else{let E=Z(A);E.setAttribute("data-line",""),E.setAttribute("data-series",p),E.setAttribute("d",m.linePath(S)),t.appendChild(E)}}}),Object.entries(u.series).forEach(([p,m])=>{let v=t.querySelector(`[data-area][data-series="${p}"]`),A=i.areas[p];if(A){let S=A.getAttribute("curve")||"smooth";if(v)v.setAttribute("d",m.areaPath(S));else{let E=Z(A);E.setAttribute("data-area",""),E.setAttribute("data-series",p),E.setAttribute("d",m.areaPath(S)),t.appendChild(E)}}}),Object.entries(u.series).forEach(([p,m])=>{let v=t.querySelector(`[data-point-group][data-series="${p}"]`),A=i.points[p];A&&(t.querySelector(`[data-point-group][data-series="${p}"]`)?.remove(),v=document.createElementNS("http://www.w3.org/2000/svg","g"),v.setAttribute("data-point-group",""),v.setAttribute("data-series",p),m.points.forEach(S=>{let E=Z(A);E.setAttribute("data-point",""),E.setAttribute("data-series",p),E.setAttribute("cx",S.x),E.setAttribute("cy",S.y),v.appendChild(E)}),t.appendChild(v))}),n=p=>{t.querySelectorAll("[data-point-group]").forEach(m=>{if(m.querySelectorAll("[data-point]").forEach(v=>v.removeAttribute("data-active")),p){let v=p.clientX-t.getBoundingClientRect().left,A=p.clientY-t.getBoundingClientRect().top;v>=u.inset.left&&v<=u.width-u.inset.right&&A>=u.inset.top&&A<=u.height-u.inset.bottom&&u.closestXPoints(v).forEach(E=>{m.querySelectorAll(`[data-point][cx="${E.x}"]`).forEach(M=>M.setAttribute("data-active",""))})}else m.querySelectorAll("[data-point]").forEach(v=>v.removeAttribute("data-active"))})},i.axes.x.template){if(i.axes.x.axisLine){t.querySelector('[data-axis-line][data-axis="x"]')?.remove();let p=Z(i.axes.x.axisLine);p.setAttribute("data-axis-line",""),p.setAttribute("data-axis","x"),p.setAttribute("x1",u.axes.x.scale(u.axes.x.domain[0])),p.setAttribute("x2",u.axes.x.scale(u.axes.x.domain[1])),p.setAttribute("y1",u.axes.y.scale(u.axes.y.domain[u.axes.x.position==="bottom"?0:1])),p.setAttribute("y2",u.axes.y.scale(u.axes.y.domain[u.axes.x.position==="bottom"?0:1])),t.appendChild(p)}if(i.axes.x.gridLine){t.querySelector('[data-grid-line-group][data-axis="x"]')?.remove();let p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("data-grid-line-group",""),p.setAttribute("data-axis","x"),u.axes.x.ticks.forEach(({value:m})=>{let v=Z(i.axes.x.gridLine);v.setAttribute("data-grid-line",""),v.setAttribute("data-axis","x"),v.setAttribute("x1",u.axes.x.scale(m)),v.setAttribute("x2",u.axes.x.scale(m)),v.setAttribute("y1",u.inset.top),v.setAttribute("y2",u.height-u.inset.bottom),p.appendChild(v)}),t.appendChild(p)}if(i.axes.x.tickMark){t.querySelector('[data-tick-mark-group][data-axis="x"]')?.remove();let p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("data-tick-mark-group",""),p.setAttribute("data-axis","x"),u.axes.x.ticks.forEach(({value:m,label:v})=>{let A={x:u.axes.x.scale(m),y:u.axes.y.scale(u.axes.y.domain[u.axes.x.position==="bottom"?0:1])},S=Z(i.axes.x.tickMark);S.setAttribute("data-tick-mark",""),S.setAttribute("data-axis","x"),S.setAttribute("transform",`translate(${A.x}, ${A.y})`),p.appendChild(S)}),t.appendChild(p)}if(i.axes.x.tickLabel){t.querySelector('[data-tick-label-group][data-axis="x"]')?.remove();let p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("data-tick-label-group",""),p.setAttribute("data-axis","x"),u.axes.x.ticks.forEach(({value:m,label:v})=>{let A={x:u.axes.x.scale(m),y:u.axes.y.scale(u.axes.y.domain[u.axes.x.position==="bottom"?0:1])},S=Z(i.axes.x.tickLabel);S.querySelectorAll("slot").forEach(E=>E.replaceWith(document.createTextNode(v))),S.setAttribute("data-tick-label",""),S.setAttribute("data-axis","x"),S.setAttribute("transform",`translate(${A.x}, ${A.y})`),p.appendChild(S)}),t.appendChild(p),Ds(p,u.axes.x)}}if(i.axes.y.template){if(i.axes.y.axisLine){t.querySelector('[data-axis-line][data-axis="y"]')?.remove();let p=Z(i.axes.y.axisLine);p.setAttribute("data-axis-line",""),p.setAttribute("data-axis","y"),p.setAttribute("x1",u.axes.x.scale(u.axes.x.domain[u.axes.y.position==="left"?0:1])),p.setAttribute("x2",u.axes.x.scale(u.axes.x.domain[u.axes.y.position==="left"?0:1])),p.setAttribute("y1",u.axes.y.scale(u.axes.y.domain[0])),p.setAttribute("y2",u.axes.y.scale(u.axes.y.domain[1])),t.appendChild(p)}if(i.axes.y.gridLine){t.querySelector('[data-grid-line-group][data-axis="y"]')?.remove();let p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("data-grid-line-group",""),p.setAttribute("data-axis","y"),u.axes.y.ticks.forEach(({value:m,label:v})=>{let A={x:u.axes.x.scale(u.axes.x.domain[0]),y:u.axes.y.scale(m)},S=Z(i.axes.y.gridLine);S.setAttribute("data-grid-line",""),S.setAttribute("data-axis","y"),S.setAttribute("x1",u.inset.left),S.setAttribute("x2",u.width-u.inset.right),S.setAttribute("y1",A.y),S.setAttribute("y2",A.y),p.appendChild(S)}),t.appendChild(p)}if(i.axes.y.tickMark){t.querySelector('[data-tick-mark-group][data-axis="y"]')?.remove();let p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("data-tick-mark-group",""),p.setAttribute("data-axis","y"),u.axes.y.ticks.forEach(({value:m,label:v})=>{let A={x:u.axes.x.scale(u.axes.x.domain[u.axes.y.position==="left"?0:1]),y:u.axes.y.scale(m)},S=Z(i.axes.y.tickMark);S.setAttribute("data-tick-mark",""),S.setAttribute("data-axis","y"),S.setAttribute("transform",`translate(${A.x}, ${A.y})`),p.appendChild(S)}),t.appendChild(p)}if(i.axes.y.tickLabel){t.querySelector('[data-tick-label-group][data-axis="y"]')?.remove();let p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("data-tick-label-group",""),p.setAttribute("data-axis","y"),u.axes.y.ticks.forEach(({value:m,label:v})=>{let A={x:u.axes.x.scale(u.axes.x.domain[u.axes.y.position==="left"?0:1]),y:u.axes.y.scale(m)},S=Z(i.axes.y.tickLabel);S.querySelectorAll("slot").forEach(E=>E.replaceWith(document.createTextNode(v))),S.setAttribute("data-tick-label",""),S.setAttribute("data-axis","y"),S.setAttribute("transform",`translate(${A.x}, ${A.y})`),p.appendChild(S)}),t.appendChild(p),Ds(p,u.axes.y)}}if(i.zeroLine&&u.axes.y.domain[0]<0&&u.axes.y.domain[1]>0){t.querySelector('[data-zero-line][data-axis="y"]')?.remove();let p=Z(i.zeroLine);p.setAttribute("data-zero-line",""),p.setAttribute("data-axis","y"),p.setAttribute("x1",u.axes.x.scale(u.axes.x.domain[0])),p.setAttribute("x2",u.axes.x.scale(u.axes.x.domain[1])),p.setAttribute("y1",u.axes.y.scale(0)),p.setAttribute("y2",u.axes.y.scale(0)),t.appendChild(p)}if(o&&(o.setAttribute("width",u.width),o.setAttribute("height",u.height),o.setAttribute("x",0),o.setAttribute("y",0)),l&&(s=p=>{if(p){let m=p.clientX-t.getBoundingClientRect().left,v=p.clientY-t.getBoundingClientRect().top;if(m>=u.inset.left&&m<=u.width-u.inset.right&&v>=u.inset.top&&v<=u.height-u.inset.bottom){let A=u.closestXPoint(m);l.setAttribute("opacity","1"),l.setAttribute("x1",A.x),l.setAttribute("x2",A.x),l.setAttribute("y1",u.axes.y.scale(u.axes.y.domain[0])),l.setAttribute("y2",u.axes.y.scale(u.axes.y.domain[1]))}else l.setAttribute("opacity","0")}else l.setAttribute("opacity","0")}),c&&(a=p=>{if(p===null)k(c,"data-active");else{let m=p.clientX-t.getBoundingClientRect().left,v=p.clientY-t.getBoundingClientRect().top;if(m>=u.inset.left&&m<=u.width-u.inset.right&&v>=u.inset.top&&v<=u.height-u.inset.bottom){let A=u.closestXPoint(m);if(A){f(c,"data-active","");let S=c.getBoundingClientRect(),E=t.getBoundingClientRect(),M=E.width-(A.x+S.width+15),U=E.height-(v+S.height+15),L=M<0?A.x-S.width-15:A.x+15,W=U<0?v-S.height-15:v+15;c.style.transform=`translate(${L}px, ${W}px)`;let Q=i.tooltip.content.cloneNode(!0).firstElementChild;Q.querySelectorAll("slot").forEach(O=>{let ee=O.getAttribute("field");if(ee){let N=O.hasAttribute("format")?JSON.parse(O.getAttribute("format")):null,B=A.datum[ee];if(N===null)return O.textContent=B;N={...N,timeZone:"UTC"},Ms(B)?B=Number(B).toLocaleString(fe(),N):Is(B)&&(B=new Date(B).toLocaleDateString(fe(),N)),O.textContent=B}}),c.innerHTML=Q.innerHTML}else k(c,"data-active")}else k(c,"data-active")}}),h&&(r=p=>{let m=null;if(p!==null){let v=p.clientX-t.getBoundingClientRect().left,A=p.clientY-t.getBoundingClientRect().top;v>=u.inset.left&&v<=u.width-u.inset.right&&A>=u.inset.top&&A<=u.height-u.inset.bottom&&(m=u.closestXPoint(v))}if(m=m||u.closestXPoint(u.axes.x.range[1]),m){let v=i.summary.content.cloneNode(!0).firstElementChild;v.querySelectorAll("slot").forEach(A=>{let S=A.getAttribute("field");if(S){let E=A.hasAttribute("format")?JSON.parse(A.getAttribute("format")):{};E={...E,timeZone:"UTC"};let M=A.hasAttribute("fallback")&&p===null?A.getAttribute("fallback"):m.datum[S];Ms(M)?M=Number(M).toLocaleString(fe(),E):Is(M)&&(M=new Date(M).toLocaleString(fe(),E)),A.textContent=M}}),h.innerHTML=v.innerHTML}},r(null)),t.appendChild(o),t.querySelectorAll("[data-grid-line-group]").forEach(p=>o.before(p)),t.querySelectorAll("[data-axis-line]").forEach(p=>o.before(p)),t.querySelectorAll("[data-zero-line]").forEach(p=>o.before(p)),t.querySelectorAll("[data-area]").forEach(p=>o.before(p)),t.querySelectorAll("[data-line]").forEach(p=>o.before(p)),t.querySelectorAll("[data-cursor]").forEach(p=>o.before(p)),t.querySelectorAll("[data-point-group]").forEach(p=>o.before(p)),y){let p=Xn(t);u.updateDimensions({width:u.width,height:u.height},{left:b.left+p.left,right:b.right+p.right,top:b.top+p.top,bottom:b.bottom+p.bottom}),x(!1)}}};this._observable.subscribe("resize",()=>{u.updateDimensions({width:t.parentElement.getBoundingClientRect().width,height:t.parentElement.getBoundingClientRect().height},{left:0,right:0,top:0,bottom:0}),x()}),this._observable.subscribe("data",()=>{u.updateData(this._data),u.updateDimensions({width:u.width,height:u.height},{left:0,right:0,top:0,bottom:0}),x()}),new ResizeObserver(()=>{this._observable.notify("resize")}).observe(this),new MutationObserver(y=>{y.forEach(p=>{p.attributeName==="value"&&this._selectable.setState(this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[])})}).observe(this,{attributes:!0,attributeFilter:["value"]})}};customElements.define("ui-chart",Yn);function $n(e){let t=null,i=[];return e.querySelectorAll('template[name="line"], template[name="area"], template[name="point"]').forEach(s=>{i.push(s.getAttribute("field")||"value")}),e.querySelectorAll('template[name="axis"][axis="x"]').forEach(s=>{t=s.getAttribute("field")||"index"}),i=Array.from(new Set(i)),t===null&&(t="index"),i.length===0&&(i=["value"]),[t,i]}function Z(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t.innerHTML=e.innerHTML,t.firstElementChild}function Ds(e,t){if(Ts(e,t)){if(t.axis==="x"&&t.type==="categorical")zn(e);else if(t.axis==="x"&&t.type==="time"){let i=Gn(e);if(!Ts(e,t))return;i(),jn(e)}}}function Ts(e,t){let i=Array.from(e.children);i=i.filter(s=>s.style.display!="none");for(let s=0;s<i.length;s++){let a=i[s],r=i[s+1];if(!r)break;let n=a.getBoundingClientRect(),l=r.getBoundingClientRect(),o=20;if(t.axis==="y"){if(n.bottom+o<l.top)return!0}else if(n.right+o>l.left)return!0}return!1}function zn(e){let t=[];return Array.from(e.children).forEach((i,s)=>{let a=i.matches("text")?i:i.querySelector("text");Array.from(e.children).forEach((r,n)=>{let l=r.matches("text")?r:r.querySelector("text");l&&(l.style.transform="rotate(-45deg)",l.style.textAnchor="end",t.push(()=>{l.style.transform=null,l.style.textAnchor=null}))})}),()=>t.forEach(i=>i())}function Gn(e){let t=Array.from(e.children);return t.forEach((i,s)=>{s%2===1&&(i.style.display="none")}),()=>t.forEach((i,s)=>{i.style.display="inline"})}function jn(e){let t=Array.from(e.children);t.forEach((n,l)=>{n.style.display="none"});let i=t[0],s=t[t.length-1],a=i.matches("text")?i:i.querySelector("text"),r=s.matches("text")?s:s.querySelector("text");return i.style.display="inline",a.style.textAnchor="start",s.style.display="inline",r.style.textAnchor="end",()=>t.forEach((n,l)=>{n.style.display="inline"})}function Ms(e){return typeof e=="number"||typeof e=="string"&&!isNaN(Number(e))}function Is(e){return e instanceof Date||typeof e=="string"&&!isNaN(Date.parse(e))}function Xn(e){let t=e.getBoundingClientRect(),i={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return Array.from(e.children).forEach(s=>{if(s.hasAttribute("data-overlay")||s.style.display==="none")return;let a=s.getBoundingClientRect();!a.width&&!a.height||(i.top=Math.min(i.top,a.top),i.right=Math.max(i.right,a.right),i.bottom=Math.max(i.bottom,a.bottom),i.left=Math.min(i.left,a.left))}),{top:Math.max(0,t.top-i.top),right:Math.max(0,i.right-t.right),bottom:Math.max(0,i.bottom-t.bottom),left:Math.max(0,t.left-i.left)}}var Kn=class extends D{mount(){let e=this.querySelector("button");_(e,"click",()=>{Ri(this,i=>!!i._closeable)?._closeable?.close()})}};C("close",Kn);var Jn=class extends D{toasts=new Set;timeouts=new Set;initiallyExpanded=!1;expanded=!1;mount(){this.initiallyExpanded=this.hasAttribute("expanded");let e=this.getAttribute("position")||"bottom right";this.verticalPosition=e.match(/\b(top|bottom)\b/)?.[0]||"bottom",this.horizontalPosition=e.match(/\b(left|start|center|right|end)\b/)?.[0]||"right",this.horizontalPosition==="left"?this.horizontalPosition="start":this.horizontalPosition==="right"&&(this.horizontalPosition="end"),f(this,"role","status")}showToast(e={}){let t=this.querySelector("ui-toast");if(!t)return console.warn("ui-toast-group: no ui-toast element found",this);this.matches(":popover-open")||this.showPopover();let i=Number(e.duration===void 0?5e3:e.duration),s=t.prepareToastTemplate(e),a=s.firstElementChild,r=()=>{this.animateIn(s,a),this.updateList()},n=()=>{this.animateOut(s,a),this.updateList()};this.toasts.add(s),this.appendChild(s),r(),s.hideToast=n;let l=i!==0&&Vi(()=>{this.timeouts.delete(l),n()},i);this.timeouts.add(l),s.destroyToast=()=>{l&&(this.timeouts.delete(l),l.cancel()),this.toasts.delete(s),s.remove(),this.updateList()},s.addEventListener("mouseenter",()=>{this.pauseTimeouts(),this.initiallyExpanded||(this.expanded=!0,this.updateList())}),s.addEventListener("mouseleave",()=>{this.resumeTimeouts(),this.initiallyExpanded||(this.expanded=!1,this.updateList())}),s._closeable=new Gt(s),s._closeable.onClose(()=>s.destroyToast())}pauseTimeouts(){for(let e of this.timeouts)e.pause()}resumeTimeouts(){for(let e of this.timeouts)e.resume()}animateIn(e,t){let a=1.5*((this.verticalPosition==="top"?"bottom":"top")==="top"?1:-1);t.style.opacity=0,t.style.transform=`translateY(${a}rem)`,t.offsetHeight,t.style.opacity=100,t.style.transform="translateY(0)"}animateOut(e,t){let s=.5*(this.verticalPosition==="top"?1:-1);t.style.transform=`translateY(${s}rem)`,t.style.opacity=0,this.toasts.delete(e);let a=()=>{e.remove(),this.toasts.size===0&&(this.expanded=!1)};t.getAnimations().length?t.addEventListener("transitionend",()=>{a()},{once:!0}):a()}updateList(){this.initiallyExpanded||this.expanded?this.expand():this.collapse()}expand(){let e=0;for(let t of Array.from(this.toasts).reverse()){let i=this.verticalPosition==="top"?1:-1;t.style.transform=`translateY(calc(100% * ${i*e}))`,t.style.opacity=100,e++}}collapse(){let e=0;for(let t of Array.from(this.toasts).reverse()){let i=3,s=0,r=10*(this.verticalPosition==="top"?1:-1)*e;t.style.zIndex=5e3-e,e>=i?(s=1-.05*(i-1),t.style.opacity=0):(s=1-.05*e,t.style.opacity=100),t.style.transform=`scale(${s}) translateY(${r}px)`,e++}}},Zn=class extends D{mount(){this.closest("ui-toast-group")||(f(this,"role","status"),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.hideToast()}),this.defaultPosition=this.getAttribute("position")||"bottom end")}showToast(e={}){let t=this.template().nextElementSibling;t&&t.destroyToast();let i=Number(e.duration===void 0?5e3:e.duration),s=e.dataset?.position??this.defaultPosition;e.dataset?.position!==void 0&&delete e.dataset.position,this.setAttribute("position",s);let a=this.prepareToastTemplate(e),r=()=>{this.showPopover(),a.classList.add("showing")},n=()=>{a._hiding=!0,a.classList.remove("showing"),a.getAnimations().length?a.addEventListener("transitionend",()=>{a.remove(),this.hidePopover()},{once:!0}):(a.remove(),this.hidePopover())};this.appendChild(a),r(),a.hideToast=n;let l=i!==0&&Vi(()=>{n()},i);a.destroyToast=()=>{l&&l.cancel(),a.remove(),this.hidePopover()},a.addEventListener("mouseenter",()=>{l&&l.pause()}),a.addEventListener("mouseleave",()=>{l&&l.resume()}),a._closeable=new Gt(a),a._closeable.onClose(()=>a.destroyToast())}hideToast(){let e=this.template().nextElementSibling;e&&e.destroyToast()}template(){return this.querySelector("template")}prepareToastTemplate(e){let t=e.slots||{},i=e.dataset||{},s=this.template();if(!s)return console.warn("ui-toast: no template element found",this);let a=s.content.cloneNode(!0).firstElementChild;return a.setAttribute("aria-atomic","true"),Object.entries(t).forEach(([r,n])=>{[null,void 0,!1].includes(n)||a.querySelectorAll(`slot[name="${r}"]`).forEach(l=>{l.replaceWith(document.createTextNode(n))})}),Object.entries(i).forEach(([r,n])=>{a.dataset[r]=n}),a.querySelectorAll("slot").forEach(r=>r.remove()),a}};C("toast-group",Jn),C("toast",Zn);var Qn=class extends ae{boot(){this._selectable=new pe(this),this._controllable=new G(this,{disabled:this._disabled,bubbles:!0}),this._focusable=new Ze(this,{wrap:!0}),this._submittable=new Se(this,{name:this.getAttribute("name"),value:this._selectable.getState(),includeWhenEmpty:!1}),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=F(),this._controllable.setter(this._detangled(e=>{this._selectable.setState(e)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),_(this,"keydown",e=>{["ArrowDown","ArrowRight"].includes(e.key)?(this._focusable.focusNext(),e.preventDefault(),e.stopPropagation()):["ArrowUp","ArrowLeft"].includes(e.key)&&(this._focusable.focusPrev(),e.preventDefault(),e.stopPropagation())}),f(this,"role","radiogroup"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}},eo=class extends ae{boot(){let e=this;this._disableable=new q(this),this._selectable=new I(e,{value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),this.value=this._selectable.getValue(),this._selectable.onChange(()=>{this._selectable.isSelected()&&this._focusable.focus(!1)}),this._disableable.onChange(t=>{t?this._focusable.untabbable():this._selectable.isSelected()&&this._focusable.tabbable()}),f(e,"role","radio"),this._focusable=new V(e,{disableable:this._disableable,tabbableAttr:"data-active"}),_(e,"click",this._disableable.disabled(t=>{t.preventDefault(),t.stopPropagation()}),{capture:!0}),_(e,"click",this._disableable.enabled(t=>{this._selectable.press()})),_(e,"keydown",this._disableable.enabled(t=>{t.key==="Enter"&&(this._selectable.press(),t.preventDefault(),t.stopPropagation())})),_(e,"keydown",this._disableable.enabled(t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())})),_(e,"keyup",this._disableable.enabled(t=>{t.key===" "&&(this._selectable.press(),t.preventDefault(),t.stopPropagation())})),to(e),_(e,"focus",t=>{Bt()&&this._selectable.select()})}get checked(){return this._selectable.isSelected()}set checked(e){(this.closest("ui-radio-group")?._detangled||(()=>{}))(()=>{e&&this._selectable.select()})()}};function to(e){e.closest("label")?.addEventListener("click",t=>{e.contains(t.target)||e.click()})}P(({css:e})=>e`ui-radio-group { display: block; }`),P(({css:e})=>e`ui-radio { display: inline-block; user-select: none; }`),C("radio-group",Qn),C("radio",eo);var Ps=class zs extends D{boot(){this._disabled=this.hasAttribute("disabled")}mount(){this.walkPanels(t=>Os(t)),new MutationObserver(t=>{this.walkPanels(i=>Os(i))}).observe(this,{childList:!0})}showPanel(t){this.walkPanels(i=>{i.getAttribute("name")===t?i.show():i.hide()})}getPanel(t){return this.walkPanels((i,s)=>{i.getAttribute("name")===t&&s(i)})}walkPanels(t){let i=!1,s;for(let a of this.children)if(!(a instanceof zs)&&!(a instanceof Ls)&&(t(a,r=>{i=!0,s=r}),i))break;return s}},Ls=class Gs extends ae{boot(){this._focusable=new Ze(this,{wrap:!0}),this._selectableGroup=new pe(this),this._controllable=new G(this,{disabled:this._disabled}),this._controllable.initial(i=>i&&this._selectableGroup.setState(i)),this._controllable.getter(()=>this._selectableGroup.getState());let t=F();this._controllable.setter(t(i=>{this._selectableGroup.setState(i)})),this._selectableGroup.onChange(t(()=>{this._controllable.dispatch()})),_(this,"keydown",i=>{["ArrowDown","ArrowRight"].includes(i.key)?(this._focusable.focusNext(),i.preventDefault(),i.stopPropagation()):["ArrowUp","ArrowLeft"].includes(i.key)&&(this._focusable.focusPrev(),i.preventDefault(),i.stopPropagation())}),f(this,"role","tablist")}mount(){this.initializeTabs(),this._focusable.ensureTabbable(),this._selectableGroup.getState()||this._selectableGroup.selectFirst(),new MutationObserver(t=>{this.initializeTabs();let i=this._selectableGroup.selected();i.el.closest("ui-tab-group").showPanel(i.value)}).observe(this,{childList:!0})}initializeTabs(){this.walker().each(t=>{t._initialized||t._disableable||t.hasAttribute("action")||(io(t),t._initialized=!0)})}walker(){return se(this,(t,{skip:i,reject:s})=>{if(t instanceof Ps||t instanceof Gs)return s();if(!["a","button"].includes(t.localName))return i()})}};function io(e){e._disableable=new q(e);let t=e.matches("a")?e:null,i=t||e;e._disableable.onInitAndChange(a=>{a?f(i,"aria-disabled","true"):k(i,"aria-disabled")});let s=$(i,"tab");if(f(i,"role","tab"),i._focusable=new V(i,{disableable:e._disableable,tabbableAttr:"data-active"}),!t){let a=e.getAttribute("name");e._selectable=new I(e,{value:a||Math.random().toString(36).substring(2,10),label:e.hasAttribute("label")?e.getAttribute("label"):e.textContent.trim(),selectedInitially:e.hasAttribute("selected"),toggleable:!1}),_(e,"click",()=>e._selectable.press()),e._selectable.onInitAndChange(()=>{let r=e.closest("ui-tab-group")?.getPanel(a);e._selectable.getState()?r?.show():r?.hide(),e._selectable.getState()&&e._focusable.focus(!1)}),e.closest("ui-tab-group")?.hasAttribute("manual")||_(e,"focus",()=>e._selectable.select()),queueMicrotask(()=>{let r=e.closest("ui-tab-group");if(!r)return;let n=r.getPanel(a);if(!n)throw new Error("Could not find panel...");f(e,"aria-controls",n.id),f(n,"aria-labelledby",e.id)})}}function Os(e){e._initialized||($(e,"tab-panel"),f(e,"role","tabpanel"),e.hasAttribute("tabindex")||f(e,"tabindex","-1"),e.show=()=>{f(e,"data-selected",""),f(e,"tabindex","0")},e.hide=()=>{k(e,"data-selected"),f(e,"tabindex","-1")},e._initialized=!0)}P(({css:e})=>e`ui-tab-group, ui-tabs { display: block; cursor: default; }`),C("tab-group",Ps),C("tabs",Ls),document.addEventListener("alpine:init",()=>{let e=window.Flux?.applyAppearance;e||(e=()=>{window.Flux.appearance=null,window.localStorage.removeItem("flux.appearance")});let t=Alpine.reactive({toast(...s){let a={slots:{},dataset:{}};typeof s[0]=="string"&&(a.slots.text=s.shift()),typeof s[0]=="string"&&(a.slots.heading=a.slots.text,a.slots.text=s.shift());let r=s.shift()||{};r.text&&(a.slots.text=r.text),r.heading&&(a.slots.heading=r.heading),r.variant&&(a.dataset.variant=r.variant),r.position&&(a.dataset.position=r.position),r.duration!==void 0&&(a.duration=r.duration),document.dispatchEvent(new CustomEvent("toast-show",{detail:a}))},modal(s){return{show(){document.dispatchEvent(new CustomEvent("modal-show",{detail:{name:s}}))},close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{name:s}}))}}},modals(){return{close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{}}))}}},appearance:window.localStorage.getItem("flux.appearance")||"system",systemAppearanceChanged:1,get dark(){return JSON.stringify(t.systemAppearanceChanged),t.appearance==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches:t.appearance==="dark"},set dark(s){let a=this.dark;s!==a&&(s?t.appearance="dark":t.appearance="light")}});window.Flux=t,Alpine.magic("flux",()=>t),Alpine.effect(()=>{e(t.appearance)}),document.addEventListener("livewire:navigated",()=>{e(t.appearance)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{t.systemAppearanceChanged++,e(t.appearance)})}),!ba()&&!ga()&&wa()})();
